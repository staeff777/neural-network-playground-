(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var qt,Z,Ge,Wt,ye,qe,Ke,Ze,ae,ee,ne,zt={},Je=[],wn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function Pt(e,t){for(var n in t)e[n]=t[n];return e}function le(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ie(e,t,n){var i,r,s,c={};for(s in t)s=="key"?i=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?qt.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return Bt(e,c,i,r,null)}function Bt(e,t,n,i,r){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ge,__i:-1,__u:0};return r==null&&Z.vnode!=null&&Z.vnode(s),s}function xt(e){return e.children}function At(e,t){this.props=e,this.context=t}function Dt(e,t){if(t==null)return e.__?Dt(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Dt(e):null}function Qe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Qe(e)}}function be(e){(!e.__d&&(e.__d=!0)&&Wt.push(e)&&!Ot.__r++||ye!=Z.debounceRendering)&&((ye=Z.debounceRendering)||qe)(Ot)}function Ot(){for(var e,t,n,i,r,s,c,u=1;Wt.length;)Wt.length>u&&Wt.sort(Ke),e=Wt.shift(),u=Wt.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Pt({},i)).__v=i.__v+1,Z.vnode&&Z.vnode(n),ce(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,s,r??Dt(i),!!(32&i.__u),c),n.__v=i.__v,n.__.__k[n.__i]=n,nn(s,n,c),i.__e=i.__=null,n.__e!=r&&Qe(n)));Ot.__r=0}function tn(e,t,n,i,r,s,c,u,f,d,g){var l,x,p,_,y,b,C,$=i&&i.__k||Je,O=t.length;for(f=kn(n,t,$,f,O),l=0;l<O;l++)(p=n.__k[l])!=null&&(x=p.__i==-1?zt:$[p.__i]||zt,p.__i=l,b=ce(e,p,x,r,s,c,u,f,d,g),_=p.__e,p.ref&&x.ref!=p.ref&&(x.ref&&ue(x.ref,null,p),g.push(p.ref,p.__c||_,p)),y==null&&_!=null&&(y=_),(C=!!(4&p.__u))||x.__k===p.__k?f=en(p,f,e,C):typeof p.type=="function"&&b!==void 0?f=b:_&&(f=_.nextSibling),p.__u&=-7);return n.__e=y,f}function kn(e,t,n,i,r){var s,c,u,f,d,g=n.length,l=g,x=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?c=e.__k[s]=Bt(null,c,null,null,null):Nt(c)?c=e.__k[s]=Bt(xt,{children:c},null,null,null):c.constructor==null&&c.__b>0?c=e.__k[s]=Bt(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):e.__k[s]=c,f=s+x,c.__=e,c.__b=e.__b+1,u=null,(d=c.__i=Sn(c,n,f,l))!=-1&&(l--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(r>g?x--:r<g&&x++),typeof c.type!="function"&&(c.__u|=4)):d!=f&&(d==f-1?x--:d==f+1?x++:(d>f?x--:x++,c.__u|=4))):e.__k[s]=null;if(l)for(s=0;s<g;s++)(u=n[s])!=null&&(2&u.__u)==0&&(u.__e==i&&(i=Dt(u)),on(u,u));return i}function en(e,t,n,i){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=en(r[s],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=Dt(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function jt(e,t){return t=t||[],e==null||typeof e=="boolean"||(Nt(e)?e.some(function(n){jt(n,t)}):t.push(e)),t}function Sn(e,t,n,i){var r,s,c,u=e.key,f=e.type,d=t[n],g=d!=null&&(2&d.__u)==0;if(d===null&&u==null||g&&u==d.key&&f==d.type)return n;if(i>(g?1:0)){for(r=n-1,s=n+1;r>=0||s<t.length;)if((d=t[c=r>=0?r--:s++])!=null&&(2&d.__u)==0&&u==d.key&&f==d.type)return c}return-1}function ve(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||wn.test(t)?n:n+"px"}function Vt(e,t,n,i,r){var s,c;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ve(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||ve(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Ze,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=ae,e.addEventListener(t,s?ne:ee,s)):e.removeEventListener(t,s?ne:ee,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function we(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ae++;else if(t.t<n.u)return;return n(Z.event?Z.event(t):t)}}}function ce(e,t,n,i,r,s,c,u,f,d){var g,l,x,p,_,y,b,C,$,O,N,J,V,B,A,h,S,v=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),s=[u=t.__e=n.__e]),(g=Z.__b)&&g(t);t:if(typeof v=="function")try{if(C=t.props,$="prototype"in v&&v.prototype.render,O=(g=v.contextType)&&i[g.__c],N=g?O?O.props.value:g.__:i,n.__c?b=(l=t.__c=n.__c).__=l.__E:($?t.__c=l=new v(C,N):(t.__c=l=new At(C,N),l.constructor=v,l.render=Tn),O&&O.sub(l),l.state||(l.state={}),l.__n=i,x=l.__d=!0,l.__h=[],l._sb=[]),$&&l.__s==null&&(l.__s=l.state),$&&v.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Pt({},l.__s)),Pt(l.__s,v.getDerivedStateFromProps(C,l.__s))),p=l.props,_=l.state,l.__v=t,x)$&&v.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),$&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if($&&v.getDerivedStateFromProps==null&&C!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(C,N),t.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(C,l.__s,N)===!1){for(t.__v!=n.__v&&(l.props=C,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(m){m&&(m.__=t)}),J=0;J<l._sb.length;J++)l.__h.push(l._sb[J]);l._sb=[],l.__h.length&&c.push(l);break t}l.componentWillUpdate!=null&&l.componentWillUpdate(C,l.__s,N),$&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,_,y)})}if(l.context=N,l.props=C,l.__P=e,l.__e=!1,V=Z.__r,B=0,$){for(l.state=l.__s,l.__d=!1,V&&V(t),g=l.render(l.props,l.state,l.context),A=0;A<l._sb.length;A++)l.__h.push(l._sb[A]);l._sb=[]}else do l.__d=!1,V&&V(t),g=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++B<25);l.state=l.__s,l.getChildContext!=null&&(i=Pt(Pt({},i),l.getChildContext())),$&&!x&&l.getSnapshotBeforeUpdate!=null&&(y=l.getSnapshotBeforeUpdate(p,_)),h=g,g!=null&&g.type===xt&&g.key==null&&(h=rn(g.props.children)),u=tn(e,Nt(h)?h:[h],t,n,i,r,s,c,u,f,d),l.base=t.__e,t.__u&=-161,l.__h.length&&c.push(l),b&&(l.__E=l.__=null)}catch(m){if(t.__v=null,f||s!=null)if(m.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;s[s.indexOf(u)]=null,t.__e=u}else{for(S=s.length;S--;)le(s[S]);re(t)}else t.__e=n.__e,t.__k=n.__k,m.then||re(t);Z.__e(m,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=Mn(n.__e,t,n,i,r,s,c,f,d);return(g=Z.diffed)&&g(t),128&t.__u?void 0:u}function re(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(re)}function nn(e,t,n){for(var i=0;i<n.length;i++)ue(n[i],n[++i],n[++i]);Z.__c&&Z.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Z.__e(s,r.__v)}})}function rn(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Nt(e)?e.map(rn):Pt({},e)}function Mn(e,t,n,i,r,s,c,u,f){var d,g,l,x,p,_,y,b=n.props||zt,C=t.props,$=t.type;if($=="svg"?r="http://www.w3.org/2000/svg":$=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((p=s[d])&&"setAttribute"in p==!!$&&($?p.localName==$:p.nodeType==3)){e=p,s[d]=null;break}}if(e==null){if($==null)return document.createTextNode(C);e=document.createElementNS(r,$,C.is&&C),u&&(Z.__m&&Z.__m(t,s),u=!1),s=null}if($==null)b===C||u&&e.data==C||(e.data=C);else{if(s=s&&qt.call(e.childNodes),!u&&s!=null)for(b={},d=0;d<e.attributes.length;d++)b[(p=e.attributes[d]).name]=p.value;for(d in b)if(p=b[d],d!="children"){if(d=="dangerouslySetInnerHTML")l=p;else if(!(d in C)){if(d=="value"&&"defaultValue"in C||d=="checked"&&"defaultChecked"in C)continue;Vt(e,d,null,p,r)}}for(d in C)p=C[d],d=="children"?x=p:d=="dangerouslySetInnerHTML"?g=p:d=="value"?_=p:d=="checked"?y=p:u&&typeof p!="function"||b[d]===p||Vt(e,d,p,b[d],r);if(g)u||l&&(g.__html==l.__html||g.__html==e.innerHTML)||(e.innerHTML=g.__html),t.__k=[];else if(l&&(e.innerHTML=""),tn(t.type=="template"?e.content:e,Nt(x)?x:[x],t,n,i,$=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Dt(n,0),u,f),s!=null)for(d=s.length;d--;)le(s[d]);u||(d="value",$=="progress"&&_==null?e.removeAttribute("value"):_!=null&&(_!==e[d]||$=="progress"&&!_||$=="option"&&_!=b[d])&&Vt(e,d,_,b[d],r),d="checked",y!=null&&y!=e[d]&&Vt(e,d,y,b[d],r))}return e}function ue(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Z.__e(r,n)}}function on(e,t,n){var i,r;if(Z.unmount&&Z.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||ue(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Z.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&on(i[r],t,n||typeof e.type!="function");n||le(e.__e),e.__c=e.__=e.__e=void 0}function Tn(e,t,n){return this.constructor(e,n)}function Cn(e,t,n){var i,r,s,c;t==document&&(t=document.documentElement),Z.__&&Z.__(e,t),r=(i=!1)?null:t.__k,s=[],c=[],ce(t,e=t.__k=ie(xt,null,[e]),r||zt,zt,t.namespaceURI,r?null:t.firstChild?qt.call(t.childNodes):null,s,r?r.__e:t.firstChild,i,c),nn(s,e,c)}qt=Je.slice,Z={__e:function(e,t,n,i){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),c=r.__d),c)return r.__E=r}catch(u){e=u}throw e}},Ge=0,At.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pt({},this.state),typeof e=="function"&&(e=e(Pt({},n),this.props)),e&&Pt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),be(this))},At.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),be(this))},At.prototype.render=xt,Wt=[],qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ke=function(e,t){return e.__v.__b-t.__v.__b},Ot.__r=0,Ze=/(PointerCapture)$|Capture$/i,ae=0,ee=we(!1),ne=we(!0);var Pn=0;function a(e,t,n,i,r,s){t||(t={});var c,u,f=t;if("ref"in f)for(u in f={},t)u=="ref"?c=t[u]:f[u]=t[u];var d={type:e,props:f,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Pn,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(u in c)f[u]===void 0&&(f[u]=c[u]);return Z.vnode&&Z.vnode(d),d}var It,ut,Zt,ke,Ut=0,sn=[],pt=Z,Se=pt.__b,Me=pt.__r,Te=pt.diffed,Ce=pt.__c,Pe=pt.unmount,Ae=pt.__;function he(e,t){pt.__h&&pt.__h(ut,e,Ut||t),Ut=0;var n=ut.__H||(ut.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ot(e){return Ut=1,An(ln,e)}function An(e,t,n){var i=he(It++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):ln(void 0,t),function(u){var f=i.__N?i.__N[0]:i.__[0],d=i.t(f,u);f!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=ut,!ut.__f)){var r=function(u,f,d){if(!i.__c.__H)return!0;var g=i.__c.__H.__.filter(function(x){return!!x.__c});if(g.every(function(x){return!x.__N}))return!s||s.call(this,u,f,d);var l=i.__c.props!==u;return g.forEach(function(x){if(x.__N){var p=x.__[0];x.__=x.__N,x.__N=void 0,p!==x.__[0]&&(l=!0)}}),s&&s.call(this,u,f,d)||l};ut.__f=!0;var s=ut.shouldComponentUpdate,c=ut.componentWillUpdate;ut.componentWillUpdate=function(u,f,d){if(this.__e){var g=s;s=void 0,r(u,f,d),s=g}c&&c.call(this,u,f,d)},ut.shouldComponentUpdate=r}return i.__N||i.__}function Tt(e,t){var n=he(It++,3);!pt.__s&&an(n.__H,t)&&(n.__=e,n.u=t,ut.__H.__h.push(n))}function bt(e){return Ut=5,Ln(function(){return{current:e}},[])}function Ln(e,t){var n=he(It++,7);return an(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Wn(){for(var e;e=sn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ft),e.__H.__h.forEach(oe),e.__H.__h=[]}catch(t){e.__H.__h=[],pt.__e(t,e.__v)}}pt.__b=function(e){ut=null,Se&&Se(e)},pt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ae&&Ae(e,t)},pt.__r=function(e){Me&&Me(e),It=0;var t=(ut=e.__c).__H;t&&(Zt===ut?(t.__h=[],ut.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Ft),t.__h.forEach(oe),t.__h=[],It=0)),Zt=ut},pt.diffed=function(e){Te&&Te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(sn.push(t)!==1&&ke===pt.requestAnimationFrame||((ke=pt.requestAnimationFrame)||Rn)(Wn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Zt=ut=null},pt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ft),n.__h=n.__h.filter(function(i){return!i.__||oe(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],pt.__e(i,n.__v)}}),Ce&&Ce(e,t)},pt.unmount=function(e){Pe&&Pe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Ft(i)}catch(r){t=r}}),n.__H=void 0,t&&pt.__e(t,n.__v))};var Le=typeof requestAnimationFrame=="function";function Rn(e){var t,n=function(){clearTimeout(i),Le&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Le&&(t=requestAnimationFrame(n))}function Ft(e){var t=ut,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ut=t}function oe(e){var t=ut;e.__c=e.__(),ut=t}function an(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function ln(e,t){return typeof t=="function"?t(e):t}function $n(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}class Dn{constructor(t){this.model=t}async trainAsync(t,n,i){if(!Array.isArray(n)){const p=arguments[1],_=arguments[2],y=arguments[3];let b=p.min,C=_.min,$=1/0,O=[];const N=20;let J=0;for(let V=p.min;V<=p.max;V+=p.step)for(let B=_.min;B<=_.max;B+=_.step){const A=parseFloat(V.toFixed(2)),h=parseFloat(B.toFixed(2));this.model.setWeight(A),this.model.setBias(h);let S=0,v=0;for(const E of t){const U=this.model.predict(E.input),T=E.target-U;S+=T*T,v+=Math.abs(T)}const m=S/t.length,P=v/t.length;let F=0;for(const E of t)(this.model.predict(E.input)>=.5?1:0)===E.target&&F++;const M=F/t.length;m<$&&($=m,b=A,C=h);const I={weight:A,bias:h,error:m,mae:P,accuracy:M};O.push(I),J++,J%N===0&&(y&&y(O,{bestWeight:b,bestBias:C,minError:$}),O=[],await new Promise(E=>setTimeout(E,0)))}return O.length>0&&y&&y(O,{bestWeight:b,bestBias:C,minError:$}),{bestWeight:b,bestBias:C,minError:$}}let s=1/0,c={},u=0;const f=50;let d=[];const g=p=>{const _=[];if(p.step<=0)return[p.min];for(let y=p.min;y<=p.max+1e-4;y+=p.step)_.push(parseFloat(y.toFixed(2)));return _},l=n.map(g),x=async(p,_)=>{if(p===n.length){const b=[];let C=0;_.forEach((S,v)=>{n[v].name.toLowerCase().includes("bias")?C=S:b.push(S)});let $={};this.model.setParams?(_.forEach((S,v)=>{$[n[v].name]=S}),this.model.setParams($),C===void 0&&(C=0)):(this.model.setWeights?this.model.setWeights(b):this.model.setWeight&&this.model.setWeight(b[0]),this.model.setBias(C),$={weights:[...b],bias:C});let O=0,N=0;for(const S of t){const v=this.model.predict(S.input),m=S.target-v;O+=m*m,N+=Math.abs(m)}const J=O/t.length,V=N/t.length;let B=0;for(const S of t)(this.model.predict(S.input)>=.5?1:0)===S.target&&B++;const A=B/t.length;J<s&&(s=J,c=$);const h={params:[..._],error:J,mae:V,accuracy:A};d.push(h),u++,u%f===0&&(i&&i(d,{bestParams:c,minError:s}),d=[],await new Promise(S=>setTimeout(S,0)));return}const y=l[p];for(const b of y)_[p]=b,await x(p+1,_)};return await x(0,new Array(n.length)),d.length>0&&i&&i(d,{bestParams:c,minError:s}),{bestParams:c,minError:s}}async trainRandomAsync(t,n,i,r={}){const{patience:s=5e3,seed:c,maxSteps:u=1e4,initialRadius:f=.8,phase1Ratio:d=.8}=r,g=u,l=f,x=.999,p=d;let _=1/0,y={},b=c;b==null?(b=Math.floor(Math.random()*2147483647),console.log(`[AdaptiveRandom] Generated Seed: ${b}`)):console.log(`[AdaptiveRandom] Using Seed: ${b}`);const C=$n(b);let $=n.map(v=>({min:v.min,max:v.max,span:v.max-v.min})),O=$.map(v=>v.min+C()*v.span);const N=v=>{const m=[];let P=0;v.forEach((T,k)=>{n[k].name.toLowerCase().includes("bias")?P=T:m.push(T)});let F={};this.model.setParams?(v.forEach((T,k)=>{F[n[k].name]=T}),this.model.setParams(F)):(this.model.setWeights?this.model.setWeights(m):this.model.setWeight&&this.model.setWeight(m[0]),this.model.setBias(P),F={weights:m,bias:P});let M=0,I=0;for(const T of t){const k=this.model.predict(T.input),w=T.target-k;M+=w*w,I+=Math.abs(w)}let E=0;for(const T of t)(this.model.predict(T.input)>=.5?1:0)===T.target&&E++;const U=E/t.length;return{mse:M/t.length,mae:I/t.length,accuracy:U,decodedParams:F,weights:m,bias:P}};let J=N(O);_=J.mse,y=J.decodedParams?{...J.decodedParams,_array:[...O]}:{weights:J.weights,bias:J.bias,_array:[...O]},i&&i([{params:[...O],error:_,mae:J.mae,accuracy:J.accuracy}],{bestParams:y,minError:_}),await new Promise(v=>setTimeout(v,0));let V=[];const B=10;let A=_,h=[...O],S=0;for(let v=0;v<g;v++){const m=v<g*p;let P;if(m){const k=v/(g*p);P=l*(1-k*.5)}else P=l*.5*Math.pow(x,v-g*p);let F=!1;const M=[...h];let I=!1;for(;!I;)M.forEach((k,w)=>{if(C()<.4)return;I=!0;const o=$[w];let D=!1;if(m){const gt=o.span*.3,et=y._array&&Math.abs(k-y._array[w])<1e-9;et&&k<o.min+gt&&(o.min-=o.span*.4,o.span=o.max-o.min,D=!0),et&&k>o.max-gt&&(o.max+=o.span*.4,o.span=o.max-o.min,D=!0),D&&(F=!0)}let X=o.span*P;D&&(X=Math.max(X,o.span*.25));const K=X;let tt=k+(C()-.5)*2*K;tt<o.min&&(tt=o.min),tt>o.max&&(tt=o.max),M[w]=tt});const E=N(M),U=E.mse-A;let T=!1;if(U<0&&(T=!0),T&&(h=M,A=E.mse),E.mse<_?(_=E.mse,y=E.decodedParams?{...E.decodedParams,_array:[...M]}:{weights:E.weights,bias:E.bias,_array:[...M]},S=0):S++,S>=s&&!m)break;if(V.push({params:[...M],error:E.mse,mae:E.mae,accuracy:E.accuracy}),V.length>=B){let k;F&&(k="Grenzen dynamisch erweitert..."),i&&i(V,{bestParams:y,minError:_,message:k}),V=[],await new Promise(w=>setTimeout(w,0))}}return V.length>0&&i&&i(V,{bestParams:y,minError:_}),{bestParams:y,minError:_}}}class En{constructor(t=30,n=50){this.velocity=t,this.initialPosition=n}getPosition(t){return this.velocity*t+this.initialPosition}}class zn{constructor(){this.weight=0,this.bias=0}predict(t){return this.weight*t+this.bias}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function In({time:e,groundTruth:t,neuralNet:n,maxDistance:i=300}){const r=bt(null);Tt(()=>{const c=r.current;if(!c)return;const u=c.getContext("2d"),f=c.width,d=c.height,g=50,l=f-2*g;u.clearRect(0,0,f,d);const x=t.getPosition(e),p=n.predict(e),_=g+x%i/i*l,y=g+p%i/i*l;u.fillStyle="#f0f0f0",u.fillRect(0,0,f,d/2),u.fillStyle="#e0e0e0",u.fillRect(0,d/2,f,d/2),u.beginPath(),u.strokeStyle="#fff",u.setLineDash([20,20]),u.moveTo(0,d/4),u.lineTo(f,d/4),u.moveTo(0,d*3/4),u.lineTo(f,d*3/4),u.stroke(),u.beginPath(),u.strokeStyle="#ccc",u.setLineDash([]),u.moveTo(g,0),u.lineTo(g,d),u.moveTo(f-g,0),u.lineTo(f-g,d),u.stroke(),s(u,_,d/4,"#2ecc71","Ground Truth"),s(u,y,d*3/4,"#e74c3c","Neural Net"),u.fillStyle="#333",u.font="14px monospace",u.fillText(`Zeit: ${e.toFixed(1)}s`,10,20),u.fillText(`Pos GT: ${x.toFixed(1)}m`,10,40),u.fillText(`Pos NN: ${p.toFixed(1)}m`,10,d/2+40)},[e,t,n,i]);function s(c,u,f,d,g){c.save(),c.translate(u,f),c.fillStyle=d,c.fillRect(-20,-10,40,20),c.fillStyle="#000",c.fillRect(-15,-15,10,5),c.fillRect(5,-15,10,5),c.fillRect(-15,10,10,5),c.fillRect(5,10,10,5),c.fillStyle="#000",c.font="10px sans-serif",c.textAlign="center",c.fillText(g,0,-20),c.restore()}return a("div",{style:{border:"2px solid #333",borderRadius:"8px",overflow:"hidden"},children:a("canvas",{ref:r,width:800,height:300,style:{width:"100%",display:"block"}})})}const We={id:"linear_regression",title:"Phase 1: Linear Regression",description:"A simple neuron learns the relationship between time and position. This corresponds to a linear regression.",Model:zn,GroundTruth:En,CanvasComponent:In,defaultParams:{weight:0,bias:0},groundTruthDefaults:[30,50],getInput:e=>e,generateData:e=>Array.from({length:20},(n,i)=>i*.5).map(n=>({input:n,target:e.getPosition(n)})),trainingConfig:{maxSteps:2e3,showAccuracyPlot:!1,params:[{name:"weight",min:0,max:60,step:1},{name:"bias",min:0,max:100,step:2}]},networkViz:{formula:"pos = w * t + b",inputLabel:"Zeit (t)",outputLabel:"Pos (m)",biasLabel:"b"}};class Nn{constructor(t=.5,n=-5){this.weight=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){const n=this.sigmoid(this.weight*t+this.bias);return Math.random()<n?1:0}getProbability(t){return this.sigmoid(this.weight*t+this.bias)}}class Yn{constructor(){this.weight=0,this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=this.weight*t+this.bias;return this.sigmoid(n)}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function Xt(e,t,n=10){if(e===t)return[e];const i=Re(t-e,!1),r=Re(i/(n-1),!0),s=Math.floor(e/r)*r,c=Math.ceil(t/r)*r,u=[],f=r/1e3;for(let d=s;d<c+r/2;d+=r)d>=e-f&&d<=t+f&&u.push(Number(d.toPrecision(12)));return u}function Re(e,t){const n=Math.floor(Math.log10(e)),i=e/Math.pow(10,n);let r;return t?i<1.5?r=1:i<3?r=2:i<7?r=5:r=10:i<=1?r=1:i<=2?r=2:i<=5?r=5:r=10,r*Math.pow(10,n)}function Vn({time:e,groundTruth:t,neuralNet:n,data:i,staticMode:r=!1,showModel:s=!0,showGroundTruth:c=!0,showProbabilities:u=!1}){const f=bt(null),[d,g]=ot({k:1,x:0,y:0}),[l,x]=ot(!1),p=bt({x:0,y:0}),[_,y]=ot(null),b=bt([]),C=A=>{A.preventDefault();const S=-A.deltaY*.001,v=d.k;let m=v*(1+S);m=Math.max(.5,Math.min(m,10));const P=f.current.getBoundingClientRect(),F=f.current.width/P.width,M=f.current.height/P.height,I=(A.clientX-P.left)*F,E=(A.clientY-P.top)*M,U=40,T=(I-U-d.x)/v,k=(E-(300-U)-d.y)/v,w=I-U-T*m,o=E-(300-U)-k*m;g({k:m,x:w,y:o})},$=A=>{x(!0),p.current={x:A.clientX,y:A.clientY}},O=A=>{const h=f.current;if(!h)return;const S=h.getBoundingClientRect(),v=h.width/S.width,m=h.height/S.height;if(l){const P=(A.clientX-p.current.x)*v,F=(A.clientY-p.current.y)*m;p.current={x:A.clientX,y:A.clientY},g(M=>({...M,x:M.x+P,y:M.y+F})),y(null)}else{const P=(A.clientX-S.left)*v,F=(A.clientY-S.top)*m;let M=null,I=15;const E=b.current;for(let U=E.length-1;U>=0;U--){const T=E[U],k=Math.sqrt(Math.pow(T.x-P,2)+Math.pow(T.y-F,2));k<I&&(I=k,M=T.info)}y(M)}},N=()=>x(!1),J=()=>{x(!1),y(null)},V=bt(0),B=()=>{const A=Date.now();A-V.current<300&&y(null),V.current=A};return Tt(()=>{const A=f.current;if(!A)return;const h=A.getContext("2d"),S=A.width,v=A.height;h.clearRect(0,0,S,v),b.current=[];const m=40,P=S-2*m,F=v-2*m,M=0,I=20,E=1,U=Y=>m+Y/I*P*d.k+d.x,T=Y=>v-m-Y/E*F*d.k+d.y,k=Y=>(Y-m-d.x)/(P*d.k)*I,w=Y=>-((Y-(v-m)-d.y)/(F*d.k))*E,o=k(m),D=k(S-m),X=w(v-m),K=w(m),tt=Xt(o,D,10),gt=Xt(X,K,5);if(h.beginPath(),h.strokeStyle="#eee",h.lineWidth=1,h.fillStyle="#333",h.textAlign="center",h.textBaseline="top",h.font="10px sans-serif",tt.forEach(Y=>{const R=U(Y);R<m||R>S-m||(h.moveTo(R,m),h.lineTo(R,v-m),h.fillText(Number(Y.toFixed(2)),R,v-m+5))}),h.textAlign="right",h.textBaseline="middle",gt.forEach(Y=>{const R=T(Y);R<m||R>v-m||(h.moveTo(m,R),h.lineTo(S-m,R),h.fillText(Number(Y.toFixed(2)),m-5,R))}),h.stroke(),h.beginPath(),h.strokeStyle="#333",h.lineWidth=1,h.rect(m,m,P,F),h.stroke(),h.fillStyle="#333",h.textAlign="center",h.textBaseline="alphabetic",h.fillText("Number of 'Spam' Words",S/2,v-10),h.save(),h.translate(15,v/2),h.rotate(-Math.PI/2),h.textAlign="center",h.fillText("Spam Probability",0,0),h.restore(),h.save(),h.beginPath(),h.rect(m,m,P,F),h.clip(),s&&n&&((Y,R,Q=[])=>{h.beginPath(),h.strokeStyle=R,h.setLineDash(Q),h.lineWidth=2;const W=Math.max(M,o),L=Math.min(I,D);if(L<W)return;const z=(L-W)/100,G=Math.max(z,.05);let j=!1;for(let it=W;it<=L+G;it+=G){const _t=Math.min(Math.max(it,M),I);let ct=0;typeof Y.getProbability=="function"?ct=Y.getProbability(_t):typeof Y.predict=="function"&&(ct=Y.predict(_t));const ht=U(_t),lt=T(ct);j?h.lineTo(ht,lt):(h.moveTo(ht,lt),j=!0)}h.stroke(),h.setLineDash([])})(n,"#e74c3c"),r&&i)i.forEach(Y=>{if(Y.input<o-5||Y.input>D+5)return;const R=0,Q=0,W=U(Y.input),L=T(Y.target);b.current.push({x:W,y:L,info:{x:W,y:L,input:Y.input,target:Y.target,type:"Ground Truth"}});let z=null;if(n&&s)try{z=n.predict(Y.input)>.5?"#e74c3c":"#2ecc71"}catch{}if(u&&n&&typeof n.predict=="function")try{const G=n.predict(Y.input),j=T(G);s&&(h.beginPath(),h.moveTo(W,L),h.lineTo(W,j),h.setLineDash([2,4]),h.strokeStyle="rgba(0,0,0,0.15)",h.lineWidth=1,h.stroke(),h.setLineDash([]));let it=null;n&&s&&(it=n.predict(Y.input)>.5?"#e74c3c":"#2ecc71"),it&&(h.beginPath(),h.arc(W,j,6,0,Math.PI*2),h.strokeStyle=it,h.lineWidth=2,h.stroke()),b.current.push({x:W,y:j,info:{x:W,y:j,input:Y.input,target:Y.target,prediction:G,type:"Prediction"}})}catch{}else z&&(h.beginPath(),h.arc(W+R,L+Q,8,0,Math.PI*2),h.strokeStyle=z,h.lineWidth=2,h.stroke());h.beginPath(),h.arc(W+R,L+Q,5,0,Math.PI*2),h.fillStyle=Y.target===1?"#e74c3c":"#2ecc71",h.fill(),h.strokeStyle="#fff",h.lineWidth=1,h.stroke()});else if(!r){const R=Math.floor(e*2),Q=50,W=z=>{const G=Math.sin(z*123.456)*1e4;return G-Math.floor(G)},L=Math.min(R,Q);for(let z=0;z<L;z++){const G=W(z+1),j=Math.floor(G*21),it=t?t.getProbability(j):0,_t=W(z+999)<it?1:0;if(j<o-5||j>D+5)continue;const ct=U(j),ht=T(_t);let lt=null;if(n&&s)try{lt=n.predict(j)>.5?"#e74c3c":"#2ecc71"}catch{}if(u&&n&&typeof n.predict=="function")try{const dt=n.predict(j),H=T(dt);s&&(h.beginPath(),h.moveTo(ct,ht),h.lineTo(ct,H),h.setLineDash([2,4]),h.strokeStyle="rgba(0,0,0,0.35)",h.lineWidth=1,h.stroke(),h.setLineDash([]));let mt=null;n&&s&&(mt=n.predict(j)>.5?"#e74c3c":"#2ecc71"),mt&&(h.beginPath(),h.arc(ct,H,6,0,Math.PI*2),h.strokeStyle=mt,h.lineWidth=2,h.stroke())}catch{}else lt&&(h.beginPath(),h.arc(finalX,finalY,8,0,Math.PI*2),h.strokeStyle=lt,h.lineWidth=2,h.stroke());h.beginPath(),h.arc(finalX,finalY,5,0,Math.PI*2),h.fillStyle=_t?"#e74c3c":"#2ecc71",h.fill(),h.strokeStyle="#fff",h.lineWidth=1,h.stroke()}if(L>0&&L<=Q){const z=L-1,G=W(z+1),j=Math.floor(G*21),it=t.getProbability(j),_t=W(z+999)<it?1:0,ct=0,ht=0,lt=U(j)+ct,dt=T(_t)+ht;lt>m&&lt<S-m&&dt>m&&dt<v-m&&(h.beginPath(),h.arc(lt,dt,8,0,Math.PI*2),h.strokeStyle="#333",h.stroke(),h.fillStyle="#333",h.font="10px sans-serif",h.fillText(`${j}`,lt,dt-12))}}if(h.restore(),_){h.save(),h.fillStyle="rgba(0,0,0,0.8)",h.strokeStyle="#fff";const Y=_.target===1?"SPAM":"HAM",R=`Words: ${_.input}`,Q=_.type?`(${_.type})`:"",W=120,L=_.type?55:40;let z=_.x+10,G=_.y-10;z+W>S&&(z=_.x-W-10),G+L>v&&(G=_.y-L-10),G<0&&(G=_.y+10),h.beginPath(),h.roundRect(z,G,W,L,4),h.fill(),h.lineWidth=1,h.stroke(),h.textBaseline="top",h.textAlign="left",h.font="bold 11px sans-serif",h.fillStyle=_.target===1?"#e74c3c":"#2ecc71",h.fillText(`${Y} ${Q}`,z+8,G+6),h.fillStyle="#ddd",h.font="10px sans-serif",h.fillText(R,z+8,G+20),_.prediction!==void 0&&h.fillText(`Pred: ${_.prediction.toFixed(2)}`,z+8,G+32),h.restore()}},[e,t,n,i,r,s,c,u,d,_]),a("div",{className:"canvas-container",children:a("canvas",{ref:f,width:600,height:300,style:{width:"100%",border:"1px solid #ccc",background:"#fff",cursor:_?"pointer":l?"grabbing":"grab"},onWheel:C,onMouseDown:$,onMouseMove:O,onMouseUp:N,onMouseLeave:J,onClick:B})})}const Et=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},$e={id:"logistic_regression",title:"Phase 2: Logistic Regression",description:'Classification of emails as "Spam" or "Not Spam" based on word count. This is a logistic regression.',Model:Yn,GroundTruth:Nn,CanvasComponent:Vn,defaultParams:{weight:0,bias:0},groundTruthDefaults:[.5,-5],getInput:e=>{const t=Math.floor(e);return Math.floor(Et(t)*20)},generateData:e=>{const t=new Set(["FREE","WIN","PRIZE","CLAIM","URGENT","OFFER","BONUS","CLICK","LINK","NOW","LIMITED","DISCOUNT","VERIFY","ACCOUNT","PAYMENT","SUSPENDED","APPROVED","CASH","REWARD","SECURITY","ALERT","ACT","TODAY"]),n=p=>{const _=String(p||"").match(/[A-Z0-9]+/g)||[];let y=0;for(const b of _)t.has(b)&&y++;return y},i=(p,_)=>({input:n(p),target:_,text:p}),r=Array.from(t),s=(p,_)=>{const y=[...r];for(let b=y.length-1;b>0;b--){const C=Math.floor(Et(_+b*97)*(b+1));[y[b],y[C]]=[y[C],y[b]]}return y.slice(0,p)},c=["Project update","Quick question","Invoice follow up","Meeting schedule","Account notice","Delivery status","Action required","Weekly summary"],u=["Hi, just following up. Could you take a look when you have a moment?","Hello, sharing the details below. Thanks for your time.","Hey, can you confirm receipt and let me know if anything is missing?","Hi, please review and reply when convenient. Appreciate it.","Hello, sending this over for your review. Thanks."],f=(p,_)=>{const y=c[Math.floor(Et(_+11)*c.length)],b=u[Math.floor(Et(_+29)*u.length)],C=s(p,_+101),$=C.length?` ${C.join(" ")}`:"";return`Subject: ${y}${$}
${b}`},d=[];for(let p=0;p<=20;p++)d.push(p,p);for(let p=0;p<8;p++)d.push(p);const g=d.map((p,_)=>{const y=p*1e3+_,b=f(p,y),C=e?.getProbability?e.getProbability(p):0,$=Et(y+999);return{x:p,idx:_,text:b,score:C-$}}),l=new Set([...g].sort((p,_)=>_.score-p.score).slice(0,25).map(p=>p.idx));return g.map(p=>i(p.text,l.has(p.idx)?1:0)).sort((p,_)=>p.input-_.input)},trainingConfig:{maxSteps:3e3,params:[{name:"weight",min:0,max:2,step:.1},{name:"bias",min:-10,max:5,step:.5}]},networkViz:{formula:"p = σ(w * x + b)",inputLabel:"Wörter (x)",outputLabel:"Spam (p)",biasLabel:"b"},isFinished:e=>e>=25};class de{constructor(t=[.5,.2,.8,-.1],n=-3){this.weights=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){let n=this.bias;for(let r=0;r<this.weights.length;r++)n+=this.weights[r]*t[r];const i=this.sigmoid(n);return Math.random()<i?1:0}getProbability(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}}class cn{constructor(t=4){this.weights=new Array(t).fill(0),this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}setWeights(t){this.weights=[...t]}setBias(t){this.bias=t}setWeightAt(t,n){t>=0&&t<this.weights.length&&(this.weights[t]=n)}}const Hn=[{label:"Spam Words",idx:0,max:15},{label:"Capitals",idx:1,max:25},{label:"Links",idx:2,max:8},{label:"Total Words",idx:3,max:100}];function fe({data:e,currentInput:t,currentPrediction:n,neuralNet:i,allowedModes:r=["features","scatter","3d","text"],hideControls:s=!1,showModel:c=!0,additionalControls:u=null,features:f=Hn}){const d=bt(null),[g,l]=ot(r[0]);Tt(()=>{r.includes(g)||l(r[0])},[r]);const[x,p]=ot(0),[_,y]=ot(f.length===2?1:3),[b,C]=ot(2),[$,O]=ot(!1),[N,J]=ot({x:-.5,y:.5}),[V,B]=ot({k:1,x:0,y:0}),A=bt(!1),h=bt({x:0,y:0}),[S,v]=ot(null),m=bt([]),P=w=>{if(g!=="scatter")return;w.preventDefault();const D=-w.deltaY*.001,X=V.k;let K=X*(1+D);K=Math.max(.5,Math.min(K,50));const tt=d.current;if(!tt)return;const gt=tt.getBoundingClientRect(),et=tt.width/gt.width,Y=tt.height/gt.height,R=(w.clientX-gt.left)*et,Q=(w.clientY-gt.top)*Y,W=50,L=tt.height-W,z=(R-W-V.x)/X,G=(L+V.y-Q)/X,j=R-W-z*K,it=Q-L+G*K;B({k:K,x:j,y:it})},F=w=>{g!=="3d"&&g!=="scatter"||(A.current=!0,h.current={x:w.clientX,y:w.clientY})},M=w=>{const o=d.current;if(!o)return;const D=o.getBoundingClientRect(),X=o.width/D.width,K=o.height/D.height;if(A.current){const W=(w.clientX-h.current.x)*X,L=(w.clientY-h.current.y)*K;h.current={x:w.clientX,y:w.clientY},g==="3d"?J(z=>({x:z.x+L*.01,y:z.y+W*.01})):g==="scatter"&&B(z=>({...z,x:z.x+W,y:z.y+L}));return}const tt=(w.clientX-D.left)*X,gt=(w.clientY-D.top)*K;let et=null,R=15;const Q=m.current;for(let W=Q.length-1;W>=0;W--){const L=Q[W],z=Math.sqrt((L.x-tt)**2+(L.y-gt)**2);z<R&&(R=z,et=L.info)}v(et)},I=()=>{A.current=!1},E=()=>{v(null),A.current=!1},U=bt(0),T=()=>{const w=Date.now();w-U.current<300&&v(null),U.current=w};Tt(()=>{const w=d.current;if(!w)return;const o=w.getContext("2d"),D=w.width,X=w.height;o.clearRect(0,0,D,X),o.fillStyle="#fff",o.fillRect(0,0,D,X),m.current=[];const K=et=>{if(!e||e.length===0)return f[et].max;const Y=Math.max(...e.map(R=>R.input[et]));return Y>0?Y:f[et].max},tt=et=>et===2?"#3498db":et===1?"#e74c3c":"#2ecc71",gt=et=>et===3?"CLASS 3":et===1?"SPAM":"HAM";if(g==="3d"){const et=K(x),Y=K(_),R=K(b),Q=D/2,W=X/2,L=150,z=(H,mt,wt)=>{let Mt=H*Math.cos(N.y)-wt*Math.sin(N.y),q=H*Math.sin(N.y)+wt*Math.cos(N.y),nt=mt*Math.cos(N.x)-q*Math.sin(N.x),at=mt*Math.sin(N.x)+q*Math.cos(N.x);const rt=400/(400-at);return{x:Q+Mt*rt,y:W+nt*rt,z:at}},j=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]].map(H=>z(H[0]*L,H[1]*L,H[2]*L)),it="#e29301ff",_t="#2980b9",ct="#c00798ff",ht=(H,mt)=>{o.beginPath(),o.strokeStyle=mt,o.lineWidth=1,H.forEach(([wt,Mt])=>{o.moveTo(j[wt].x,j[wt].y),o.lineTo(j[Mt].x,j[Mt].y)}),o.stroke()};ht([[0,1],[3,2],[4,5],[7,6]],it),ht([[0,3],[1,2],[4,7],[5,6]],_t),ht([[0,4],[1,5],[2,6],[3,7]],ct),o.font="bold 11px sans-serif",o.fillStyle=it,o.fillText("X: "+f[x].label,j[1].x,j[1].y),o.fillStyle=_t,o.fillText("Y: "+f[_].label,j[3].x,j[3].y),o.fillStyle=ct,o.fillText("Z: "+f[b].label,j[4].x,j[4].y);const lt=[],dt=(H,mt)=>H/mt*2-1;if(c&&i&&i.weights){const H=i.weights[x]||0,mt=i.weights[_]||0,wt=i.weights[b]||0,Mt=i.bias||0;if(Math.abs(wt)>.001){o.strokeStyle="rgba(142, 68, 173, 0.3)",o.lineWidth=1;const q=(rt,st)=>{const yt=(rt+1)/2*et,ft=(st+1)/2*Y,kt=(-H*yt-mt*ft-Mt)/wt;return dt(kt,R)},nt=(rt,st)=>{if(Math.abs(rt.z)<=3&&Math.abs(st.z)<=3){const yt=z(rt.x*L,-rt.y*L,rt.z*L),ft=z(st.x*L,-st.y*L,st.z*L);o.beginPath(),o.moveTo(yt.x,yt.y),o.lineTo(ft.x,ft.y),o.stroke()}},at=6;for(let rt=0;rt<=at;rt++){const st=-1+rt/at*2,yt=q(-1,st),ft=q(1,st);nt({x:-1,y:st,z:yt},{x:1,y:st,z:ft})}for(let rt=0;rt<=at;rt++){const st=-1+rt/at*2,yt=q(st,-1),ft=q(st,1);nt({x:st,y:-1,z:yt},{x:st,y:1,z:ft})}}}e&&e.forEach(H=>{const mt=dt(H.input[x],et),wt=-dt(H.input[_],Y),Mt=dt(H.input[b],R),q=z(mt*L,wt*L,Mt*L);let nt=null;if(i&&c)try{nt=i.predict(H.input)>.5?"#e74c3c":"#2ecc71"}catch{}lt.push({...q,color:tt(H.target),radius:3,haloColor:nt,pt:H})}),lt.sort((H,mt)=>H.z-mt.z),lt.forEach(H=>{H.z<3&&m.current.push({x:H.x,y:H.y,info:{x:H.x,y:H.y,text:H.pt.text,target:H.pt.target,isSpam:H.pt.target===1,features:{xLabel:f[x].label,xVal:H.pt.input[x],yLabel:f[_].label,yVal:H.pt.input[_],zLabel:f[b].label,zVal:H.pt.input[b]}}}),H.haloColor&&(o.beginPath(),o.arc(H.x,H.y,H.radius+2,0,Math.PI*2),o.strokeStyle=H.haloColor,o.lineWidth=1.5,o.stroke()),o.beginPath(),o.arc(H.x,H.y,H.radius,0,Math.PI*2),o.fillStyle=H.color,o.fill()})}if(g==="scatter"){const et=K(x),Y=K(_),R=50,Q=D-2*R,W=X-2*R,L=X-R,z="#c0392b",G="#2980b9",j=q=>R+q/et*Q*V.k+V.x,it=q=>L-q/Y*W*V.k+V.y;o.save(),o.beginPath(),o.rect(R,R,Q,W),o.clip(),o.restore();const _t=q=>(q-R-V.x)/(Q*V.k)*et,ct=q=>(L+V.y-q)/(W*V.k)*Y,ht=_t(R),lt=_t(R+Q),dt=ct(L),H=ct(R),mt=Xt(Math.min(ht,lt),Math.max(ht,lt),8),wt=Xt(Math.min(dt,H),Math.max(dt,H),6);if(o.lineWidth=1,o.strokeStyle="#eee",o.fillStyle="#666",o.font="10px sans-serif",o.textAlign="center",o.textBaseline="top",mt.forEach(q=>{const nt=j(q);nt<R||nt>R+Q||(o.beginPath(),o.moveTo(nt,R),o.lineTo(nt,L),o.stroke(),o.fillText(Number(q.toFixed(2)),nt,L+5))}),o.textAlign="right",o.textBaseline="middle",wt.forEach(q=>{const nt=it(q);nt<R||nt>L||(o.beginPath(),o.moveTo(R,nt),o.lineTo(R+Q,nt),o.stroke(),o.fillText(Number(q.toFixed(2)),R-5,nt))}),o.strokeStyle="#ccc",o.lineWidth=2,o.strokeRect(R,R,Q,W),o.textAlign="center",o.font="bold 12px sans-serif",o.fillStyle=z,o.fillText(`${f[x].label}`,R+Q/2,L+30),o.save(),o.translate(15,L-W/2),o.rotate(-Math.PI/2),o.fillStyle=G,o.fillText(`${f[_].label}`,0,0),o.restore(),o.save(),o.beginPath(),o.rect(R,R,Q,W),o.clip(),$&&i&&f.length===2){const nt=Math.floor(ht/.5)*.5,at=Math.ceil(lt/.5)*.5,rt=Math.floor(dt/.5)*.5,st=Math.ceil(H/.5)*.5;if((at-nt)/.5*((st-rt)/.5)<5e4)for(let ft=nt;ft<=at;ft+=.5)for(let kt=rt;kt<=st;kt+=.5)try{const St=[0,0];x<2&&(St[x]=ft),_<2&&(St[_]=kt);const vt=i.predict(St),Lt=j(ft),Yt=it(kt),me=j(ft+.5),xe=it(kt+.5),gn=Math.abs(me-Lt),_n=Math.abs(Yt-xe),mn=Math.min(Lt,me),xn=Math.min(Yt,xe),yn=Math.round(46*(1-vt)+231*vt),bn=Math.round(204*(1-vt)+76*vt),vn=Math.round(113*(1-vt)+60*vt);o.fillStyle=`rgba(${yn}, ${bn}, ${vn}, 0.2)`,o.fillRect(mn,xn,gn+.5,_n+.5)}catch{}}const Mt=(q,nt,at,rt,st)=>{const yt=j(q[x]),ft=it(q[_]);st&&(o.beginPath(),o.arc(yt,ft,at+3,0,2*Math.PI),o.strokeStyle=st,o.lineWidth=2,o.stroke()),o.beginPath(),o.arc(yt,ft,at,0,2*Math.PI),o.fillStyle=nt,o.fill(),rt&&(o.strokeStyle=rt,o.lineWidth=2,o.stroke())};if(e&&e.forEach(q=>{const nt=j(q.input[x]),at=it(q.input[_]);if(nt<R||nt>R+Q||at<R||at>L)return;m.current.push({x:nt,y:at,info:{x:nt,y:at,text:q.text,target:q.target,isSpam:q.target===1,features:{xLabel:f[x].label,xVal:q.input[x],yLabel:f[_].label,yVal:q.input[_]}}});let rt=null;if(i&&c)try{rt=i.predict(q.input)>.5?"#e74c3c":"#2ecc71"}catch{}Mt(q.input,tt(q.target),5,"#fff",rt)}),c&&i){let q=i.weights;const nt=i.bias||0;if(q){const at=q[x]||0,rt=q[_]||0,st=nt;o.beginPath(),o.strokeStyle="rgba(142, 68, 173, 0.8)",o.lineWidth=2,o.setLineDash([10,5]);const yt=ht-(lt-ht),ft=lt+(lt-ht),kt=(St,vt)=>({x:j(St),y:it(vt)});if(Math.abs(rt)>.001){const St=Yt=>(-at*Yt-st)/rt,vt=kt(yt,St(yt)),Lt=kt(ft,St(ft));o.moveTo(vt.x,vt.y),o.lineTo(Lt.x,Lt.y)}else if(Math.abs(at)>.001){const St=-st/at,vt=kt(St,dt-100),Lt=kt(St,H+100);o.moveTo(vt.x,vt.y),o.lineTo(Lt.x,Lt.y)}o.stroke(),o.setLineDash([])}}t&&Mt(t,"#3498db",8,"#2980b9"),o.restore(),o.fillStyle="#666",o.textAlign="right",o.font="11px sans-serif",o.fillText("Red=Spam, Green=OK",D-10,20)}if(g==="text"){if(o.textAlign="center",o.textBaseline="middle",!t||!t.text){o.fillStyle="#999",o.font="20px sans-serif",o.fillText("No text available",D/2,X/2);return}const et=n>.5,Y=et?"#feeff0":"#effaf0";o.fillStyle=Y,o.fillRect(0,0,D,X);const R=t.text;o.fillStyle="#333",o.font="24px serif";const Q=R.split(" ");let W="";const L=35,z=D/2;let G=X/3;const j=D-100;for(let ct=0;ct<Q.length;ct++){const ht=W+Q[ct]+" ";o.measureText(ht).width>j&&ct>0?(o.fillText(W,z,G),W=Q[ct]+" ",G+=L):W=ht}o.fillText(W,z,G),G+=60;const it=t.groundTruth===1;o.font="bold 16px sans-serif",o.fillStyle="#555",o.fillText(`Truth: ${it?"SPAM":"HAM"}`,z,G),G+=30;const _t=(n*100).toFixed(1);o.font="bold 20px sans-serif",o.fillStyle=et?"#c0392b":"#27ae60",o.fillText(`Prediction: ${et?"SPAM":"HAM"} (${_t}%)`,z,G);return}if(g==="features"){const Y=(D-90)/2,R=(X-90)/2;[{x:30,y:30,...f[0]},{x:30+Y+30,y:30,...f[1]},{x:30,y:30+R+30,...f[2]},{x:30+Y+30,y:30+R+30,...f[3]}].forEach(W=>{if(o.strokeStyle="#ccc",o.strokeRect(W.x,W.y,Y,R),o.fillStyle="#333",o.font="12px Arial",o.textAlign="center",o.fillText(W.label,W.x+Y/2,W.y-5),e&&e.forEach(L=>{const z=L.input[W.idx],G=W.x+z/W.max*Y,j=W.y+R-L.target*(R-20)-10;m.current.push({x:G,y:j,info:{x:G,y:j,text:L.text,target:L.target,isSpam:L.target===1,features:{valLabel:W.label,val:z}}});let it=null;if(i&&c)try{it=i.predict(L.input)>.5?"#e74c3c":"#2ecc71"}catch{}it&&(o.beginPath(),o.arc(G,j,4.5,0,2*Math.PI),o.strokeStyle=it,o.lineWidth=1,o.stroke()),o.beginPath(),o.arc(G,j,3,0,2*Math.PI),o.fillStyle=tt(L.target),o.globalAlpha=.6,o.fill(),o.globalAlpha=1}),t){const L=t[W.idx],z=W.x+L/W.max*Y;o.beginPath(),o.moveTo(z,W.y),o.lineTo(z,W.y+R),o.strokeStyle="#3498db",o.setLineDash([5,5]),o.stroke(),o.setLineDash([])}})}if(S&&(g==="features"||g==="scatter"||g==="3d")){o.save(),o.fillStyle="rgba(0,0,0,0.85)",o.strokeStyle="#fff";const et=S.text||"No Text",Y=gt(S.target!==void 0?S.target:S.isSpam?1:0),R=o.measureText(et),Q=Math.max(R.width,140)+20;let W=70;S.features&&(S.features.zLabel?W=90:S.features.yLabel?W=85:W=60);let L=S.x+15,z=S.y-15;L+Q>D&&(L=S.x-Q-10),z+W>X&&(z=S.y-W-10),z<0&&(z=S.y+20),o.beginPath(),o.roundRect(L,z,Q,W,5),o.fill(),o.lineWidth=1,o.stroke(),o.textBaseline="top",o.textAlign="left",o.font="bold 12px sans-serif",o.fillStyle=tt(S.target!==void 0?S.target:S.isSpam?1:0),o.fillText(Y,L+10,z+10),o.fillStyle="#ddd",o.font="italic 11px sans-serif",o.fillText(et,L+10,z+28),S.features&&(o.fillStyle="#fff",o.font="11px monospace",S.features.xLabel?(o.fillText(`${S.features.xLabel}: ${S.features.xVal}`,L+10,z+46),o.fillText(`${S.features.yLabel}: ${S.features.yVal}`,L+10,z+60),S.features.zLabel&&o.fillText(`${S.features.zLabel}: ${S.features.zVal}`,L+10,z+74)):S.features.valLabel&&o.fillText(`${S.features.valLabel}: ${S.features.val}`,L+10,z+46)),o.restore()}},[e,t,n,i,g,x,_,b,N,c,V,$]);const k={features:"Alle Features",scatter:"2D Plot","3d":"3D Plot",text:"Text Mode"};return a("div",{style:{textAlign:"center"},children:[!s&&a("div",{style:{marginBottom:"10px",display:"flex",gap:"5px",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",fontSize:"0.9rem"},children:[a("div",{children:u}),a("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[a("select",{value:g,onChange:w=>l(w.target.value),style:{padding:"4px"},children:r.map(w=>a("option",{value:w,children:k[w]},w))}),(g==="scatter"||g==="3d")&&a(xt,{children:[a("span",{children:"X:"}),a("select",{value:x,onChange:w=>p(parseInt(w.target.value)),style:{padding:"4px"},children:f.map(w=>a("option",{value:w.idx,children:w.label},w.idx))}),a("span",{children:"Y:"}),a("select",{value:_,onChange:w=>y(parseInt(w.target.value)),style:{padding:"4px"},children:f.map(w=>a("option",{value:w.idx,children:w.label},w.idx))})]}),g==="scatter"&&f.length===2&&a("label",{style:{display:"flex",alignItems:"center",gap:"3px",marginLeft:"5px",fontSize:"0.8rem",cursor:"pointer",background:"#f5f5f5",padding:"2px 5px",borderRadius:"3px",border:"1px solid #ddd"},children:[a("input",{type:"checkbox",checked:$,onChange:w=>O(w.target.checked)}),"Show Grid"]}),g==="3d"&&a(xt,{children:[a("span",{children:"Z:"}),a("select",{value:b,onChange:w=>C(parseInt(w.target.value)),style:{padding:"4px"},children:f.map(w=>a("option",{value:w.idx,children:w.label},w.idx))})]})]})]}),a("canvas",{ref:d,width:600,height:400,style:{border:"1px solid #eee",maxWidth:"100%",borderRadius:"4px",cursor:S?"pointer":g==="3d"||g==="scatter"?A.current?"grabbing":"grab":"default"},onWheel:P,onMouseDown:F,onMouseMove:M,onMouseUp:I,onMouseLeave:I,onMouseOut:E,onClick:T}),!s&&a("div",{class:"control-text",style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:g==="3d"?"Drag to rotate 3D view":g==="scatter"?"Drag to Pan, Scroll to Zoom":"Wähle Achsen für die Visualisierung"})]})}const De=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},Jt=e=>{const t=["winner","won","gift card","urgent","rolex","viagra","cash","prize","singles","marketing","buy","free","money","security alert","click","claim","fake","verification"],n=e.toLowerCase();let i=0;t.forEach(u=>{n.includes(u)&&(i+=1)}),i>10&&(i=10);const r=(e.match(/[A-Z]/g)||[]).length/10,s=(e.match(/http/g)||[]).length,c=e.split(/\s+/).length/50;return[i,r,s,c]},$t={id:"multiple_inputs",title:"Phase 3: Multiple Inputs",description:"Advanced spam detection with two linear features (words and links). The network learns a separation line.",Model:cn,GroundTruth:de,CanvasComponent:fe,defaultParams:{weights:[0,0,0,0],bias:0},groundTruthDefaults:[[1.5,.5,2,-.5],-5],getInput:e=>{const t=Math.floor(e*.3),n=De(t)>.5,i=n?$t.examples.spam:$t.examples.ham,r=Math.floor(De(t+99)*i.length),s=i[r],c=Jt(s);return c.text=s,c.groundTruth=n?1:0,c},examples:{spam:["WINNER! Won $1000 Gift Card! Claim at http://prize-giveaway.net","URGENT: Verify account at http://secure-bank-login.com/fraud","Cheap Rolex watches! 50% OFF at www.fake-watches.cn","Lose weight fast! Buy pills: http://diet-miracle.com","CONGRATS! Cash prize waiting: http://claim-money.org","HOT singles waiting! Chat now: http://local-dating.xyz","Refinance 1% APR. Apply: http://easy-loans.biz","Buy 1 get 1 FREE Viagra. http://meds-direct.com","Meet rich men. Signup: http://millionaire-match.com","SECURITY ALERT: Suspicious activity. Check http://account-security-check.com"],ham:["Meeting agenda for tomorrow's team sync","Hey, are we still on for lunch?","Invoice #12345 from AWS Services","Project deadline extended to Friday","Happy Birthday! Hope you have a great day.","Can you review this pull request?","Your Amazon order has shipped.","Fwd: Tickets for the concert","Question about the quarterly report","Let's catch up sometime next week."]},generateData:e=>{const t=[];$t.examples.spam.forEach(n=>{const i=Jt(n),r=()=>(Math.random()-.5)*.1,s=i.map(c=>Math.max(0,c+r()));t.push({input:s,target:1,text:n})}),$t.examples.ham.forEach(n=>{const r=Jt(n).map(s=>Math.max(0,s+(Math.random()-.5)*.1));t.push({input:r,target:0,text:n})});for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},trainingConfig:{maxSteps:3e3,params:[{name:"w1 (Spam Words)",min:1,max:4,step:.5},{name:"w2 (Capitals)",min:0,max:2,step:.5},{name:"w3 (Links)",min:0,max:3,step:.5},{name:"w4 (Total Words)",min:-2,max:2,step:.5},{name:"bias",min:-8,max:8,step:2}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + w₃x₃ + w₄x₄ + b)",inputLabels:["Spam Words","Caps (/10)","Links","Words (/50)"],outputLabel:"Spam (p)",biasLabel:"b"},isFinished:e=>e>=50};class Bn{constructor(t=2,n=10){this.inputCount=t,this.hiddenCount=n;const i=Math.sqrt(6/(t+n));this.weights1=Array(n).fill(0).map(()=>Array.from({length:t},()=>Math.random()*2*i-i)),this.biases1=Array(n).fill(0);const r=Math.sqrt(6/(n+1));this.weights2=Array.from({length:n},()=>Math.random()*2*r-r),this.bias2=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=[];for(let s=0;s<this.hiddenCount;s++){let c=this.biases1[s];for(let u=0;u<this.inputCount;u++)c+=this.weights1[s][u]*t[u];n.push(this.sigmoid(c))}let i=this.bias2;for(let s=0;s<this.hiddenCount;s++)i+=this.weights2[s]*n[s];return this.sigmoid(i)}getActivations(t){const n=[];for(let s=0;s<this.hiddenCount;s++){let c=this.biases1[s];for(let u=0;u<this.inputCount;u++)c+=this.weights1[s][u]*t[u];n.push(this.sigmoid(c))}let i=this.bias2;for(let s=0;s<this.hiddenCount;s++)i+=this.weights2[s]*n[s];const r=this.sigmoid(i);return{hidden:n,output:[r]}}setParams(t){for(let i=0;i<this.hiddenCount;i++){const r=`b1_${i}`;t[r]!==void 0&&(this.biases1[i]=t[r]);for(let s=0;s<this.inputCount;s++){const c=`w1_${i}_${s}`;t[c]!==void 0&&(this.weights1[i][s]=t[c])}}const n="b2";t[n]!==void 0&&(this.bias2=t[n]);for(let i=0;i<this.hiddenCount;i++){const r=`w2_${i}`;t[r]!==void 0&&(this.weights2[i]=t[r])}}getTopology(){return{inputCount:this.inputCount,hiddenCounts:[this.hiddenCount],outputCount:1,weights1:this.weights1,biases1:this.biases1,weights2:this.weights2,bias2:this.bias2}}}const un=[{label:"Total Words",idx:0,max:400},{label:"Links",idx:1,max:10}],Gt=[{input:[367,5],target:0,text:"Attached is the quarterly report found at..."},{input:[365,2],target:0,text:"Attached is the quarterly report found at..."},{input:[364,6],target:0,text:"Attached is the quarterly report found at..."},{input:[327,7],target:0,text:"Attached is the quarterly report found at..."},{input:[302,5],target:0,text:"Attached is the quarterly report found at..."},{input:[314,3],target:0,text:"Attached is the quarterly report found at..."},{input:[345,4],target:0,text:"Attached is the quarterly report found at..."},{input:[265,5],target:0,text:"Attached is the quarterly report found at..."},{input:[287,4],target:0,text:"Attached is the quarterly report found at..."},{input:[311,1],target:0,text:"Attached is the quarterly report found at..."},{input:[268,2],target:0,text:"Attached is the quarterly report found at..."},{input:[283,0],target:0,text:"Attached is the quarterly report found at..."},{input:[261,3],target:0,text:"Attached is the quarterly report found at..."},{input:[197,0],target:0,text:"Just a normal short message."},{input:[150,0],target:0,text:"Just a normal short message."},{input:[124,0],target:0,text:"Just a normal short message."},{input:[65,1],target:0,text:"Just a normal short message."},{input:[85,0],target:0,text:"Just a normal short message."},{input:[58,0],target:0,text:"Just a normal short message."},{input:[45,0],target:0,text:"Security Alert: Login Code 2542"},{input:[36,0],target:0,text:"Security Alert: Login Code 5607"},{input:[38,1],target:0,text:"Security Alert: Login Code 909"},{input:[24,1],target:0,text:"Security Alert: Login Code 8385"},{input:[17,1],target:0,text:"Security Alert: Login Code 2083"},{input:[215,1],target:1,text:"You won a prize! Click here."},{input:[230,3],target:1,text:"You won a prize! Click here."},{input:[234,5],target:1,text:"You won a prize! Click here."},{input:[221,2],target:1,text:"You won a prize! Click here."},{input:[215,4],target:1,text:"You won a prize! Click here."},{input:[153,3],target:1,text:"You won a prize! Click here."},{input:[152,1],target:1,text:"You won a prize! Click here."},{input:[137,2],target:1,text:"You won a prize! Click here."},{input:[124,4],target:1,text:"You won a prize! Click here."},{input:[120,2],target:1,text:"You won a prize! Click here."},{input:[92,3],target:1,text:"You won a prize! Click here."},{input:[93,5],target:1,text:"You won a prize! Click here."},{input:[86,5],target:1,text:"You won a prize! Click here."},{input:[84,3],target:1,text:"You won a prize! Click here."},{input:[53,4],target:1,text:"You won a prize! Click here."},{input:[55,3],target:1,text:"You won a prize! Click here."}],se=()=>(console.log("Using prepared data with length "+Gt.length),Gt),Ee={id:"single_layer_nonlinear",title:"Phase 4: Single Layer Nonlinear Data",description:"Spam detection with only 2 features but complex distribution. A simple linear classifier (perceptron) will fail here.",Model:cn,GroundTruth:de,CanvasComponent:fe,defaultParams:{weights:[0,0],bias:0},getInput:e=>{const t=Math.floor(e*.5)%Gt.length,n=Gt[t],i=[...n.input];return i.text=n.text,i.groundTruth=n.target,i},generateData:e=>se(),trainingConfig:{maxSteps:4e3,params:[{name:"w1 (Words)",min:-5,max:5,step:.5},{name:"w2 (Links)",min:-5,max:5,step:.5},{name:"bias",min:-10,max:10,step:1}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + b)",inputLabels:["Spam Words","Links"],outputLabel:"Spam (p)",biasLabel:"b"},featuresConfig:un,isFinished:e=>!1},Ct=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},Fn=(e,t)=>{if(!e)return"";const n=["login","verify","offer","invoice","tracking","reset","promo","survey"],i=["example.com","secure-mail.net","tracking-info.org","account-help.co","promo-deals.io"],r=[];for(let s=0;s<e;s++){const c=i[Math.floor(Ct(t+s*31)*i.length)],u=n[Math.floor(Ct(t+s*57)*n.length)];r.push(`http://${c}/${u}/${Math.floor(Ct(t+s*97)*9e3+1e3)}`)}return r.join(" ")},ze=(e,t)=>{const[n,i]=e.input,r=n*100+i*10+t,s=["Security notice","Login code","2FA code","Device sign-in","One-time password"],c=["Quarterly report attached","Project status update","Meeting notes and next steps","Draft contract for review","Budget summary"],u=["LIMITED OFFER inside","URGENT: VERIFY ACCOUNT","WIN a PRIZE today","FREE BONUS available","SECURITY ALERT: action required"],f=["Thanks,","Best regards,","Kind regards,","Sincerely,","—"],d=["Alex","Sam","Taylor","Jordan","Casey"][Math.floor(Ct(r+7)*5)],g=`${f[Math.floor(Ct(r+13)*f.length)]} ${d}`,l=Fn(i,r+101);if(e.target===0&&n<60){const y=s[Math.floor(Ct(r+19)*s.length)],C=`Your login code is ${Math.floor(Ct(r+23)*9e5+1e5)}. It expires in 10 minutes.
If you did not request this, ignore this message.`;return`Subject: ${y}
${C}
${g}`}if(e.target===0){const y=c[Math.floor(Ct(r+29)*c.length)],b=["Hi team,","Sharing the latest update and a few action items for this week.","Please review when you have a moment and reply with any questions.",l?`References: ${l}`:""].filter(Boolean).join(`
`);return`Subject: ${y}
${b}
${g}`}const x=u[Math.floor(Ct(r+37)*u.length)],p=["CLICK LINK NOW to CLAIM your REWARD.","ACT NOW: LIMITED DISCOUNT expires TODAY.","VERIFY ACCOUNT to avoid SUSPENDED access.","WIN CASH PRIZE — CLAIM BONUS NOW.","FREE OFFER available — CLICK LINK to continue."],_=[p[Math.floor(Ct(r+41)*p.length)],l?`Links: ${l}`:"Links: http://promo-deals.io/offer/1234",g].join(`
`);return`Subject: ${x}
${_}`},On=()=>{const e=[];for(let t=0;t<10;t++){e.push({name:`b1_${t}`,min:-30,max:30,step:1});for(let n=0;n<2;n++)e.push({name:`w1_${t}_${n}`,min:-30,max:30,step:1})}e.push({name:"b2",min:-3,max:3,step:1});for(let t=0;t<10;t++)e.push({name:`w2_${t}`,min:-50,max:50,step:1});return e},Ie={id:"double_layer_nonlinear",title:"Phase 5: Double Layer Nonlinear Data",description:'Spam detection with a Hidden Layer (10 neurons). The Deep Neural Network can detect the nonlinear distribution ("Spam Island").',Model:Bn,GroundTruth:de,CanvasComponent:fe,defaultParams:{},getInput:e=>{const t=se(),n=Math.floor(e*.5)%t.length,i=t[n],r=[...i.input];return r.text=ze(i,n),r.groundTruth=i.target,r},generateData:e=>se().map((t,n)=>({...t,text:ze(t,n)})),trainingConfig:{seed:1319434789,maxSteps:1e4,params:On()},networkViz:{formula:"p = σ(W₂ · σ(W₁ · x + b₁) + b₂)",inputLabels:[`Spam
Words`,"Links"],outputLabel:"Spam (p)",biasLabel:"b"},featuresConfig:un,isFinished:e=>e>=50},Ne={[We.id]:We,[$e.id]:$e,[$t.id]:$t,[Ee.id]:Ee,[Ie.id]:Ie};function jn(e){return Ne[e]||Ne.linear_regression}function pe(e){const[t,n]=ot(null),i=bt(null),r=bt(null),[s,c]=ot(0),[u,f]=ot(!1),[d,g]=ot([]),[l,x]=ot([]),[p,_]=ot(-1),[y,b]=ot(!1),[C,$]=ot("simulation"),[O,N]=ot("table"),[J,V]=ot("random"),[B,A]=ot("Ready."),h=bt(0);Tt(()=>{if(!e)return;if(e==="gallery"){n({id:"gallery",type:"gallery"});return}const M=jn(e);if(!M){A("Error: Simulation not found.");return}try{if(i.current=new M.GroundTruth(...M.groundTruthDefaults||[]),r.current=new M.Model,M.defaultParams&&(M.defaultParams.weight!==void 0&&r.current.setWeight(M.defaultParams.weight),M.defaultParams.weights!==void 0&&r.current.setWeights&&r.current.setWeights(M.defaultParams.weights),M.defaultParams.bias!==void 0&&r.current.setBias(M.defaultParams.bias)),n(M),i.current)try{const I=M.generateData(i.current);g(I)}catch(I){console.error("Auto-generate data error:",I)}}catch(I){console.error("Initialization Error:",I),A(`Init Error: ${I.message}`)}},[e]),Tt(()=>{let M;const I=E=>{if(!u)return;h.current===0&&(h.current=E);const U=(E-h.current)/1e3;h.current=E;const T=Math.min(U,.1);c(k=>{const o=k+T*3;return t&&t.isFinished&&t.isFinished(o)&&(f(!1),A("Simulation finished.")),o}),M=requestAnimationFrame(I)};return u&&(h.current=0,M=requestAnimationFrame(I)),()=>cancelAnimationFrame(M)},[u,t]);const S=()=>{c(0),f(!0),A("Simulation running..."),$("simulation")},v=()=>{f(!1),A("Simulation paused.")},m=()=>{u?v():S()},P=async()=>{try{if(d.length===0||!t)return;b(!0),_(0),x([]),A("Searching for optimal weight and bias (Live Visualization)..."),$("training");const M=new t.Model,I=new Dn(M),E=(T,k)=>{if(x(w=>{const o=[...w,...T];return _(o.length-1),o}),k&&k.message&&A(k.message),k&&k.bestParams)if(r.current.setParams)r.current.setParams(k.bestParams);else if(r.current.setWeights){const{weights:w,bias:o}=k.bestParams;r.current.setWeights(w),r.current.setBias(o)}else r.current.setWeight&&k.bestParams&&k.bestParams.weights&&k.bestParams.weights.length>=1&&(r.current.setWeight(k.bestParams.weights[0]),r.current.setBias(k.bestParams.bias));else k&&k.bestWeight!==void 0&&(r.current.setWeight(k.bestWeight),r.current.setBias(k.bestBias))};let U;if(J==="random"){A("Searching for optimal weight and bias (Random Search)...");const T={seed:t.trainingConfig.seed,maxSteps:t.trainingConfig.maxSteps,initialRadius:t.trainingConfig.initialRadius,phase1Ratio:t.trainingConfig.phase1Ratio};U=await I.trainRandomAsync(d,t.trainingConfig.params,E,T)}else t.trainingConfig.params?U=await I.trainAsync(d,t.trainingConfig.params,E):U=await I.trainAsync(d,t.trainingConfig.weightRange,t.trainingConfig.biasRange,E);A(`Training finished! Min Error: ${U.minError.toFixed(5)}`),b(!1)}catch(M){console.error("Training Error:",M),b(!1),A(`Training Error: ${M.message}`)}},F=t&&t.getInput?t.getInput(s):void 0;return{simConfig:t,groundTruth:i,neuralNet:r,time:s,currentInput:F,isRunning:u,trainingData:d,trainingHistory:l,trainingStepIndex:p,isTraining:y,activeTab:C,dataViewMode:O,trainerType:J,statusMsg:B,handleTrain:P,handleRun:m,handleStop:v,toggleRun:m,setTrainerType:V,setActiveTab:$,setDataViewMode:N}}function Un({history:e,currentStepIndex:t,isTraining:n,paramsConfig:i,showAccuracyPlot:r=!0}){const s=bt(null),[c,u]=ot(0),f=6;Tt(()=>{u(0)},[i]),Tt(()=>{const g=s.current;if(!g||!e||e.length===0)return;const l=g.getContext("2d"),x=g.width,p=g.height;l.clearRect(0,0,x,p),l.fillStyle="#fff",l.fillRect(0,0,x,p);const _=Math.max(...e.map(B=>B.error)),b=!n&&e.length>0?e.length-1:t!==null&&t>=0?Math.min(t,e.length-1):-1;let C=-1,$=1/0;for(let B=0;B<=b;B++)e[B].error<$&&($=e[B].error,C=B);let O=[];if(i){const B=r?2:1,A=B+i.length,h=c*f,S=Math.min(h+f,A),v=3,m=2,P=x/v,F=p/m;for(let M=h;M<S;M++){const I=M-h,E=I%v,U=Math.floor(I/v),T=E*P,k=U*F;if(r&&M===0){const w=Math.max(10,e.length-1);O.push({type:"accuracy_step",xLabel:"Training Step",xMin:0,xMax:w,yMode:"accuracy",getValue:(o,D)=>D,getYValue:o=>o.accuracy||0,offsetX:T,offsetY:k,w:P,h:F,showYAxis:!0})}else if(r&&M===1||!r&&M===0){const w=Math.max(10,e.length-1);O.push({type:"error_step",xLabel:"Training Step",xMin:0,xMax:w,yMode:"error_log",getValue:(o,D)=>D,getYValue:o=>o.error,offsetX:T,offsetY:k,w:P,h:F,showYAxis:!0})}else{const w=M-B,o=i[w],D=e.map(tt=>tt.params[w]),X=Math.min(...D),K=Math.max(...D);O.push({type:"param_error",xLabel:o.name,xMin:X,xMax:K,yMode:"error_log",getValue:tt=>tt.params[w],getYValue:tt=>tt.error,offsetX:T,offsetY:k,w:P,h:F})}}}else{const B=x/2,A=p/2,h=e.map(m=>m.weight),S=e.map(m=>m.bias),v=Math.max(10,e.length-1);O=[],r&&O.push({type:"accuracy_step",xLabel:"Accuracy",xMin:0,xMax:v,yMode:"accuracy",getValue:(m,P)=>P,getYValue:m=>m.accuracy||0,offsetX:0,offsetY:0,w:B,h:A,showYAxis:!0}),O.push({type:"error_step",xLabel:"Step",xMin:0,xMax:v,yMode:"error_log",getValue:(m,P)=>P,getYValue:m=>m.error,offsetX:r?B:0,offsetY:0,w:B,h:A,showYAxis:!0},{xLabel:"Weight",xMin:Math.min(...h),xMax:Math.max(...h),yMode:"error_log",getValue:m=>m.weight,getYValue:m=>m.error,offsetX:r?0:B,offsetY:r?A:0,w:B,h:A},{xLabel:"Bias",xMin:Math.min(...S),xMax:Math.max(...S),yMode:"error_log",getValue:m=>m.bias,getYValue:m=>m.error,offsetX:r?B:0,offsetY:A,w:B,h:A})}const N=50;O.forEach(B=>{const{xLabel:A,xMin:h,xMax:S,getValue:v,getYValue:m,offsetX:P,offsetY:F,w:M,h:I,yMode:E,showYAxis:U}=B,T=o=>P+N+(o-h)/(S-h||1)*(M-2*N);let k;if(E==="accuracy")k=o=>F+I-N-o*(I-2*N);else{const D=_||1;k=X=>{const K=(X-0)/(D-0);return F+I-N-K*(I-2*N)}}l.strokeStyle="#eee",l.lineWidth=2,l.strokeRect(P,F,M,I),l.beginPath(),l.strokeStyle="#333",l.lineWidth=2,l.moveTo(P+N,F+N),l.lineTo(P+N,F+I-N),l.lineTo(P+M-N,F+I-N),l.stroke(),l.fillStyle="#333",l.font="22px sans-serif",l.textAlign="center";let w=A;if(w.length>20&&(w=w.substring(0,18)+"..."),l.fillText(w,P+M/2,F+I-15),P===0||U)if(l.save(),l.translate(P+15,F+I/2),l.rotate(-Math.PI/2),E==="accuracy")l.fillText("Accuracy",0,0),l.restore(),l.textAlign="right",l.fillStyle="#666",l.font="18px sans-serif",[0,.25,.5,.75,1].forEach(o=>{const D=k(o);l.fillText(o.toFixed(2),P+N-8,D+6),l.beginPath(),l.lineWidth=1,l.strokeStyle="#f0f0f0",l.moveTo(P+N,D),l.lineTo(P+M-N,D),l.stroke()});else{l.fillText("Error",0,0),l.restore(),l.textAlign="right",l.fillStyle="#666",l.font="18px sans-serif";const o=5;for(let D=0;D<=o;D++){const X=D/o*_,K=k(X);l.fillText(X.toFixed(2),P+N-8,K+6),D>0&&(l.beginPath(),l.lineWidth=1,l.strokeStyle="#f0f0f0",l.moveTo(P+N,K),l.lineTo(P+M-N,K),l.stroke())}}l.fillStyle="#666",l.font="18px sans-serif",l.textAlign="center",l.fillText(h.toFixed(1),P+N,F+I-N+25),l.fillText(S.toFixed(1),P+M-N,F+I-N+25),l.fillStyle=E==="accuracy"?"rgba(155, 89, 182, 0.4)":"rgba(52, 152, 219, 0.4)";for(let o=0;o<=b;o++){const D=v(e[o],o),X=m(e[o]),K=T(D),tt=k(X);l.fillRect(K,tt,4,4)}if(C>=0){const o=v(e[C],C),D=m(e[C]),X=T(o),K=k(D);l.beginPath(),l.fillStyle="#2ecc71",l.strokeStyle="#27ae60",l.lineWidth=2,l.arc(X,K,10,0,Math.PI*2),l.fill(),l.stroke()}if(n&&t!==null&&t>=0&&t<=b){const o=v(e[t],t),D=m(e[t]),X=T(o),K=k(D);l.beginPath(),l.fillStyle="#e74c3c",l.strokeStyle="#c0392b",l.lineWidth=2,l.arc(X,K,8,0,Math.PI*2),l.fill(),l.stroke()}});const J=x-150,V=20;l.fillStyle="rgba(255,255,255,0.9)",l.fillRect(J,V,140,70),l.strokeStyle="#ccc",l.lineWidth=1,l.strokeRect(J,V,140,70),l.textAlign="left",l.font="16px sans-serif",l.beginPath(),l.fillStyle="#e74c3c",l.arc(J+15,V+20,6,0,Math.PI*2),l.fill(),l.fillStyle="#333",l.fillText("Current Scan",J+30,V+25),l.beginPath(),l.fillStyle="#2ecc71",l.arc(J+15,V+50,6,0,Math.PI*2),l.fill(),l.fillStyle="#333",l.fillText("Best So Far",J+30,V+55),!n&&C>=0&&(l.fillStyle="#333",l.font="bold 18px sans-serif",l.textAlign="right",l.fillText(`Min Error: ${$.toFixed(5)}`,x-20,p-20))},[e,t,n,i,c]);const d=i?Math.ceil((i.length+1)/f):1;return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff"},children:[a("canvas",{ref:s,width:1600,height:800,style:{width:"100%",height:"auto"}}),d>1&&a("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px",gap:"10px"},children:[a("button",{onClick:()=>u(g=>Math.max(0,g-1)),disabled:c===0,children:"Previous"}),a("span",{style:{alignSelf:"center"},children:["Page ",c+1," of ",d]}),a("button",{onClick:()=>u(g=>Math.min(d-1,g+1)),disabled:c===d-1,children:"Next"})]})]})}function Xn(e,t){for(var n in t)e[n]=t[n];return e}function Ye(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Ve(e,t){this.props=e,this.context=t}(Ve.prototype=new At).isPureReactComponent=!0,Ve.prototype.shouldComponentUpdate=function(e,t){return Ye(this.props,e)||Ye(this.state,t)};var He=Z.__b;Z.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),He&&He(e)};var Gn=Z.__e;Z.__e=function(e,t,n,i){if(e.then){for(var r,s=t;s=s.__;)if((r=s.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}Gn(e,t,n,i)};var Be=Z.unmount;function hn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=Xn({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return hn(i,t,n)})),e}function dn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return dn(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Qt(){this.__u=0,this.o=null,this.__b=null}function fn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ht(){this.i=null,this.l=null}Z.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Be&&Be(e)},(Qt.prototype=new At).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=fn(i.__v),s=!1,c=function(){s||(s=!0,n.__R=null,r?r(u):u())};n.__R=c;var u=function(){if(!--i.__u){if(i.state.__a){var f=i.state.__a;i.__v.__k[0]=dn(f,f.__c.__P,f.__c.__O)}var d;for(i.setState({__a:i.__b=null});d=i.o.pop();)d.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(c,c)},Qt.prototype.componentWillUnmount=function(){this.o=[]},Qt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=hn(this.__b,n,i.__O=i.__P)}this.__b=null}var r=t.__a&&ie(xt,null,e.fallback);return r&&(r.__u&=-33),[ie(xt,null,t.__a?null:e.children),r]};var Fe=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(Ht.prototype=new At).__a=function(e){var t=this,n=fn(t.__v),i=t.l.get(e);return i[0]++,function(r){var s=function(){t.props.revealOrder?(i.push(r),Fe(t,e,i)):r()};n?n(s):s()}},Ht.prototype.render=function(e){this.i=null,this.l=new Map;var t=jt(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Ht.prototype.componentDidUpdate=Ht.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Fe(e,n,t)})};var qn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Zn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Jn=/[A-Z0-9]/g,Qn=typeof document<"u",ti=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};At.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(At.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Oe=Z.event;function ei(){}function ni(){return this.cancelBubble}function ii(){return this.defaultPrevented}Z.event=function(e){return Oe&&(e=Oe(e)),e.persist=ei,e.isPropagationStopped=ni,e.isDefaultPrevented=ii,e.nativeEvent=e};var ri={enumerable:!1,configurable:!0,get:function(){return this.class}},je=Z.vnode;Z.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,i=t.type,r={},s=i.indexOf("-")===-1;for(var c in n){var u=n[c];if(!(c==="value"&&"defaultValue"in n&&u==null||Qn&&c==="children"&&i==="noscript"||c==="class"||c==="className")){var f=c.toLowerCase();c==="defaultValue"&&"value"in n&&n.value==null?c="value":c==="download"&&u===!0?u="":f==="translate"&&u==="no"?u=!1:f[0]==="o"&&f[1]==="n"?f==="ondoubleclick"?c="ondblclick":f!=="onchange"||i!=="input"&&i!=="textarea"||ti(n.type)?f==="onfocus"?c="onfocusin":f==="onblur"?c="onfocusout":Zn.test(c)&&(c=f):f=c="oninput":s&&Kn.test(c)?c=c.replace(Jn,"-$&").toLowerCase():u===null&&(u=void 0),f==="oninput"&&r[c=f]&&(c="oninputCapture"),r[c]=u}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=jt(n.children).forEach(function(d){d.props.selected=r.value.indexOf(d.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=jt(n.children).forEach(function(d){d.props.selected=r.multiple?r.defaultValue.indexOf(d.props.value)!=-1:r.defaultValue==d.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",ri)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=qn,je&&je(e)};var Ue=Z.__r;Z.__r=function(e){Ue&&Ue(e),e.__c};var Xe=Z.diffed;Z.diffed=function(e){Xe&&Xe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function oi({model:e,inputs:t,inputLabels:n,output:i,outputLabel:r,formula:s}){if(!e||!e.getTopology)return null;const c=e.getTopology(),{inputCount:u,hiddenCounts:f,outputCount:d,weights1:g,biases1:l,weights2:x}=c,p=c.biases2||(c.bias2!==void 0?[c.bias2]:null);let _={hidden:[],output:[]};e.getActivations&&(_=e.getActivations(t));const[y,b]=ot(null),[C,$]=ot(!1),O=400,N=400,J=N/2,V=O/2,B=300,A=300,h=V-B/2,S=V+B/2,v=[{count:u,x:h,labels:n,values:t},{count:f[0],x:V,values:_.hidden},{count:d,x:S,labels:[r],values:_.output}];Math.max(...v.map(T=>T.count));const m=(T,k)=>{const w=v[T].count;let o=Math.min(50,A/w);const D=(w-1)*o;return J-D/2+k*o},P=(T,k)=>{y&&y.layer===T&&y.index===k?b(null):b({layer:T,index:k})},F=(T,k,w,o)=>y?y.layer===T&&y.index===k||y.layer===w&&y.index===o:!1,M=(T,k)=>y&&y.layer===T&&y.index===k;if(C)return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center",height:"400px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a("div",{style:{flex:"0 0 auto",marginBottom:"10px"},children:a("h3",{style:{margin:"0",fontSize:"1rem",color:"#555"},children:"Network Parameters"})}),a("div",{style:{flex:"1 1 auto",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start"},children:a("div",{style:{display:"flex",gap:"20px",alignItems:"flex-start",justifyContent:"center",flexWrap:"wrap",paddingBottom:"10px"},children:[a("div",{style:{textAlign:"center"},children:[a("h4",{style:{fontSize:"0.9rem",marginBottom:"5px"},children:"Layer 1 Weights"}),a(si,{data:g}),a("h4",{style:{fontSize:"0.9rem",marginBottom:"5px",marginTop:"10px"},children:"Layer 1 Biases"}),a(te,{data:l})]}),a("div",{style:{textAlign:"center"},children:[a("h4",{style:{fontSize:"0.9rem",marginBottom:"5px"},children:"Layer 2 Weights (to Output)"}),a(te,{data:Array.isArray(x[0])?x.flat():x,isVertical:!0}),p&&a(xt,{children:[a("h4",{style:{fontSize:"0.9rem",marginBottom:"5px",marginTop:"10px"},children:"Layer 2 Bias"}),a(te,{data:Array.isArray(p)?p:[p]})]})]})]})}),a("div",{style:{flex:"0 0 auto",marginTop:"10px",cursor:"pointer",fontStyle:"italic",color:"#777",padding:"5px"},onClick:()=>$(!1),children:"Back to Network"})]});const I=[{fill:"#e3f2fd",stroke:"#2196f3",highlight:"#1976d2"},{fill:"#f3e5f5",stroke:"#9c27b0",highlight:"#7b1fa2"},{fill:"#e8f5e9",stroke:"#4caf50",highlight:"#388e3c"}],E="#bdbdbd",U="#ff9800";return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center"},children:[a("h3",{style:{marginBottom:"10px",fontSize:"1rem",color:"#555"},children:"Neural Network Activity"}),a("svg",{width:O,height:N,style:{overflow:"visible"},children:[a("rect",{x:h,y:J-A/2,width:B,height:A,rx:"15",fill:"none",stroke:"#333",strokeWidth:"2"}),g.map((T,k)=>T.map((w,o)=>{const D=F(0,o,1,k),X=y&&!D,K=D?U:E,tt=D?3:1.5,gt=X?.2:1;return a("line",{x1:v[0].x,y1:m(0,o),x2:v[1].x,y2:m(1,k),stroke:K,strokeWidth:tt,strokeOpacity:gt,style:{transition:"all 0.3s ease"}},`L0-${o}-${k}`)})),x.map((T,k)=>{const w=F(1,k,2,0),o=y&&!w,D=w?U:E,X=w?3:1.5,K=o?.2:1;return a("line",{x1:v[1].x,y1:m(1,k),x2:v[2].x,y2:m(2,0),stroke:D,strokeWidth:X,strokeOpacity:K,style:{transition:"all 0.3s ease"}},`L1-${k}-0`)}),v.map((T,k)=>a("g",{children:Array.from({length:T.count}).map((w,o)=>{const D=T.x,X=m(k,o),K=T.values&&T.values[o]!==void 0?T.values[o]:0,tt=M(k,o),gt=I[k]||I[0];return a("g",{onClick:()=>P(k,o),style:{cursor:"pointer"},children:[a("circle",{cx:D,cy:X,r:12,fill:tt?gt.highlight:gt.fill,stroke:gt.stroke,strokeWidth:tt?"3":"2",style:{transition:"all 0.3s ease"}}),T.labels&&a("text",{x:k===0?D-18:D+18,y:X,textAnchor:k===0?"end":"start",style:{textAnchor:k===0?"end":"start",pointerEvents:"none"},dominantBaseline:"middle",fontSize:"14",fontWeight:"600",fill:"#444",children:(T.labels[o]||"").toString().split(`
`).map((et,Y,R)=>a("tspan",{x:k===0?D-18:D+18,dy:Y===0?`${(R.length-1)*-.6}em`:"1.2em",children:et},Y))}),a("title",{children:K.toFixed(3)})]},`n-${k}-${o}`)})},`layer-${k}`)),s&&a("foreignObject",{className:"formula",x:V-200,y:N-25,width:400,height:20,children:a("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"18px",fontStyle:"italic",color:"#777",cursor:"pointer",userSelect:"none"},onClick:()=>$(!0),title:"Click to view matrices",children:s})})]})]})}function si({data:e}){return e?a("div",{style:{display:"grid",gridTemplateColumns:`repeat(${e[0].length}, 1fr)`,gap:"2px",border:"1px solid #999",padding:"2px",background:"#eee"},children:e.map((t,n)=>t.map((i,r)=>a("div",{style:{padding:"2px 4px",background:"#fff",fontSize:"10px",textAlign:"center"},children:i.toFixed(2)},`${n} -${r} `)))}):null}function te({data:e,isVertical:t=!1}){if(!e)return null;const n=Array.isArray(e)?e:[e];return a("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"2px",border:"1px solid #999",padding:"2px",background:"#eee"},children:n.map((i,r)=>a("div",{style:{padding:"2px 4px",background:"#fff",fontSize:"10px",textAlign:"center"},children:i.toFixed(2)},r))})}function pn({input:e,weight:t,bias:n,output:i,formula:r="y = w * x + b",inputLabel:s="Input",outputLabel:c="Output",biasLabel:u="b",decimals:f=1,model:d=null}){if(d&&d.getTopology){let E=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(E=e.input);const U=Array.isArray(E)?E:[E],T=Array.isArray(s)?s:[s];return a(oi,{model:d,inputs:U,inputLabels:T,output:i,outputLabel:c,formula:r})}let g=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(g=e.input);const l=Array.isArray(g)?g:[g],x=Array.isArray(t)?t:[t],p=Array.isArray(s)?s:[s],_=Number(n)||0,y=Number(i)||0,b=l.length,C=24,$=90,O=260,N=60,J=60,V=Math.max(1,b-1)*$,B=Math.max(150,V+N+J),A=B+60,h=600,S=h/2+10,v=S-O/2,m=S+O/2,P=B/2+20,F=P-V/2,M=m-50,I=M-60;return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a("div",{className:"model-title",style:{marginBottom:"10px"},children:"Model Architecture"}),a("svg",{width:h,height:A,style:{overflow:"visible"},children:[a("defs",{children:a("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"27",refY:"3.5",orient:"auto",children:a("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#333"})})}),a("rect",{x:v,y:20,width:O,height:B,rx:"15",fill:"none",stroke:"#333",strokeWidth:"2"}),(()=>{const E=P-50;return a(xt,{children:[l.map((U,T)=>{const k=b>1?F+T*$:P,w=Number(x[T])||0,o=p[T]||`x${T+1}`,D=Number(U)||0;return a("g",{children:[a("line",{x1:v,y1:k,x2:I,y2:P,stroke:"#666",strokeWidth:"1"}),a("g",{transform:`translate(${(v+I)/2+(1-(b-1)/2)*5}, ${(k+P)/2})`,children:[a("rect",{x:"-24",y:"-8",width:"50",height:"18",fill:"#fff",rx:"4",stroke:"#e0e0e0"}),a("text",{x:"0",y:"5",textAnchor:"middle",fill:"#e74c3c",fontSize:"10",fontWeight:"bold",children:w.toFixed(1)})]}),a("circle",{cx:v,cy:k,r:C,fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("text",{x:v-30,y:k+2,textAnchor:"end",style:{textAnchor:"end"},dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",fill:"#333",children:o.toString().split(`
`).map((X,K,tt)=>a("tspan",{x:v-30,dy:K===0?`${(tt.length-1)*-.6}em`:"1.2em",children:X},K))}),a("text",{x:v-1,y:k+2,textAnchor:"middle",dominantBaseline:"middle",fontSize:"14",fill:"#333",children:D.toFixed(f)})]},T)}),a("line",{x1:I,y1:P,x2:M,y2:P,stroke:"#666",strokeWidth:"1"}),a("g",{transform:`translate(${M}, ${P})`,children:[a("rect",{x:"-18",y:"-18",width:"36",height:"36",rx:"6",fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("path",{d:"M -10 8 C -4 8, -4 -8, 10 -8",stroke:"#333",strokeWidth:"2",fill:"none"})]}),a("line",{x1:M+18,y1:P,x2:m-C,y2:P,stroke:"#333",strokeWidth:"2"}),a("path",{d:`M ${M-20} ${E} Q ${M-20} ${P} ${I+10} ${P}`,fill:"none",stroke:"#f39c12",strokeWidth:"1"}),a("circle",{cx:M-20,cy:E,r:12,fill:"#f1c40f",stroke:"#f39c12"}),a("text",{x:M-20,y:E+2,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fontWeight:"bold",fill:"#fff",children:"b"}),a("text",{x:M-2,y:E+1,textAnchor:"start",dominantBaseline:"middle",fontSize:"12",fill:"#f39c12",fontWeight:"bold",children:_.toFixed(2)})]})})(),a("circle",{cx:m,cy:P,r:C,fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("text",{x:m+6,y:P+3,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",children:y.toFixed(2)}),a("text",{x:m+30,y:P+2,textAnchor:"start",dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",fill:"#333",children:c.toString().split(`
`).map((E,U,T)=>a("tspan",{x:m+33,dy:U===0?`${(T.length-1)*-.6}em`:"1.2em",children:E},U))}),a("foreignObject",{className:"formula",x:S-200,y:A-25,width:400,height:20,children:a("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"18px",fontStyle:"italic",color:"#777"},children:r})})]})]})}function ai({onTrain:e,onRun:t,isTraining:n,trainingStep:i,dataCount:r,trainerType:s,onTrainerTypeChange:c,isRunning:u,simulationEnabled:f=!0}){return a("div",{class:"control-panel",role:"region","aria-label":"Controls",style:{padding:"20px",background:"#eee",borderRadius:"8px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[a("span",{"aria-live":"polite",children:["Data Points: ",r]}),a("div",{style:{borderLeft:"1px solid #ccc",paddingLeft:"10px",marginLeft:"10px",display:"flex",gap:"5px",alignItems:"center"},children:[a("select",{value:s,onChange:d=>c(d.target.value),disabled:n,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[a("option",{value:"exhaustive",children:"Grid Search "}),a("option",{value:"random",children:"Adaptive Random "})]}),a("button",{onClick:e,disabled:n||r===0,"aria-busy":n,children:n?"Searching...":"2. Train"})]}),f&&a("button",{onClick:t,disabled:n,style:u?{background:"#f39c12",color:"white"}:{},children:["3. Simulation ",u?"Stop":"Start"]})]})}function Rt({viewMode:e,onChange:t}){return a("div",{style:{display:"flex"},children:a("div",{style:{background:"#eee",borderRadius:"4px",padding:"2px",display:"flex",gap:"2px"},children:[a("button",{onClick:()=>t("table"),style:{background:e==="table"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:e==="table"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:e==="table"?"bold":"normal",color:e==="table"?"#333":"#666"},children:"Table"}),a("button",{onClick:()=>t("plot"),style:{background:e==="plot"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:e==="plot"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:e==="plot"?"bold":"normal",color:e==="plot"?"#333":"#666"},children:"Graph"})]})})}function Kt({data:e,vizProps:t,simConfig:n,maximizedPanel:i}){if(!e||e.length===0)return a("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No training data generated yet."});const r=["logistic_regression","spam","spam_advanced","spam_hidden","spam_nonlinear","multiple_inputs","single_layer_nonlinear","double_layer_nonlinear"].includes(n?.id),s=(c,u=2)=>{const f=String(c??"").split(/\r?\n/);return f.length<=u?String(c??""):`${f.slice(0,u).join(`
`)}...`};return a("div",{style:{maxHeight:i?"calc(100vh - 350px)":"400px",overflowY:"auto"},children:a("table",{style:{width:"100%",textAlign:"left",borderCollapse:"collapse",fontSize:"0.9rem"},children:[a("thead",{children:a("tr",{style:{background:"#eee",borderBottom:"2px solid #ddd"},children:[Array.isArray(t.inputLabels)?t.inputLabels.map((c,u)=>a("th",{style:{padding:"8px"},children:c},u)):a("th",{style:{padding:"8px"},children:["Input (",t.inputLabel,")"]}),a("th",{style:{padding:"8px"},children:r?"Spam?":"Target"}),e.length>0&&e[0].text&&a("th",{style:{padding:"8px"},children:"Email Text"})]})}),a("tbody",{children:e.map((c,u)=>{let f="transparent",d=c.target,g={padding:"8px"};if(r){const l=c.target===1;f=l?"#ffebee":"#e8f5e9",d=l?"SPAM":"HAM",g={...g,fontWeight:"bold",color:l?"#c0392b":"#27ae60"}}else d=typeof c.target=="number"?c.target.toFixed(2):c.target;return a("tr",{style:{background:f,borderBottom:"1px solid #ddd"},children:[Array.isArray(c.input)?c.input.map((l,x)=>a("td",{style:{padding:"8px"},children:l.toFixed(0)},x)):a("td",{style:{padding:"8px"},children:c.input.toFixed(2)}),a("td",{style:g,children:d}),c.text&&a("td",{style:{padding:"8px",color:"#555",fontStyle:"italic",maxWidth:"300px",whiteSpace:"pre-line",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s(c.text,2)})]},u)})})]})})}function ge({hookState:e,renderSimulationView:t,renderDataView:n,networkVizProps:i={},simulationEnabled:r=!0,customDataHandling:s=!1}){const{simConfig:c,activeTab:u,setActiveTab:f,trainingHistory:d,trainingStepIndex:g,isTraining:l,dataViewMode:x,setDataViewMode:p,trainingData:_,groundTruth:y,neuralNet:b,time:C,statusMsg:$,handleTrain:O,handleRun:N,isRunning:J,trainerType:V,setTrainerType:B,currentInput:A}=e,[h,S]=ot(null),v=I=>{S(E=>E===I?null:I)},m={position:"absolute",top:"10px",right:"10px",zIndex:10,background:"rgba(255, 255, 255, 0.9)",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"0px"},P="all 0.4s cubic-bezier(0.4, 0, 0.2, 1)";Tt(()=>{!r&&u==="simulation"&&f("data")},[r,u,f]);const F=A!==void 0?A:c.getInput?c.getInput(C):C,M=c.networkViz||{};return a("div",{className:"nn-demonstrator layout-container",style:{display:"flex",flexDirection:"column",height:"100%"},children:[a("div",{className:"top-section",style:{display:"flex",gap:h?"0px":"20px",flexWrap:"nowrap",alignItems:"stretch",height:h?"calc(100vh - 200px)":"auto",minHeight:"500px",transition:P,marginBottom:"20px"},children:[a("div",{className:"simulation-wrapper",style:{flex:h==="simulation"?"1 0 100%":h==="network"?"0 0 0%":"1 1 500px",opacity:h==="network"?0:1,overflow:"hidden",maxWidth:h==="network"?"0px":"100%",transition:P,position:"relative",display:"flex",flexDirection:"column"},children:[a("button",{onClick:()=>v("simulation"),style:m,title:h==="simulation"?"Original Size":"Maximize",children:h==="simulation"?a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M4 14h6v6"}),a("path",{d:"M20 10h-6V4"}),a("path",{d:"M14 10l7-7"}),a("path",{d:"M3 21l7-7"})]}):a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M15 3h6v6"}),a("path",{d:"M9 21H3v-6"}),a("path",{d:"M21 3l-7 7"}),a("path",{d:"M3 21l7-7"})]})}),a("div",{className:"simulation-section",style:{height:"100%",display:"flex",flexDirection:"column"},children:[a("div",{className:"tabs",style:{paddingRight:"120px"},children:[r&&a("button",{className:`tab-button ${u==="simulation"?"active":""}`,onClick:()=>f("simulation"),children:"Simulation"}),a("button",{className:`tab-button ${u==="data"?"active":""}`,onClick:()=>f("data"),children:"Data"}),a("button",{className:`tab-button ${u==="training"?"active":""}`,onClick:()=>f("training"),children:"Training"})]}),a("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u==="simulation"&&a(xt,{children:[t(),a("div",{className:"stats",style:{marginTop:"auto",paddingTop:"10px"},children:[a("p",{children:c.description}),a("p",{style:{color:"#646cff",fontWeight:"bold"},children:["Status: ",$]})]})]}),u==="data"&&a("div",{className:"data-content",style:{flex:1,overflowY:"auto"},children:s?n?n():a("p",{children:"No data view available."}):a(xt,{children:[!["gallery"].includes(c.id)&&a("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:a(Rt,{viewMode:x,onChange:p})}),a("div",{style:{marginTop:"15px"},children:[x==="plot"&&a("div",{style:{marginBottom:"20px"},children:n?n():a("p",{children:"No graph available."})}),x==="table"&&a(Kt,{data:_,vizProps:M,simConfig:c,maximizedPanel:h})]})]})}),u==="training"&&a("div",{className:"training-content",style:{flex:1},children:d.length>0?a(Un,{history:d,currentStepIndex:g,isTraining:l,paramsConfig:c.trainingConfig.params,showAccuracyPlot:c.trainingConfig?.showAccuracyPlot??!0}):a("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No training started yet."})})]})]})]}),a("div",{className:"network-wrapper",style:{flex:h==="network"?"1 0 100%":h==="simulation"?"0 0 0%":`0 0 ${c.id==="spam_hidden","500px"}`,opacity:h==="simulation"?0:1,overflow:"hidden",maxWidth:h==="simulation"?"0px":"100%",transition:P,position:"relative",display:"flex",flexDirection:"column"},children:[a("button",{onClick:()=>v("network"),style:m,title:h==="network"?"Original Size":"Maximize",children:h==="network"?a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M4 14h6v6"}),a("path",{d:"M20 10h-6V4"}),a("path",{d:"M14 10l7-7"}),a("path",{d:"M3 21l7-7"})]}):a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M15 3h6v6"}),a("path",{d:"M9 21H3v-6"}),a("path",{d:"M21 3l-7 7"}),a("path",{d:"M3 21l7-7"})]})}),a("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:a(pn,{input:F,weight:b.current?b.current.weights||b.current.weight:0,bias:b.current?b.current.bias:0,output:b.current?b.current.predict(F):0,model:b.current,formula:M.formula,inputLabel:M.inputLabels||M.inputLabel,outputLabel:M.outputLabel,biasLabel:M.biasLabel,decimals:c.id.includes("spam")?0:1})})]})]}),a(ai,{onTrain:O,onRun:N,isTraining:l,trainingStep:g,dataCount:_.length,trainerType:V,onTrainerTypeChange:B,simConfig:c,isRunning:J,simulationEnabled:r})]})}function li({data:e,groundTruth:t,neuralNet:n}){const i=bt(null);return Tt(()=>{const r=i.current;if(!r)return;const s=r.getContext("2d"),c=r.width,u=r.height;if(s.clearRect(0,0,c,u),!e||e.length===0){s.fillStyle="#999",s.textAlign="center",s.fillText("No data available",c/2,u/2);return}const f=40,d=c-2*f,g=u-2*f,l=Math.max(...e.map(y=>y.input))||10,x=Math.max(...e.map(y=>y.target))||100,p=y=>f+y/l*d,_=y=>u-f-y/x*g;if(s.beginPath(),s.strokeStyle="#333",s.moveTo(f,f),s.lineTo(f,u-f),s.lineTo(c-f,u-f),s.stroke(),s.fillStyle="#333",s.textAlign="center",s.fillText("Time (t)",c/2,u-10),s.save(),s.translate(15,u/2),s.rotate(-Math.PI/2),s.fillText("Position (s)",0,0),s.restore(),e.forEach(y=>{const b=p(y.input),C=_(y.target);s.beginPath(),s.arc(b,C,3,0,Math.PI*2),s.fillStyle="#2ecc71",s.fill()}),n){s.beginPath(),s.strokeStyle="#e74c3c",s.lineWidth=2;for(let y=0;y<=l;y+=.1){const b=n.predict(y),C=p(y),$=_(b);y===0?s.moveTo(C,$):s.lineTo(C,$)}s.stroke()}},[e,t,n]),a("div",{style:{border:"1px solid #ccc",margin:"10px 0",borderRadius:"4px"},children:a("canvas",{ref:i,width:600,height:300,style:{width:"100%",display:"block"}})})}function ci(){const e=pe("linear_regression"),{simConfig:t,trainingData:n,groundTruth:i,trainingHistory:r,neuralNet:s,time:c,currentInput:u}=e;if(!t)return a("div",{className:"loading",children:"Loading Simulation..."});const f=t.CanvasComponent;return a(ge,{hookState:e,renderSimulationView:()=>{let l=0;try{if(s.current){const x=u!==void 0?u:c;l=s.current.predict(x)}}catch(x){console.error("Predict Error",x)}return a("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px"},children:a(f,{time:c,data:n,currentInput:u!==void 0?u:c,currentPrediction:l,groundTruth:i.current,neuralNet:s.current})})},renderDataView:()=>{const{dataViewMode:l,setDataViewMode:x}=e;return a("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%"},children:l==="table"?a(xt,{children:[a("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:a(Rt,{viewMode:l,onChange:x})}),a(Kt,{data:n,vizProps:t.networkViz||{},simConfig:t})]}):a(xt,{children:[a("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:a(Rt,{viewMode:l,onChange:x})}),a(li,{data:n,groundTruth:i.current,neuralNet:r.length>0?s.current:null})]})})},customDataHandling:!0})}function ui(){const e=pe("logistic_regression"),{simConfig:t,trainingData:n,groundTruth:i,trainingHistory:r,neuralNet:s}=e;if(!t)return a("div",{className:"loading",children:"Loading Simulation..."});const c=t.CanvasComponent;return a(ge,{hookState:e,renderSimulationView:()=>a("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",border:"2px dashed #ddd",borderRadius:"8px",minHeight:"300px"},children:a("p",{style:{color:"#999"},children:'Data visualization is now in the "Data" tab'})}),renderDataView:()=>{const{dataViewMode:d,setDataViewMode:g}=e,l={staticMode:!0,showGroundTruth:!0,showModel:r.length>0};return t.featuresConfig&&(l.features=t.featuresConfig),a("div",{style:{padding:"10px 0",display:"flex",flexDirection:"column",width:"100%"},children:d==="table"?a(xt,{children:[a("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:a(Rt,{viewMode:d,onChange:g})}),a(Kt,{data:n,vizProps:t.networkViz||{},simConfig:t})]}):a(xt,{children:[a("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:a(Rt,{viewMode:d,onChange:g})}),a(c,{time:0,data:n,groundTruth:i.current,neuralNet:s.current,showProbabilities:!0,...l})]})})},simulationEnabled:!1,customDataHandling:!0})}function _e({simId:e}){const t=pe(e),{simConfig:n,trainingData:i,groundTruth:r,trainingHistory:s,neuralNet:c,time:u,currentInput:f,dataViewMode:d,setDataViewMode:g}=t;if(!n)return a("div",{className:"loading",children:"Loading Simulation..."});const l=n.CanvasComponent,x=a(Rt,{viewMode:d,onChange:g});return a(ge,{hookState:t,renderSimulationView:()=>{let y=0;try{c.current&&f&&(y=c.current.predict(f))}catch(C){console.error("Predict Error",C)}const b={allowedModes:["text"],hideControls:!0,features:n.featuresConfig};return a("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px"},children:a(l,{time:u,data:i,currentInput:f,currentPrediction:y,groundTruth:r.current,neuralNet:c.current,...b})})},renderDataView:()=>{const y={allowedModes:["scatter","3d","features"],showModel:s.length>0,additionalControls:x,features:n.featuresConfig};return a("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px",width:"100%"},children:d==="table"?a(xt,{children:[a("div",{style:{marginBottom:"15px"},children:a(Rt,{viewMode:d,onChange:g})}),a(Kt,{data:i,vizProps:n.networkViz||{},simConfig:n})]}):a(l,{time:0,data:i,groundTruth:r.current,neuralNet:c.current,...y})})},simulationEnabled:!1,customDataHandling:!0})}function hi(){return a(_e,{simId:"multiple_inputs"})}function di(){return a(_e,{simId:"single_layer_nonlinear"})}function fi(){return a(_e,{simId:"double_layer_nonlinear"})}function pi(){const[e,t]=ot(0),n=[{name:"Simple Perceptron",input:.5,weight:.8,bias:.2,output:.6,inputLabel:"Input",formula:"y = w * x + b"},{name:"Spam Filter (2 Inputs)",input:[1,0],weight:[.5,-.2],bias:.1,output:.8,inputLabel:["Spam Word","Suspicious Link"],formula:"y = w1*x1 + w2*x2 + b"},{name:"Complex Model (5 Inputs)",input:[1,.5,-1,0,.2],weight:[.1,.2,.3,.4,.5],bias:-.5,output:.1,inputLabel:["F1","F2","F3","F4","F5"],formula:"y = Σ(wi*xi) + b"},{name:"Many Inputs (8 Inputs)",input:[1,0,1,0,1,0,1,0],weight:[.1,-.1,.1,-.1,.1,-.1,.1,-.1],bias:0,output:.5,inputLabel:["I1","I2","I3","I4","I5","I6","I7","I8"],formula:"y = ... "}],i=n[e];return a("div",{style:{padding:"20px"},children:[a("h2",{children:"Architecture Gallery"}),a("div",{style:{marginBottom:"20px"},children:[a("button",{onClick:()=>t((e-1+n.length)%n.length),children:"Previous"}),a("span",{style:{margin:"0 10px"},children:[i.name," (",e+1,"/",n.length,")"]}),a("button",{onClick:()=>t((e+1)%n.length),children:"Next"})]}),a("div",{style:{width:"400px",border:"1px dashed #ccc",padding:"10px"},children:a(pn,{input:i.input,weight:i.weight,bias:i.bias,output:i.output,formula:i.formula,inputLabel:i.inputLabel})})]})}function gi(){const[e,t]=ot(null);return Tt(()=>{const r=new URLSearchParams(window.location.search).get("sim")||"linear_regression";t(r)},[]),e?e==="gallery"?a("div",{className:"container",children:[a("header",{children:[a("h1",{children:"Neural Network Demonstrator"}),a("p",{children:"Architecture Gallery (Debug)"}),a("nav",{className:"sim-selector","aria-label":"Debug Navigation",style:{fontSize:"0.8rem",marginTop:"5px"},children:a("a",{href:"?sim=linear_regression",style:{marginRight:"10px"},children:"Back to App"})})]}),a("main",{children:a(pi,{})})]}):a("div",{className:"container",children:[a("header",{children:[a("h1",{children:"Neural Network Demonstrator"}),a("p",{children:(i=>{switch(i){case"linear_regression":return"Phase 1: Linear Regression";case"logistic_regression":return"Phase 2: Logistic Regression";case"multiple_inputs":return"Phase 3: Multiple Inputs";case"single_layer_nonlinear":return"Phase 4: Single Layer Nonlinear Data";case"double_layer_nonlinear":return"Phase 5: Double Layer Nonlinear Data";default:return"Neural Network Demonstrator"}})(e)}),a("nav",{className:"sim-selector","aria-label":"Phase Navigation",style:{fontSize:"0.8rem",marginTop:"5px"},children:[a("a",{href:"?sim=linear_regression","aria-current":e==="linear_regression"?"page":void 0,style:{marginRight:"10px",fontWeight:e==="linear_regression"?"bold":"normal"},children:"Phase 1 (Linear)"}),a("a",{href:"?sim=logistic_regression","aria-current":e==="logistic_regression"?"page":void 0,style:{marginRight:"10px",fontWeight:e==="logistic_regression"?"bold":"normal"},children:"Phase 2 (Logistic)"}),a("a",{href:"?sim=multiple_inputs","aria-current":e==="multiple_inputs"?"page":void 0,style:{marginRight:"10px",fontWeight:e==="multiple_inputs"?"bold":"normal"},children:"Phase 3 (Multi)"}),a("a",{href:"?sim=single_layer_nonlinear","aria-current":e==="single_layer_nonlinear"?"page":void 0,style:{marginRight:"10px",fontWeight:e==="single_layer_nonlinear"?"bold":"normal"},children:"Phase 4 (Nonlinear 1)"}),a("a",{href:"?sim=double_layer_nonlinear","aria-current":e==="double_layer_nonlinear"?"page":void 0,style:{fontWeight:e==="double_layer_nonlinear"?"bold":"normal"},children:"Phase 5 (Nonlinear 2)"})]})]}),a("main",{style:{height:"100%"},children:[e==="linear_regression"&&a(ci,{}),e==="logistic_regression"&&a(ui,{}),e==="multiple_inputs"&&a(hi,{}),e==="single_layer_nonlinear"&&a(di,{}),e==="double_layer_nonlinear"&&a(fi,{})]})]}):a("div",{children:"Loading App..."})}Cn(a(gi,{}),document.getElementById("app"));
