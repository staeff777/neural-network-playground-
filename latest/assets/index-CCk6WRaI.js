(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var It,et,_e,Mt,Jt,xe,ye,be,Gt,Ht,Yt,At={},ve=[],De=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function yt(e,t){for(var n in t)e[n]=t[n];return e}function Ut(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ie(e,t,n){var i,r,s,h={};for(s in t)s=="key"?i=t[s]:s=="ref"?r=t[s]:h[s]=t[s];if(arguments.length>2&&(h.children=arguments.length>3?It.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)h[s]===void 0&&(h[s]=e.defaultProps[s]);return Lt(e,h,i,r,null)}function Lt(e,t,n,i,r){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++_e,__i:-1,__u:0};return r==null&&et.vnode!=null&&et.vnode(s),s}function _t(e){return e.children}function Rt(e,t){this.props=e,this.context=t}function Tt(e,t){if(t==null)return e.__?Tt(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Tt(e):null}function we(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return we(e)}}function Qt(e){(!e.__d&&(e.__d=!0)&&Mt.push(e)&&!$t.__r++||Jt!=et.debounceRendering)&&((Jt=et.debounceRendering)||xe)($t)}function $t(){for(var e,t,n,i,r,s,h,f=1;Mt.length;)Mt.length>f&&Mt.sort(ye),e=Mt.shift(),f=Mt.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,s=[],h=[],t.__P&&((n=yt({},i)).__v=i.__v+1,et.vnode&&et.vnode(n),jt(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,s,r??Tt(i),!!(32&i.__u),h),n.__v=i.__v,n.__.__k[n.__i]=n,Se(s,n,h),i.__e=i.__=null,n.__e!=r&&we(n)));$t.__r=0}function Me(e,t,n,i,r,s,h,f,p,u,l){var d,_,g,y,k,v,A,x=i&&i.__k||ve,V=t.length;for(p=Ne(n,t,x,p,V),d=0;d<V;d++)(g=n.__k[d])!=null&&(_=g.__i==-1?At:x[g.__i]||At,g.__i=d,v=jt(e,g,_,r,s,h,f,p,u,l),y=g.__e,g.ref&&_.ref!=g.ref&&(_.ref&&Ot(_.ref,null,g),l.push(g.ref,g.__c||y,g)),k==null&&y!=null&&(k=y),(A=!!(4&g.__u))||_.__k===g.__k?p=ke(g,p,e,A):typeof g.type=="function"&&v!==void 0?p=v:y&&(p=y.nextSibling),g.__u&=-7);return n.__e=k,p}function Ne(e,t,n,i,r){var s,h,f,p,u,l=n.length,d=l,_=0;for(e.__k=new Array(r),s=0;s<r;s++)(h=t[s])!=null&&typeof h!="boolean"&&typeof h!="function"?(typeof h=="string"||typeof h=="number"||typeof h=="bigint"||h.constructor==String?h=e.__k[s]=Lt(null,h,null,null,null):Nt(h)?h=e.__k[s]=Lt(_t,{children:h},null,null,null):h.constructor==null&&h.__b>0?h=e.__k[s]=Lt(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):e.__k[s]=h,p=s+_,h.__=e,h.__b=e.__b+1,f=null,(u=h.__i=Fe(h,n,p,d))!=-1&&(d--,(f=n[u])&&(f.__u|=2)),f==null||f.__v==null?(u==-1&&(r>l?_--:r<l&&_++),typeof h.type!="function"&&(h.__u|=4)):u!=p&&(u==p-1?_--:u==p+1?_++:(u>p?_--:_++,h.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<l;s++)(f=n[s])!=null&&(2&f.__u)==0&&(f.__e==i&&(i=Tt(f)),Pe(f,f));return i}function ke(e,t,n,i){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=ke(r[s],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=Tt(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Fe(e,t,n,i){var r,s,h,f=e.key,p=e.type,u=t[n],l=u!=null&&(2&u.__u)==0;if(u===null&&f==null||l&&f==u.key&&p==u.type)return n;if(i>(l?1:0)){for(r=n-1,s=n+1;r>=0||s<t.length;)if((u=t[h=r>=0?r--:s++])!=null&&(2&u.__u)==0&&f==u.key&&p==u.type)return h}return-1}function te(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||De.test(t)?n:n+"px"}function Wt(e,t,n,i,r){var s,h;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||te(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||te(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(be,"$1")),h=t.toLowerCase(),t=h in e||t=="onFocusOut"||t=="onFocusIn"?h.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=Gt,e.addEventListener(t,s?Yt:Ht,s)):e.removeEventListener(t,s?Yt:Ht,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ee(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Gt++;else if(t.t<n.u)return;return n(et.event?et.event(t):t)}}}function jt(e,t,n,i,r,s,h,f,p,u){var l,d,_,g,y,k,v,A,x,V,D,N,z,M,c,L,w,m=t.type;if(t.constructor!=null)return null;128&n.__u&&(p=!!(32&n.__u),s=[f=t.__e=n.__e]),(l=et.__b)&&l(t);t:if(typeof m=="function")try{if(A=t.props,x="prototype"in m&&m.prototype.render,V=(l=m.contextType)&&i[l.__c],D=l?V?V.props.value:l.__:i,n.__c?v=(d=t.__c=n.__c).__=d.__E:(x?t.__c=d=new m(A,D):(t.__c=d=new Rt(A,D),d.constructor=m,d.render=He),V&&V.sub(d),d.state||(d.state={}),d.__n=i,_=d.__d=!0,d.__h=[],d._sb=[]),x&&d.__s==null&&(d.__s=d.state),x&&m.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=yt({},d.__s)),yt(d.__s,m.getDerivedStateFromProps(A,d.__s))),g=d.props,y=d.state,d.__v=t,_)x&&m.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),x&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(x&&m.getDerivedStateFromProps==null&&A!==g&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(A,D),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(A,d.__s,D)===!1){for(t.__v!=n.__v&&(d.props=A,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(C){C&&(C.__=t)}),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[],d.__h.length&&h.push(d);break t}d.componentWillUpdate!=null&&d.componentWillUpdate(A,d.__s,D),x&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(g,y,k)})}if(d.context=D,d.props=A,d.__P=e,d.__e=!1,z=et.__r,M=0,x){for(d.state=d.__s,d.__d=!1,z&&z(t),l=d.render(d.props,d.state,d.context),c=0;c<d._sb.length;c++)d.__h.push(d._sb[c]);d._sb=[]}else do d.__d=!1,z&&z(t),l=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++M<25);d.state=d.__s,d.getChildContext!=null&&(i=yt(yt({},i),d.getChildContext())),x&&!_&&d.getSnapshotBeforeUpdate!=null&&(k=d.getSnapshotBeforeUpdate(g,y)),L=l,l!=null&&l.type===_t&&l.key==null&&(L=Te(l.props.children)),f=Me(e,Nt(L)?L:[L],t,n,i,r,s,h,f,p,u),d.base=t.__e,t.__u&=-161,d.__h.length&&h.push(d),v&&(d.__E=d.__=null)}catch(C){if(t.__v=null,p||s!=null)if(C.then){for(t.__u|=p?160:128;f&&f.nodeType==8&&f.nextSibling;)f=f.nextSibling;s[s.indexOf(f)]=null,t.__e=f}else{for(w=s.length;w--;)Ut(s[w]);Vt(t)}else t.__e=n.__e,t.__k=n.__k,C.then||Vt(t);et.__e(C,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):f=t.__e=Be(n.__e,t,n,i,r,s,h,p,u);return(l=et.diffed)&&l(t),128&t.__u?void 0:f}function Vt(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Vt)}function Se(e,t,n){for(var i=0;i<n.length;i++)Ot(n[i],n[++i],n[++i]);et.__c&&et.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){et.__e(s,r.__v)}})}function Te(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Nt(e)?e.map(Te):yt({},e)}function Be(e,t,n,i,r,s,h,f,p){var u,l,d,_,g,y,k,v=n.props||At,A=t.props,x=t.type;if(x=="svg"?r="http://www.w3.org/2000/svg":x=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((g=s[u])&&"setAttribute"in g==!!x&&(x?g.localName==x:g.nodeType==3)){e=g,s[u]=null;break}}if(e==null){if(x==null)return document.createTextNode(A);e=document.createElementNS(r,x,A.is&&A),f&&(et.__m&&et.__m(t,s),f=!1),s=null}if(x==null)v===A||f&&e.data==A||(e.data=A);else{if(s=s&&It.call(e.childNodes),!f&&s!=null)for(v={},u=0;u<e.attributes.length;u++)v[(g=e.attributes[u]).name]=g.value;for(u in v)if(g=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=g;else if(!(u in A)){if(u=="value"&&"defaultValue"in A||u=="checked"&&"defaultChecked"in A)continue;Wt(e,u,null,g,r)}}for(u in A)g=A[u],u=="children"?_=g:u=="dangerouslySetInnerHTML"?l=g:u=="value"?y=g:u=="checked"?k=g:f&&typeof g!="function"||v[u]===g||Wt(e,u,g,v[u],r);if(l)f||d&&(l.__html==d.__html||l.__html==e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),Me(t.type=="template"?e.content:e,Nt(_)?_:[_],t,n,i,x=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,h,s?s[0]:n.__k&&Tt(n,0),f,p),s!=null)for(u=s.length;u--;)Ut(s[u]);f||(u="value",x=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[u]||x=="progress"&&!y||x=="option"&&y!=v[u])&&Wt(e,u,y,v[u],r),u="checked",k!=null&&k!=e[u]&&Wt(e,u,k,v[u],r))}return e}function Ot(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){et.__e(r,n)}}function Pe(e,t,n){var i,r;if(et.unmount&&et.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Ot(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){et.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Pe(i[r],t,n||typeof e.type!="function");n||Ut(e.__e),e.__c=e.__=e.__e=void 0}function He(e,t,n){return this.constructor(e,n)}function Ye(e,t,n){var i,r,s,h;t==document&&(t=document.documentElement),et.__&&et.__(e,t),r=(i=!1)?null:t.__k,s=[],h=[],jt(t,e=t.__k=Ie(_t,null,[e]),r||At,At,t.namespaceURI,r?null:t.firstChild?It.call(t.childNodes):null,s,r?r.__e:t.firstChild,i,h),Se(s,e,h)}It=ve.slice,et={__e:function(e,t,n,i){for(var r,s,h;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),h=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),h=r.__d),h)return r.__E=r}catch(f){e=f}throw e}},_e=0,Rt.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=yt({},this.state),typeof e=="function"&&(e=e(yt({},n),this.props)),e&&yt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Qt(this))},Rt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Qt(this))},Rt.prototype.render=_t,Mt=[],xe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ye=function(e,t){return e.__v.__b-t.__v.__b},$t.__r=0,be=/(PointerCapture)$|Capture$/i,Gt=0,Ht=ee(!1),Yt=ee(!0);var Ve=0;function a(e,t,n,i,r,s){t||(t={});var h,f,p=t;if("ref"in p)for(f in p={},t)f=="ref"?h=t[f]:p[f]=t[f];var u={type:e,props:p,key:n,ref:h,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ve,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(h=e.defaultProps))for(f in h)p[f]===void 0&&(p[f]=h[f]);return et.vnode&&et.vnode(u),u}var Ct,lt,Ft,ne,Et=0,Ae=[],dt=et,ie=dt.__b,se=dt.__r,oe=dt.diffed,re=dt.__c,ae=dt.unmount,le=dt.__;function Kt(e,t){dt.__h&&dt.__h(lt,e,Et||t),Et=0;var n=lt.__H||(lt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ot(e){return Et=1,Xe(We,e)}function Xe(e,t,n){var i=Kt(Ct++,2);if(i.t=e,!i.__c&&(i.__=[We(void 0,t),function(f){var p=i.__N?i.__N[0]:i.__[0],u=i.t(p,f);p!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=lt,!lt.__f)){var r=function(f,p,u){if(!i.__c.__H)return!0;var l=i.__c.__H.__.filter(function(_){return!!_.__c});if(l.every(function(_){return!_.__N}))return!s||s.call(this,f,p,u);var d=i.__c.props!==f;return l.forEach(function(_){if(_.__N){var g=_.__[0];_.__=_.__N,_.__N=void 0,g!==_.__[0]&&(d=!0)}}),s&&s.call(this,f,p,u)||d};lt.__f=!0;var s=lt.shouldComponentUpdate,h=lt.componentWillUpdate;lt.componentWillUpdate=function(f,p,u){if(this.__e){var l=s;s=void 0,r(f,p,u),s=l}h&&h.call(this,f,p,u)},lt.shouldComponentUpdate=r}return i.__N||i.__}function bt(e,t){var n=Kt(Ct++,3);!dt.__s&&Ce(n.__H,t)&&(n.__=e,n.u=t,lt.__H.__h.push(n))}function pt(e){return Et=5,Ge(function(){return{current:e}},[])}function Ge(e,t){var n=Kt(Ct++,7);return Ce(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Ue(){for(var e;e=Ae.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(zt),e.__H.__h.forEach(Xt),e.__H.__h=[]}catch(t){e.__H.__h=[],dt.__e(t,e.__v)}}dt.__b=function(e){lt=null,ie&&ie(e)},dt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),le&&le(e,t)},dt.__r=function(e){se&&se(e),Ct=0;var t=(lt=e.__c).__H;t&&(Ft===lt?(t.__h=[],lt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(zt),t.__h.forEach(Xt),t.__h=[],Ct=0)),Ft=lt},dt.diffed=function(e){oe&&oe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ae.push(t)!==1&&ne===dt.requestAnimationFrame||((ne=dt.requestAnimationFrame)||je)(Ue)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ft=lt=null},dt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(zt),n.__h=n.__h.filter(function(i){return!i.__||Xt(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],dt.__e(i,n.__v)}}),re&&re(e,t)},dt.unmount=function(e){ae&&ae(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{zt(i)}catch(r){t=r}}),n.__H=void 0,t&&dt.__e(t,n.__v))};var ce=typeof requestAnimationFrame=="function";function je(e){var t,n=function(){clearTimeout(i),ce&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);ce&&(t=requestAnimationFrame(n))}function zt(e){var t=lt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),lt=t}function Xt(e){var t=lt;e.__c=e.__(),lt=t}function Ce(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function We(e,t){return typeof t=="function"?t(e):t}class Oe{constructor(t){this.model=t}train(t,n,i){if(i!==void 0)return this.trainLegacy(t,n,i);const r=n,s=[];let h=1/0,f={};const p=l=>{const d=[];if(l.step<=0)return[l.min];for(let _=l.min;_<=l.max+1e-4;_+=l.step)d.push(parseFloat(_.toFixed(2)));return d},u=(l,d)=>{if(console.log({paramIndex:l,currentParams:d}),l===r.length){const y=[];let k=0;d.forEach((D,N)=>{r[N].name.toLowerCase().includes("bias")?k=D:y.push(D)}),this.model.setWeights?this.model.setWeights(y):this.model.setWeight&&this.model.setWeight(y[0]),this.model.setBias(k);let v=0,A=0;for(const D of t){const N=this.model.predict(D.input),z=D.target-N;v+=z*z,A+=Math.abs(z)}const x=v/t.length,V=A/t.length;x<h&&(h=x,f={weights:[...y],bias:k}),s.push({params:[...d],error:x,mae:V});return}const _=r[l],g=p(_);for(const y of g)d[l]=y,u(l+1,d)};return u(0,new Array(r.length)),{bestParams:f,history:s,minError:h}}trainLegacy(t,n,i){const r=[];let s=n.min,h=i.min,f=1/0;for(let p=n.min;p<=n.max;p+=n.step)for(let u=i.min;u<=i.max;u+=i.step){const l=parseFloat(p.toFixed(2)),d=parseFloat(u.toFixed(2));this.model.setWeight(l),this.model.setBias(d);let _=0,g=0;for(const v of t){const A=this.model.predict(v.input),x=v.target-A;_+=x*x,g+=Math.abs(x)}const y=_/t.length,k=g/t.length;y<f&&(f=y,s=l,h=d),r.push({weight:l,bias:d,error:y,mae:k})}return{bestWeight:s,bestBias:h,history:r}}async trainAsync(t,n,i){if(!Array.isArray(n)){const g=arguments[1],y=arguments[2],k=arguments[3];let v=g.min,A=y.min,x=1/0,V=[];const D=20;let N=0;for(let z=g.min;z<=g.max;z+=g.step)for(let M=y.min;M<=y.max;M+=y.step){const c=parseFloat(z.toFixed(2)),L=parseFloat(M.toFixed(2));this.model.setWeight(c),this.model.setBias(L);let w=0,m=0;for(const E of t){const X=this.model.predict(E.input),G=E.target-X;w+=G*G,m+=Math.abs(G)}const C=w/t.length,T=m/t.length;C<x&&(x=C,v=c,A=L);const F={weight:c,bias:L,error:C,mae:T};V.push(F),N++,N%D===0&&(k&&k(V,{bestWeight:v,bestBias:A,minError:x}),V=[],await new Promise(E=>setTimeout(E,0)))}return V.length>0&&k&&k(V,{bestWeight:v,bestBias:A,minError:x}),{bestWeight:v,bestBias:A,minError:x}}let s=1/0,h={},f=0;const p=50;let u=[];const l=g=>{const y=[];if(g.step<=0)return[g.min];for(let k=g.min;k<=g.max+1e-4;k+=g.step)y.push(parseFloat(k.toFixed(2)));return y},d=n.map(l),_=async(g,y)=>{if(g===n.length){const v=[];let A=0;y.forEach((c,L)=>{n[L].name.toLowerCase().includes("bias")?A=c:v.push(c)});let x={};this.model.setParams?(y.forEach((c,L)=>{x[n[L].name]=c}),this.model.setParams(x),A===void 0&&(A=0)):(this.model.setWeights?this.model.setWeights(v):this.model.setWeight&&this.model.setWeight(v[0]),this.model.setBias(A),x={weights:[...v],bias:A});let V=0,D=0;for(const c of t){const L=this.model.predict(c.input),w=c.target-L;V+=w*w,D+=Math.abs(w)}const N=V/t.length,z=D/t.length;N<s&&(s=N,h=x);const M={params:[...y],error:N,mae:z};u.push(M),f++,f%p===0&&(i&&i(u,{bestParams:h,minError:s}),u=[],await new Promise(c=>setTimeout(c,0)));return}const k=d[g];for(const v of k)y[g]=v,await _(g+1,y)};return await _(0,new Array(n.length)),u.length>0&&i&&i(u,{bestParams:h,minError:s}),{bestParams:h,minError:s}}async trainRandomAsync(t,n,i,r={}){const{patience:s=5e3}=r,h=2e4,f=.8,p=.999,u=.8;let l=1/0,d={},_=n.map(N=>({min:N.min,max:N.max,span:N.max-N.min})),g=_.map(N=>N.min+Math.random()*N.span);const y=N=>{const z=[];let M=0;N.forEach((m,C)=>{n[C].name.toLowerCase().includes("bias")?M=m:z.push(m)});let c={};this.model.setParams?(N.forEach((m,C)=>{c[n[C].name]=m}),this.model.setParams(c)):(this.model.setWeights?this.model.setWeights(z):this.model.setWeight&&this.model.setWeight(z[0]),this.model.setBias(M),c={weights:z,bias:M});let L=0,w=0;for(const m of t){const C=this.model.predict(m.input),T=m.target-C;L+=T*T,w+=Math.abs(T)}return{mse:L/t.length,mae:w/t.length,decodedParams:c,weights:z,bias:M}};let k=y(g);l=k.mse,d=k.decodedParams?{...k.decodedParams,_array:[...g]}:{weights:k.weights,bias:k.bias,_array:[...g]},i&&i([{params:[...g],error:l,mae:k.mae}],{bestParams:d,minError:l}),await new Promise(N=>setTimeout(N,0));let v=[];const A=10;let x=l,V=[...g],D=0;for(let N=0;N<h;N++){const z=N<h*u;let M;if(z){const F=N/(h*u);M=f*(1-F*.6)}else M=f*.5*Math.pow(p,N-h*u);let c=!1;const L=[...V];let w=!1;for(;!w;)L.forEach((F,E)=>{if(Math.random()<.4)return;w=!0;const X=_[E];let G=!1;if(z){const R=X.span*.2,W=d._array&&Math.abs(F-d._array[E])<1e-9;W&&F<X.min+R&&(X.min-=X.span*.3,X.span=X.max-X.min,G=!0),W&&F>X.max-R&&(X.max+=X.span*.3,X.span=X.max-X.min,G=!0),G&&(c=!0)}let K=X.span*M;G&&(K=Math.max(K,X.span*.25));const b=K;let o=F+(Math.random()-.5)*2*b;o<X.min&&(o=X.min),o>X.max&&(o=X.max),L[E]=o});const m=y(L),C=m.mse-x;let T=!1;if(C<0&&(T=!0),T&&(V=L,x=m.mse),m.mse<l?(l=m.mse,d={weights:m.weights,bias:m.bias,_array:[...L]},D=0):D++,D>=s&&!z)break;if(v.push({params:[...L],error:m.mse,mae:m.mae}),v.length>=A){let F;c&&(F="Grenzen dynamisch erweitert..."),i&&i(v,{bestParams:d,minError:l,message:F}),v=[],await new Promise(E=>setTimeout(E,0))}}return v.length>0&&i&&i(v,{bestParams:d,minError:l}),{bestParams:d,minError:l}}}function Ke({history:e,currentStepIndex:t,isTraining:n,paramsConfig:i}){const r=pt(null),[s,h]=ot(0),f=6;bt(()=>{h(0)},[i]),bt(()=>{const u=r.current;if(!u||!e||e.length===0)return;const l=u.getContext("2d"),d=u.width,_=u.height;l.clearRect(0,0,d,_),l.fillStyle="#fff",l.fillRect(0,0,d,_);const g=Math.max(...e.map(z=>z.error)),k=!n&&e.length>0?e.length-1:t!==null&&t>=0?Math.min(t,e.length-1):-1;let v=-1,A=1/0;for(let z=0;z<=k;z++)e[z].error<A&&(A=e[z].error,v=z);let x=[];if(i){const z=1+i.length,M=s*f,c=Math.min(M+f,z),L=3,w=2,m=d/L,C=_/w;for(let T=M;T<c;T++){const F=T-M,E=F%L,X=Math.floor(F/L),G=E*m,K=X*C;if(T===0){const b=Math.max(10,e.length-1);x.push({type:"error_step",xLabel:"Training Step",xMin:0,xMax:b,getValue:(o,R)=>R,offsetX:G,offsetY:K,w:m,h:C})}else{const b=T-1,o=i[b],R=e.map(B=>B.params[b]),W=Math.min(...R),Z=Math.max(...R);x.push({type:"param_error",xLabel:o.name,xMin:W,xMax:Z,getValue:B=>B.params[b],offsetX:G,offsetY:K,w:m,h:C})}}}else{const z=d/3,M=_,c=e.map(m=>m.weight),L=e.map(m=>m.bias);x=[{type:"error_step",xLabel:"Training Step",xMin:0,xMax:Math.max(10,e.length-1),getValue:(m,C)=>C,offsetX:0,offsetY:0,w:z,h:M},{xLabel:"Weight",xMin:Math.min(...c),xMax:Math.max(...c),getValue:m=>m.weight,offsetX:z,offsetY:0,w:z,h:M},{xLabel:"Bias",xMin:Math.min(...L),xMax:Math.max(...L),getValue:m=>m.bias,offsetX:2*z,offsetY:0,w:z,h:M}]}const V=35;x.forEach(z=>{const{xLabel:M,xMin:c,xMax:L,getValue:w,offsetX:m,offsetY:C,w:T,h:F}=z,E=K=>C+F-V-K/(g||1)*(F-2*V),X=K=>m+V+(K-c)/(L-c||1)*(T-2*V);l.strokeStyle="#eee",l.strokeRect(m,C,T,F),l.beginPath(),l.strokeStyle="#333",l.lineWidth=1,l.moveTo(m+V,C+V),l.lineTo(m+V,C+F-V),l.lineTo(m+T-V,C+F-V),l.stroke(),l.fillStyle="#333",l.font="11px sans-serif",l.textAlign="center";let G=M;G.length>20&&(G=G.substring(0,18)+"..."),l.fillText(G,m+T/2,C+F-10),m===0&&(l.save(),l.translate(m+10,C+F/2),l.rotate(-Math.PI/2),l.fillText("Error",0,0),l.restore()),l.fillStyle="#666",l.font="9px sans-serif",l.fillText(c.toFixed(1),m+V,C+F-V+12),l.fillText(L.toFixed(1),m+T-V,C+F-V+12),l.fillStyle="rgba(52, 152, 219, 0.4)";for(let K=0;K<=k;K++){const b=w(e[K],K),o=X(b),R=E(e[K].error);l.fillRect(o,R,2,2)}if(v>=0){const K=w(e[v],v),b=X(K),o=E(e[v].error);l.beginPath(),l.fillStyle="#2ecc71",l.strokeStyle="#27ae60",l.arc(b,o,6,0,Math.PI*2),l.fill(),l.stroke()}if(n&&t!==null&&t>=0&&t<=k){const K=w(e[t],t),b=X(K),o=E(e[t].error);l.beginPath(),l.fillStyle="#e74c3c",l.strokeStyle="#c0392b",l.arc(b,o,5,0,Math.PI*2),l.fill(),l.stroke()}});const D=d-120,N=10;l.fillStyle="rgba(255,255,255,0.8)",l.fillRect(D,N,110,50),l.strokeStyle="#ccc",l.strokeRect(D,N,110,50),l.textAlign="left",l.font="10px sans-serif",l.beginPath(),l.fillStyle="#e74c3c",l.arc(D+10,N+15,4,0,Math.PI*2),l.fill(),l.fillStyle="#333",l.fillText("Current Scan",D+20,N+18),l.beginPath(),l.fillStyle="#2ecc71",l.arc(D+10,N+35,4,0,Math.PI*2),l.fill(),l.fillStyle="#333",l.fillText("Best So Far",D+20,N+38),!n&&v>=0&&(l.fillStyle="#333",l.font="bold 12px sans-serif",l.textAlign="right",l.fillText(`Min Error: ${A.toFixed(5)}`,d-10,_-10))},[e,t,n,i,s]);const p=i?Math.ceil((i.length+1)/f):1;return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff"},children:[a("canvas",{ref:r,width:800,height:400,style:{width:"100%",height:"auto"}}),p>1&&a("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px",gap:"10px"},children:[a("button",{onClick:()=>h(u=>Math.max(0,u-1)),disabled:s===0,children:"Previous"}),a("span",{style:{alignSelf:"center"},children:["Page ",s+1," of ",p]}),a("button",{onClick:()=>h(u=>Math.min(p-1,u+1)),disabled:s===p-1,children:"Next"})]})]})}function qe({model:e,inputs:t,inputLabels:n,output:i,outputLabel:r}){if(!e||!e.getTopology)return null;const{inputCount:s,hiddenCounts:h,outputCount:f,weights1:p,biases1:u,weights2:l}=e.getTopology();let d={hidden:[],output:[]};e.getActivations&&(d=e.getActivations(t));const _=600,g=400,y=g/2,k=_/2,v=350,A=280,x=k-v/2,V=k+v/2,D=[{count:s,x,labels:n,values:t},{count:h[0],x:k,values:d.hidden},{count:f,x:V,labels:[r],values:d.output}],N=Math.max(...D.map(w=>w.count)),z=Math.min(50,A/N),M=(w,m)=>{const T=(D[w].count-1)*z;return y-T/2+m*z},c=w=>{const m=Math.max(.2,Math.min(.8,Math.abs(w)/2));return w>0?`rgba(46, 204, 113, ${m})`:`rgba(231, 76, 60, ${m})`},L=w=>{const m=Math.max(0,Math.min(1,w)),C=Math.round(255+-203*m),T=Math.round(255+-103*m),F=Math.round(255+-36*m);return`rgb(${C},${T},${F})`};return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center"},children:[a("h3",{style:{marginBottom:"10px",fontSize:"1rem",color:"#555"},children:"Neural Network Activity"}),a("svg",{width:_,height:g,style:{overflow:"visible"},children:[a("rect",{x,y:y-A/2,width:v,height:A,rx:"15",fill:"none",stroke:"#333",strokeWidth:"3",strokeDasharray:"5,5"}),a("text",{x:k,y:y-A/2+20,textAnchor:"middle",fill:"#777",fontSize:"12",fontWeight:"bold",children:"NEURAL NETWORK"}),p.map((w,m)=>w.map((C,T)=>a("line",{x1:D[0].x,y1:M(0,T),x2:D[1].x,y2:M(1,m),stroke:c(C),strokeWidth:Math.max(1,Math.min(4,Math.abs(C)))},`L0-${T}-${m}`))),l.map((w,m)=>a("line",{x1:D[1].x,y1:M(1,m),x2:D[2].x,y2:M(2,0),stroke:c(w),strokeWidth:Math.max(1,Math.min(4,Math.abs(w)))},`L1-${m}-0`)),D.map((w,m)=>a("g",{children:Array.from({length:w.count}).map((C,T)=>{const F=w.x,E=M(m,T),X=w.values&&w.values[T]!==void 0?w.values[T]:0;return a("g",{children:[a("circle",{cx:F,cy:E,r:12,fill:L(X),stroke:"#333",strokeWidth:"1.5"}),w.labels&&a("text",{x:m===0?F-30:F+30,y:E,textAnchor:m===0?"end":"start",dominantBaseline:"middle",fontSize:"13",fontWeight:"bold",fill:"#333",children:w.labels[T]||""}),a("title",{children:X.toFixed(3)})]},`n-${m}-${T}`)})},`layer-${m}`)),a("g",{transform:`translate(${_-100}, ${g-50})`,children:[a("rect",{width:"90",height:"40",fill:"white",stroke:"#ccc",rx:"4"}),a("line",{x1:"10",y1:"10",x2:"30",y2:"10",stroke:"#2ecc71",strokeWidth:"3"}),a("text",{x:"35",y:"14",fontSize:"10",children:"Positive"}),a("line",{x1:"10",y1:"28",x2:"30",y2:"28",stroke:"#e74c3c",strokeWidth:"3"}),a("text",{x:"35",y:"32",fontSize:"10",children:"Negative"})]})]})]})}function Le({input:e,weight:t,bias:n,output:i,formula:r="y = w * x + b",inputLabel:s="Input",outputLabel:h="Output",biasLabel:f="b",decimals:p=1,model:u=null}){if(u&&u.getTopology){let G=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(G=e.input);const K=Array.isArray(G)?G:[G],b=Array.isArray(s)?s:[s];return a(qe,{model:u,inputs:K,inputLabels:b,output:i,outputLabel:h})}let l=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(l=e.input);const d=Array.isArray(l)?l:[l],_=Array.isArray(t)?t:[t],g=Array.isArray(s)?s:[s],y=Number(n)||0,k=Number(i)||0,v=d.length,A=24,x=90,V=300,D=60,N=60,z=Math.max(1,v-1)*x,M=Math.max(150,z+D+N),c=M+60,L=600,w=L/2,m=w-V/2,C=w+V/2,T=M/2+20,F=T-z/2,E=C-50,X=E-60;return a("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a("h3",{style:{marginBottom:"10px"},children:"Modell Architektur"}),a("svg",{width:L,height:c,style:{overflow:"visible"},children:[a("defs",{children:a("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"27",refY:"3.5",orient:"auto",children:a("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#333"})})}),a("rect",{x:m,y:20,width:V,height:M,rx:"15",fill:"none",stroke:"#333",strokeWidth:"3",strokeDasharray:"5,5"}),a("text",{x:w,y:40,textAnchor:"middle",fill:"#777",fontSize:"12",fontWeight:"bold",children:"NEURAL NETWORK"}),(()=>{const G=T-50;return a(_t,{children:[d.map((K,b)=>{const o=v>1?F+b*x:T,R=Number(_[b])||0,W=g[b]||`x${b+1}`,Z=Number(K)||0;return a("g",{children:[a("line",{x1:m,y1:o,x2:X,y2:T,stroke:"#999",strokeWidth:"1"}),a("g",{transform:`translate(${(m+X)/2+(b-(v-1)/2)*5}, ${(o+T)/2})`,children:[a("rect",{x:"-24",y:"-9",width:"50",height:"18",fill:"#fff",rx:"4",stroke:"#e0e0e0"}),a("text",{x:"0",y:"4",textAnchor:"middle",fill:"#e74c3c",fontSize:"10",fontWeight:"bold",children:R.toFixed(1)})]}),a("circle",{cx:m,cy:o,r:A,fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("text",{x:m-40,y:o,textAnchor:"end",dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",children:W}),a("text",{x:m,y:o,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fill:"#333",children:Z.toFixed(p)})]},b)}),a("line",{x1:X,y1:T,x2:E,y2:T,stroke:"#333",strokeWidth:"2"}),a("g",{transform:`translate(${E}, ${T})`,children:[a("rect",{x:"-18",y:"-18",width:"36",height:"36",rx:"6",fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("path",{d:"M -10 8 C -4 8, -4 -8, 10 -8",stroke:"#333",strokeWidth:"2",fill:"none"})]}),a("line",{x1:E+18,y1:T,x2:C-A,y2:T,stroke:"#333",strokeWidth:"2"}),a("path",{d:`M ${E-20} ${G} Q ${E-20} ${T} ${X+10} ${T}`,fill:"none",stroke:"#f39c12",strokeWidth:"1",markerEnd:"url(#arrowhead)"}),a("circle",{cx:E-20,cy:G,r:12,fill:"#f1c40f",stroke:"#f39c12"}),a("text",{x:E-23,y:G+5,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fontWeight:"bold",fill:"#fff",children:"b"}),a("text",{x:E-5,y:G+5,textAnchor:"start",dominantBaseline:"middle",fontSize:"12",fill:"#f39c12",fontWeight:"bold",children:y.toFixed(2)})]})})(),a("circle",{cx:C,cy:T,r:A,fill:"#fff",stroke:"#333",strokeWidth:"2"}),a("text",{x:C-14,y:T+4,textAnchor:"middle",dominantBaseline:"middle",fontWeight:"bold",fontSize:"12",children:k.toFixed(2)}),a("text",{x:C+40,y:T+4,textAnchor:"start",dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",fill:"#333",children:h}),a("text",{x:w,y:c-15,textAnchor:"middle",fontSize:"12",fontStyle:"italic",fill:"#777",children:r})]})]})}function Ze({data:e,groundTruth:t,neuralNet:n}){const i=pt(null);return bt(()=>{const r=i.current;if(!r)return;const s=r.getContext("2d"),h=r.width,f=r.height;if(s.clearRect(0,0,h,f),!e||e.length===0){s.fillStyle="#999",s.textAlign="center",s.fillText("Keine Daten vorhanden",h/2,f/2);return}const p=40,u=h-2*p,l=f-2*p,d=Math.max(...e.map(k=>k.input))||10,_=Math.max(...e.map(k=>k.target))||100,g=k=>p+k/d*u,y=k=>f-p-k/_*l;if(s.beginPath(),s.strokeStyle="#333",s.moveTo(p,p),s.lineTo(p,f-p),s.lineTo(h-p,f-p),s.stroke(),s.fillStyle="#333",s.textAlign="center",s.fillText("Zeit (t)",h/2,f-10),s.save(),s.translate(15,f/2),s.rotate(-Math.PI/2),s.fillText("Position (s)",0,0),s.restore(),e.forEach(k=>{const v=g(k.input),A=y(k.target);s.beginPath(),s.arc(v,A,3,0,Math.PI*2),s.fillStyle="#2ecc71",s.fill()}),n){s.beginPath(),s.strokeStyle="#e74c3c",s.lineWidth=2;for(let k=0;k<=d;k+=.1){const v=n.predict(k),A=g(k),x=y(v);k===0?s.moveTo(A,x):s.lineTo(A,x)}s.stroke()}},[e,t,n]),a("div",{style:{border:"1px solid #ccc",margin:"10px 0",borderRadius:"4px"},children:a("canvas",{ref:i,width:600,height:300,style:{width:"100%",display:"block"}})})}function Je({onTrain:e,onRun:t,onReset:n,isTraining:i,trainingStep:r,dataCount:s,trainerType:h,onTrainerTypeChange:f}){return a("div",{role:"region","aria-label":"Steuerung",style:{padding:"20px",background:"#eee",borderRadius:"8px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[a("span",{"aria-live":"polite",children:["Datenpunkte: ",s]}),a("div",{style:{borderLeft:"1px solid #ccc",paddingLeft:"10px",marginLeft:"10px",display:"flex",gap:"5px",alignItems:"center"},children:[a("select",{value:h,onChange:p=>f(p.target.value),disabled:i,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[a("option",{value:"exhaustive",children:"Grid Search (Genau)"}),a("option",{value:"random",children:"Adaptive Random (Schnell)"})]}),a("button",{onClick:e,disabled:i||s===0,"aria-busy":i,children:i?"Suche läuft...":"2. Trainieren"})]}),a("button",{onClick:t,disabled:i,children:"3. Simulation Starten"}),a("button",{onClick:n,style:{marginLeft:"auto",background:"#e74c3c",color:"white"},"aria-label":"Simulation zurücksetzen",children:"Reset"})]})}function Qe(){const[e,t]=ot(0),n=[{name:"Simple Perceptron",input:.5,weight:.8,bias:.2,output:.6,inputLabel:"Input",formula:"y = w * x + b"},{name:"Spam Filter (2 Inputs)",input:[1,0],weight:[.5,-.2],bias:.1,output:.8,inputLabel:["Spam Word","Suspicious Link"],formula:"y = w1*x1 + w2*x2 + b"},{name:"Complex Model (5 Inputs)",input:[1,.5,-1,0,.2],weight:[.1,.2,.3,.4,.5],bias:-.5,output:.1,inputLabel:["F1","F2","F3","F4","F5"],formula:"y = Σ(wi*xi) + b"},{name:"Many Inputs (8 Inputs)",input:[1,0,1,0,1,0,1,0],weight:[.1,-.1,.1,-.1,.1,-.1,.1,-.1],bias:0,output:.5,inputLabel:["I1","I2","I3","I4","I5","I6","I7","I8"],formula:"y = ... "}],i=n[e];return a("div",{style:{padding:"20px"},children:[a("h2",{children:"Architecture Gallery"}),a("div",{style:{marginBottom:"20px"},children:[a("button",{onClick:()=>t((e-1+n.length)%n.length),children:"Previous"}),a("span",{style:{margin:"0 10px"},children:[i.name," (",e+1,"/",n.length,")"]}),a("button",{onClick:()=>t((e+1)%n.length),children:"Next"})]}),a("div",{style:{width:"400px",border:"1px dashed #ccc",padding:"10px"},children:a(Le,{input:i.input,weight:i.weight,bias:i.bias,output:i.output,formula:i.formula,inputLabel:i.inputLabel})})]})}class tn{constructor(t=30,n=50){this.velocity=t,this.initialPosition=n}getPosition(t){return this.velocity*t+this.initialPosition}}class en{constructor(){this.weight=0,this.bias=0}predict(t){return this.weight*t+this.bias}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function nn({time:e,groundTruth:t,neuralNet:n,maxDistance:i=300}){const r=pt(null);bt(()=>{const h=r.current;if(!h)return;const f=h.getContext("2d"),p=h.width,u=h.height,l=50,d=p-2*l;f.clearRect(0,0,p,u);const _=t.getPosition(e),g=n.predict(e),y=l+_%i/i*d,k=l+g%i/i*d;f.fillStyle="#f0f0f0",f.fillRect(0,0,p,u/2),f.fillStyle="#e0e0e0",f.fillRect(0,u/2,p,u/2),f.beginPath(),f.strokeStyle="#fff",f.setLineDash([20,20]),f.moveTo(0,u/4),f.lineTo(p,u/4),f.moveTo(0,u*3/4),f.lineTo(p,u*3/4),f.stroke(),f.beginPath(),f.strokeStyle="#ccc",f.setLineDash([]),f.moveTo(l,0),f.lineTo(l,u),f.moveTo(p-l,0),f.lineTo(p-l,u),f.stroke(),s(f,y,u/4,"#2ecc71","Ground Truth"),s(f,k,u*3/4,"#e74c3c","Neural Net"),f.fillStyle="#333",f.font="14px monospace",f.fillText(`Zeit: ${e.toFixed(1)}s`,10,20),f.fillText(`Pos GT: ${_.toFixed(1)}m`,10,40),f.fillText(`Pos NN: ${g.toFixed(1)}m`,10,u/2+40)},[e,t,n,i]);function s(h,f,p,u,l){h.save(),h.translate(f,p),h.fillStyle=u,h.fillRect(-20,-10,40,20),h.fillStyle="#000",h.fillRect(-15,-15,10,5),h.fillRect(5,-15,10,5),h.fillRect(-15,10,10,5),h.fillRect(5,10,10,5),h.fillStyle="#000",h.font="10px sans-serif",h.textAlign="center",h.fillText(l,0,-20),h.restore()}return a("div",{style:{border:"2px solid #333",borderRadius:"8px",overflow:"hidden"},children:a("canvas",{ref:r,width:800,height:300,style:{width:"100%",display:"block"}})})}const he={id:"physics",title:"Phase 1: Lineare Regression (Exhaustive Search 2D)",description:"Physiksimulation: Weg-Zeit-Gesetz (s = v*t + s0)",Model:en,GroundTruth:tn,CanvasComponent:nn,defaultParams:{weight:0,bias:0},groundTruthDefaults:[30,50],getInput:e=>e,generateData:e=>Array.from({length:20},(n,i)=>i*.5).map(n=>({input:n,target:e.getPosition(n)})),trainingConfig:{weightRange:{min:0,max:60,step:1},biasRange:{min:0,max:100,step:2}},networkViz:{formula:"pos = w * t + b",inputLabel:"Zeit (t)",outputLabel:"Pos (m)",biasLabel:"b"}};class sn{constructor(t=.5,n=-5){this.weight=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){const n=this.sigmoid(this.weight*t+this.bias);return Math.random()<n?1:0}getProbability(t){return this.sigmoid(this.weight*t+this.bias)}}class on{constructor(){this.weight=0,this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=this.weight*t+this.bias;return this.sigmoid(n)}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function Dt(e,t,n=10){if(e===t)return[e];const i=de(t-e,!1),r=de(i/(n-1),!0),s=Math.floor(e/r)*r,h=Math.ceil(t/r)*r,f=[],p=r/1e3;for(let u=s;u<h+r/2;u+=r)u>=e-p&&u<=t+p&&f.push(Number(u.toPrecision(12)));return f}function de(e,t){const n=Math.floor(Math.log10(e)),i=e/Math.pow(10,n);let r;return t?i<1.5?r=1:i<3?r=2:i<7?r=5:r=10:i<=1?r=1:i<=2?r=2:i<=5?r=5:r=10,r*Math.pow(10,n)}function rn({time:e,groundTruth:t,neuralNet:n,data:i,staticMode:r=!1,showModel:s=!0,showGroundTruth:h=!0}){const f=pt(null),[p,u]=ot({k:1,x:0,y:0}),[l,d]=ot(!1),_=pt({x:0,y:0}),[g,y]=ot(null),k=pt([]),v=M=>{M.preventDefault();const L=-M.deltaY*.001,w=p.k;let m=w*(1+L);m=Math.max(.5,Math.min(m,10));const C=f.current.getBoundingClientRect(),T=f.current.width/C.width,F=f.current.height/C.height,E=(M.clientX-C.left)*T,X=(M.clientY-C.top)*F,G=40,K=(E-G-p.x)/w,b=(X-(300-G)-p.y)/w,o=E-G-K*m,R=X-(300-G)-b*m;u({k:m,x:o,y:R})},A=M=>{d(!0),_.current={x:M.clientX,y:M.clientY}},x=M=>{const c=f.current;if(!c)return;const L=c.getBoundingClientRect(),w=c.width/L.width,m=c.height/L.height;if(l){const C=(M.clientX-_.current.x)*w,T=(M.clientY-_.current.y)*m;_.current={x:M.clientX,y:M.clientY},u(F=>({...F,x:F.x+C,y:F.y+T})),y(null)}else{const C=(M.clientX-L.left)*w,T=(M.clientY-L.top)*m;let F=null,E=15;const X=k.current;for(let G=X.length-1;G>=0;G--){const K=X[G],b=Math.sqrt(Math.pow(K.x-C,2)+Math.pow(K.y-T,2));b<E&&(E=b,F=K.info)}y(F)}},V=()=>d(!1),D=()=>{d(!1),y(null)},N=pt(0),z=()=>{const M=Date.now();M-N.current<300&&y(null),N.current=M};return bt(()=>{const M=f.current;if(!M)return;const c=M.getContext("2d"),L=M.width,w=M.height;c.clearRect(0,0,L,w),k.current=[];const m=40,C=L-2*m,T=w-2*m,F=0,E=20,X=1,G=S=>m+S/E*C*p.k+p.x,K=S=>w-m-S/X*T*p.k+p.y,b=S=>(S-m-p.x)/(C*p.k)*E,o=S=>-((S-(w-m)-p.y)/(T*p.k))*X,R=b(m),W=b(L-m),Z=o(w-m),B=o(m),q=Dt(R,W,10),$=Dt(Z,B,5);c.beginPath(),c.strokeStyle="#eee",c.lineWidth=1,c.fillStyle="#333",c.textAlign="center",c.textBaseline="top",c.font="10px sans-serif",q.forEach(S=>{const P=G(S);P<m||P>L-m||(c.moveTo(P,m),c.lineTo(P,w-m),c.fillText(Number(S.toFixed(2)),P,w-m+5))}),c.textAlign="right",c.textBaseline="middle",$.forEach(S=>{const P=K(S);P<m||P>w-m||(c.moveTo(m,P),c.lineTo(L-m,P),c.fillText(Number(S.toFixed(2)),m-5,P))}),c.stroke(),c.beginPath(),c.strokeStyle="#333",c.lineWidth=1,c.rect(m,m,C,T),c.stroke(),c.fillStyle="#333",c.textAlign="center",c.textBaseline="alphabetic",c.fillText("Anzahl 'Spam' Wörter",L/2,w-10),c.save(),c.translate(15,w/2),c.rotate(-Math.PI/2),c.textAlign="center",c.fillText("Spam Wahrscheinlichkeit",0,0),c.restore(),c.save(),c.beginPath(),c.rect(m,m,C,T),c.clip();const J=(S,P,I=[])=>{c.beginPath(),c.strokeStyle=P,c.setLineDash(I),c.lineWidth=2;const U=Math.max(F,R),H=Math.min(E,W);if(H<U)return;const O=(H-U)/100,rt=Math.max(O,.05);let tt=!1;for(let ct=U;ct<=H+rt;ct+=rt){const ht=Math.min(Math.max(ct,F),E);let ut=0;typeof S.getProbability=="function"?ut=S.getProbability(ht):typeof S.predict=="function"&&(ut=S.predict(ht));const Y=G(ht),nt=K(ut);tt?c.lineTo(Y,nt):(c.moveTo(Y,nt),tt=!0)}c.stroke(),c.setLineDash([])};if(h&&t&&J(t,"#ccc",[5,5]),s&&n&&J(n,"#e74c3c"),r&&i)i.forEach(S=>{if(S.input<R-5||S.input>W+5)return;const P=G(S.input),I=K(S.target);k.current.push({x:P,y:I,info:{x:P,y:I,input:S.input,target:S.target}});let U=null;if(n&&s)try{U=n.predict(S.input)>.5?"#e74c3c":"#2ecc71"}catch{}const H=Math.sin(S.input*123)*5,O=Math.cos(S.input*321)*5;U&&(c.beginPath(),c.arc(P+H,I+O,8,0,Math.PI*2),c.strokeStyle=U,c.lineWidth=2,c.stroke()),c.beginPath(),c.arc(P+H,I+O,5,0,Math.PI*2),c.fillStyle=S.target===1?"#e74c3c":"#2ecc71",c.fill(),c.strokeStyle="#fff",c.lineWidth=1,c.stroke()});else if(!r){const P=Math.floor(e*2),I=50,U=O=>{const rt=Math.sin(O*123.456)*1e4;return rt-Math.floor(rt)},H=Math.min(P,I);for(let O=0;O<H;O++){const rt=U(O+1),tt=Math.floor(rt*21),ct=t?t.getProbability(tt):0,ht=U(O+999)<ct?1:0;if(tt<R-5||tt>W+5)continue;const ut=G(tt),Y=K(ht);let nt=null;if(n&&s)try{nt=n.predict(tt)>.5?"#e74c3c":"#2ecc71"}catch{}const ft=(U(O+333)-.5)*10,xt=(U(O+444)-.5)*10,j=ut+ft,Q=Y+xt;k.current.push({x:j,y:Q,info:{x:j,y:Q,input:tt,target:ht}}),nt&&(c.beginPath(),c.arc(j,Q,8,0,Math.PI*2),c.strokeStyle=nt,c.lineWidth=2,c.stroke()),c.beginPath(),c.arc(j,Q,5,0,Math.PI*2),c.fillStyle=ht?"#e74c3c":"#2ecc71",c.fill(),c.strokeStyle="#fff",c.lineWidth=1,c.stroke()}if(H>0&&H<=I){const O=H-1,rt=U(O+1),tt=Math.floor(rt*21),ct=t.getProbability(tt),ht=U(O+999)<ct?1:0,ut=(U(O+333)-.5)*10,Y=(U(O+444)-.5)*10,nt=G(tt)+ut,ft=K(ht)+Y;nt>m&&nt<L-m&&ft>m&&ft<w-m&&(c.beginPath(),c.arc(nt,ft,8,0,Math.PI*2),c.strokeStyle="#333",c.stroke(),c.fillStyle="#333",c.font="10px sans-serif",c.fillText(`${tt}`,nt,ft-12))}}if(c.restore(),g){c.save(),c.fillStyle="rgba(0,0,0,0.8)",c.strokeStyle="#fff";const S=g.target===1?"SPAM":"HAM",P=`Words: ${g.input}`,I=100,U=40;let H=g.x+10,O=g.y-10;H+I>L&&(H=g.x-I-10),O+U>w&&(O=g.y-U-10),O<0&&(O=g.y+10),c.beginPath(),c.roundRect(H,O,I,U,4),c.fill(),c.lineWidth=1,c.stroke(),c.textBaseline="top",c.textAlign="left",c.font="bold 11px sans-serif",c.fillStyle=g.target===1?"#e74c3c":"#2ecc71",c.fillText(S,H+8,O+6),c.fillStyle="#ddd",c.font="10px sans-serif",c.fillText(P,H+8,O+20),c.restore()}},[e,t,n,i,r,s,h,p,g]),a("div",{className:"canvas-container",children:a("canvas",{ref:f,width:600,height:300,style:{width:"100%",border:"1px solid #ccc",background:"#fff",cursor:g?"pointer":l?"grabbing":"grab"},onWheel:v,onMouseDown:A,onMouseMove:x,onMouseUp:V,onMouseLeave:D,onClick:z})})}const an=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},fe={id:"spam",title:"Phase 2: Logistische Regression (Spam Filter)",description:"Spam-Erkennung: Wahrscheinlichkeit p = σ(w*x + b)",Model:on,GroundTruth:sn,CanvasComponent:rn,defaultParams:{weight:0,bias:0},groundTruthDefaults:[.5,-5],getInput:e=>{const t=Math.floor(e);return Math.floor(an(t)*20)},generateData:e=>{const t=[];for(let n=0;n<50;n++){const i=Math.floor(Math.random()*21),r=e.classify(i);t.push({input:i,target:r})}return t.sort((n,i)=>n.input-i.input)},trainingConfig:{weightRange:{min:0,max:2,step:.1},biasRange:{min:-10,max:5,step:.5}},networkViz:{formula:"p = σ(w * x + b)",inputLabel:"Wörter (x)",outputLabel:"Spam? (p)",biasLabel:"b"},isFinished:e=>e>=25};class qt{constructor(t=[.5,.2,.8,-.1],n=-3){this.weights=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){let n=this.bias;for(let r=0;r<this.weights.length;r++)n+=this.weights[r]*t[r];const i=this.sigmoid(n);return Math.random()<i?1:0}getProbability(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}}class Re{constructor(t=4){this.weights=new Array(t).fill(0),this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}setWeights(t){this.weights=[...t]}setBias(t){this.bias=t}setWeightAt(t,n){t>=0&&t<this.weights.length&&(this.weights[t]=n)}}const ln=[{label:"Spam Words",idx:0,max:15},{label:"Großbuchstaben",idx:1,max:25},{label:"Links",idx:2,max:8},{label:"Gesamtworte",idx:3,max:100}];function Zt({data:e,currentInput:t,currentPrediction:n,neuralNet:i,allowedModes:r=["features","scatter","3d","text"],hideControls:s=!1,showModel:h=!0,additionalControls:f=null,features:p=ln}){const u=pt(null),[l,d]=ot(r[0]);bt(()=>{r.includes(l)||d(r[0])},[r]);const[_,g]=ot(0),[y,k]=ot(3),[v,A]=ot(2),[x,V]=ot({x:-.5,y:.5}),[D,N]=ot({k:1,x:0,y:0}),z=pt(!1),M=pt({x:0,y:0}),[c,L]=ot(null),w=pt([]),m=b=>{if(l!=="scatter")return;b.preventDefault();const R=-b.deltaY*.001,W=D.k;let Z=W*(1+R);Z=Math.max(.5,Math.min(Z,50));const B=u.current;if(!B)return;const q=B.getBoundingClientRect(),$=B.width/q.width,J=B.height/q.height,S=(b.clientX-q.left)*$,P=(b.clientY-q.top)*J,I=50,U=B.height-I,H=(S-I-D.x)/W,O=(U+D.y-P)/W,rt=S-I-H*Z,tt=P-U+O*Z;N({k:Z,x:rt,y:tt})},C=b=>{l!=="3d"&&l!=="scatter"||(z.current=!0,M.current={x:b.clientX,y:b.clientY})},T=b=>{const o=u.current;if(!o)return;const R=o.getBoundingClientRect(),W=o.width/R.width,Z=o.height/R.height;if(z.current){const I=(b.clientX-M.current.x)*W,U=(b.clientY-M.current.y)*Z;M.current={x:b.clientX,y:b.clientY},l==="3d"?V(H=>({x:H.x+U*.01,y:H.y+I*.01})):l==="scatter"&&N(H=>({...H,x:H.x+I,y:H.y+U}));return}const B=(b.clientX-R.left)*W,q=(b.clientY-R.top)*Z;let $=null,S=15;const P=w.current;for(let I=P.length-1;I>=0;I--){const U=P[I],H=Math.sqrt((U.x-B)**2+(U.y-q)**2);H<S&&(S=H,$=U.info)}L($)},F=()=>{z.current=!1},E=()=>{L(null),z.current=!1},X=pt(0),G=()=>{const b=Date.now();b-X.current<300&&L(null),X.current=b};bt(()=>{const b=u.current;if(!b)return;const o=b.getContext("2d"),R=b.width,W=b.height;o.clearRect(0,0,R,W),o.fillStyle="#fff",o.fillRect(0,0,R,W),w.current=[];const Z=B=>{if(!e||e.length===0)return p[B].max;const q=Math.max(...e.map($=>$.input[B]));return q>0?q:p[B].max};if(l==="3d"){const B=Z(_),q=Z(y),$=Z(v),J=R/2,S=W/2,P=150,I=(Y,nt,ft)=>{let xt=Y*Math.cos(x.y)-ft*Math.sin(x.y),j=Y*Math.sin(x.y)+ft*Math.cos(x.y),Q=nt*Math.cos(x.x)-j*Math.sin(x.x),at=nt*Math.sin(x.x)+j*Math.cos(x.x);const it=400/(400-at);return{x:J+xt*it,y:S+Q*it,z:at}},H=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]].map(Y=>I(Y[0]*P,Y[1]*P,Y[2]*P)),O="#e29301ff",rt="#2980b9",tt="#c00798ff",ct=(Y,nt)=>{o.beginPath(),o.strokeStyle=nt,o.lineWidth=1,Y.forEach(([ft,xt])=>{o.moveTo(H[ft].x,H[ft].y),o.lineTo(H[xt].x,H[xt].y)}),o.stroke()};ct([[0,1],[3,2],[4,5],[7,6]],O),ct([[0,3],[1,2],[4,7],[5,6]],rt),ct([[0,4],[1,5],[2,6],[3,7]],tt),o.font="bold 11px sans-serif",o.fillStyle=O,o.fillText("X: "+p[_].label,H[1].x,H[1].y),o.fillStyle=rt,o.fillText("Y: "+p[y].label,H[3].x,H[3].y),o.fillStyle=tt,o.fillText("Z: "+p[v].label,H[4].x,H[4].y);const ht=[],ut=(Y,nt)=>Y/nt*2-1;if(h&&i&&i.weights){const Y=i.weights[_]||0,nt=i.weights[y]||0,ft=i.weights[v]||0,xt=i.bias||0;if(Math.abs(ft)>.001){o.strokeStyle="rgba(142, 68, 173, 0.3)",o.lineWidth=1;const j=(it,st)=>{const mt=(it+1)/2*B,gt=(st+1)/2*q,kt=(-Y*mt-nt*gt-xt)/ft;return ut(kt,$)},Q=(it,st)=>{if(Math.abs(it.z)<=3&&Math.abs(st.z)<=3){const mt=I(it.x*P,-it.y*P,it.z*P),gt=I(st.x*P,-st.y*P,st.z*P);o.beginPath(),o.moveTo(mt.x,mt.y),o.lineTo(gt.x,gt.y),o.stroke()}},at=6;for(let it=0;it<=at;it++){const st=-1+it/at*2,mt=j(-1,st),gt=j(1,st);Q({x:-1,y:st,z:mt},{x:1,y:st,z:gt})}for(let it=0;it<=at;it++){const st=-1+it/at*2,mt=j(st,-1),gt=j(st,1);Q({x:st,y:-1,z:mt},{x:st,y:1,z:gt})}}}e&&e.forEach(Y=>{const nt=ut(Y.input[_],B),ft=-ut(Y.input[y],q),xt=ut(Y.input[v],$),j=I(nt*P,ft*P,xt*P);let Q=null;if(i&&h)try{Q=i.predict(Y.input)>.5?"#e74c3c":"#2ecc71"}catch{}ht.push({...j,color:Y.target===1?"#e74c3c":"#2ecc71",radius:3,haloColor:Q,pt:Y})}),ht.sort((Y,nt)=>Y.z-nt.z),ht.forEach(Y=>{Y.z<3&&w.current.push({x:Y.x,y:Y.y,info:{x:Y.x,y:Y.y,text:Y.pt.text,isSpam:Y.pt.target===1,features:{xLabel:p[_].label,xVal:Y.pt.input[_],yLabel:p[y].label,yVal:Y.pt.input[y],zLabel:p[v].label,zVal:Y.pt.input[v]}}}),Y.haloColor&&(o.beginPath(),o.arc(Y.x,Y.y,Y.radius+2,0,Math.PI*2),o.strokeStyle=Y.haloColor,o.lineWidth=1.5,o.stroke()),o.beginPath(),o.arc(Y.x,Y.y,Y.radius,0,Math.PI*2),o.fillStyle=Y.color,o.fill()})}if(l==="scatter"){const B=Z(_),q=Z(y),$=50,J=R-2*$,S=W-2*$,P=W-$,I="#c0392b",U="#2980b9",H=j=>$+j/B*J*D.k+D.x,O=j=>P-j/q*S*D.k+D.y;o.save(),o.beginPath(),o.rect($,$,J,S),o.clip(),o.restore();const rt=j=>(j-$-D.x)/(J*D.k)*B,tt=j=>(P+D.y-j)/(S*D.k)*q,ct=rt($),ht=rt($+J),ut=tt(P),Y=tt($),nt=Dt(Math.min(ct,ht),Math.max(ct,ht),8),ft=Dt(Math.min(ut,Y),Math.max(ut,Y),6);o.lineWidth=1,o.strokeStyle="#eee",o.fillStyle="#666",o.font="10px sans-serif",o.textAlign="center",o.textBaseline="top",nt.forEach(j=>{const Q=H(j);Q<$||Q>$+J||(o.beginPath(),o.moveTo(Q,$),o.lineTo(Q,P),o.stroke(),o.fillText(Number(j.toFixed(2)),Q,P+5))}),o.textAlign="right",o.textBaseline="middle",ft.forEach(j=>{const Q=O(j);Q<$||Q>P||(o.beginPath(),o.moveTo($,Q),o.lineTo($+J,Q),o.stroke(),o.fillText(Number(j.toFixed(2)),$-5,Q))}),o.strokeStyle="#ccc",o.lineWidth=2,o.strokeRect($,$,J,S),o.textAlign="center",o.font="bold 12px sans-serif",o.fillStyle=I,o.fillText(`${p[_].label}`,$+J/2,P+30),o.save(),o.translate(15,P-S/2),o.rotate(-Math.PI/2),o.fillStyle=U,o.fillText(`${p[y].label}`,0,0),o.restore(),o.save(),o.beginPath(),o.rect($,$,J,S),o.clip();const xt=(j,Q,at,it,st)=>{const mt=H(j[_]),gt=O(j[y]);st&&(o.beginPath(),o.arc(mt,gt,at+3,0,2*Math.PI),o.strokeStyle=st,o.lineWidth=2,o.stroke()),o.beginPath(),o.arc(mt,gt,at,0,2*Math.PI),o.fillStyle=Q,o.fill(),it&&(o.strokeStyle=it,o.lineWidth=2,o.stroke())};if(e&&e.forEach(j=>{const Q=H(j.input[_]),at=O(j.input[y]);if(Q<$||Q>$+J||at<$||at>P)return;w.current.push({x:Q,y:at,info:{x:Q,y:at,text:j.text,isSpam:j.target===1,features:{xLabel:p[_].label,xVal:j.input[_],yLabel:p[y].label,yVal:j.input[y]}}});let it=null;if(i&&h)try{it=i.predict(j.input)>.5?"#e74c3c":"#2ecc71"}catch{}xt(j.input,j.target===1?"#e74c3c":"#2ecc71",5,"#fff",it)}),h&&i){let j=i.weights;const Q=i.bias||0;if(j){const at=j[_]||0,it=j[y]||0,st=Q;o.beginPath(),o.strokeStyle="rgba(142, 68, 173, 0.8)",o.lineWidth=2,o.setLineDash([10,5]);const mt=ct-(ht-ct),gt=ht+(ht-ct),kt=(vt,wt)=>({x:H(vt),y:O(wt)});if(Math.abs(it)>.001){const vt=Ee=>(-at*Ee-st)/it,wt=kt(mt,vt(mt)),Pt=kt(gt,vt(gt));o.moveTo(wt.x,wt.y),o.lineTo(Pt.x,Pt.y)}else if(Math.abs(at)>.001){const vt=-st/at,wt=kt(vt,ut-100),Pt=kt(vt,Y+100);o.moveTo(wt.x,wt.y),o.lineTo(Pt.x,Pt.y)}o.stroke(),o.setLineDash([])}}t&&xt(t,"#3498db",8,"#2980b9"),o.restore(),o.fillStyle="#666",o.textAlign="right",o.font="11px sans-serif",o.fillText("Rot=Spam, Grün=OK",R-10,20)}if(l==="text"){if(o.textAlign="center",o.textBaseline="middle",!t||!t.text){o.fillStyle="#999",o.font="20px sans-serif",o.fillText("Kein Text verfügbar",R/2,W/2);return}const B=n>.5,q=B?"#feeff0":"#effaf0";o.fillStyle=q,o.fillRect(0,0,R,W);const $=t.text;o.fillStyle="#333",o.font="24px serif";const J=$.split(" ");let S="";const P=35,I=R/2;let U=W/3;const H=R-100;for(let tt=0;tt<J.length;tt++){const ct=S+J[tt]+" ";o.measureText(ct).width>H&&tt>0?(o.fillText(S,I,U),S=J[tt]+" ",U+=P):S=ct}o.fillText(S,I,U),U+=60;const O=t.groundTruth===1;o.font="bold 16px sans-serif",o.fillStyle="#555",o.fillText(`Wahrheit: ${O?"SPAM":"HAM"}`,I,U),U+=30;const rt=(n*100).toFixed(1);o.font="bold 20px sans-serif",o.fillStyle=B?"#c0392b":"#27ae60",o.fillText(`Vorhersage: ${B?"SPAM":"HAM"} (${rt}%)`,I,U);return}if(l==="features"){const q=(R-90)/2,$=(W-90)/2;[{x:30,y:30,...p[0]},{x:30+q+30,y:30,...p[1]},{x:30,y:30+$+30,...p[2]},{x:30+q+30,y:30+$+30,...p[3]}].forEach(S=>{if(o.strokeStyle="#ccc",o.strokeRect(S.x,S.y,q,$),o.fillStyle="#333",o.font="12px Arial",o.textAlign="center",o.fillText(S.label,S.x+q/2,S.y-5),e&&e.forEach(P=>{const I=P.input[S.idx],U=S.x+I/S.max*q,H=S.y+$-P.target*($-20)-10;w.current.push({x:U,y:H,info:{x:U,y:H,text:P.text,isSpam:P.target===1,features:{valLabel:S.label,val:I}}});let O=null;if(i&&h)try{O=i.predict(P.input)>.5?"#e74c3c":"#2ecc71"}catch{}O&&(o.beginPath(),o.arc(U,H,4.5,0,2*Math.PI),o.strokeStyle=O,o.lineWidth=1,o.stroke()),o.beginPath(),o.arc(U,H,3,0,2*Math.PI),o.fillStyle=P.target?"rgba(231, 76, 60, 0.6)":"rgba(46, 204, 113, 0.6)",o.fill()}),t){const P=t[S.idx],I=S.x+P/S.max*q;o.beginPath(),o.moveTo(I,S.y),o.lineTo(I,S.y+$),o.strokeStyle="#3498db",o.setLineDash([5,5]),o.stroke(),o.setLineDash([])}})}if(c&&(l==="features"||l==="scatter"||l==="3d")){o.save(),o.fillStyle="rgba(0,0,0,0.85)",o.strokeStyle="#fff";const B=c.text||"No Text",q=c.isSpam?"SPAM":"HAM",$=o.measureText(B),J=Math.max($.width,140)+20;let S=70;c.features&&(c.features.zLabel?S=90:c.features.yLabel?S=85:S=60);let P=c.x+15,I=c.y-15;P+J>R&&(P=c.x-J-10),I+S>W&&(I=c.y-S-10),I<0&&(I=c.y+20),o.beginPath(),o.roundRect(P,I,J,S,5),o.fill(),o.lineWidth=1,o.stroke(),o.textBaseline="top",o.textAlign="left",o.font="bold 12px sans-serif",o.fillStyle=c.isSpam?"#e74c3c":"#2ecc71",o.fillText(q,P+10,I+10),o.fillStyle="#ddd",o.font="italic 11px sans-serif",o.fillText(B,P+10,I+28),c.features&&(o.fillStyle="#fff",o.font="11px monospace",c.features.xLabel?(o.fillText(`${c.features.xLabel}: ${c.features.xVal}`,P+10,I+46),o.fillText(`${c.features.yLabel}: ${c.features.yVal}`,P+10,I+60),c.features.zLabel&&o.fillText(`${c.features.zLabel}: ${c.features.zVal}`,P+10,I+74)):c.features.valLabel&&o.fillText(`${c.features.valLabel}: ${c.features.val}`,P+10,I+46)),o.restore()}},[e,t,n,i,l,_,y,v,x,h,D]);const K={features:"Alle Features",scatter:"2D Plot","3d":"3D Plot",text:"Text Mode"};return a("div",{style:{textAlign:"center"},children:[!s&&a("div",{style:{marginBottom:"10px",display:"flex",gap:"5px",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",fontSize:"0.9rem"},children:[a("div",{children:f}),a("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[a("select",{value:l,onChange:b=>d(b.target.value),style:{padding:"4px"},children:r.map(b=>a("option",{value:b,children:K[b]},b))}),(l==="scatter"||l==="3d")&&a(_t,{children:[a("span",{children:"X:"}),a("select",{value:_,onChange:b=>g(parseInt(b.target.value)),style:{padding:"4px"},children:p.map(b=>a("option",{value:b.idx,children:b.label},b.idx))}),a("span",{children:"Y:"}),a("select",{value:y,onChange:b=>k(parseInt(b.target.value)),style:{padding:"4px"},children:p.map(b=>a("option",{value:b.idx,children:b.label},b.idx))})]}),l==="3d"&&a(_t,{children:[a("span",{children:"Z:"}),a("select",{value:v,onChange:b=>A(parseInt(b.target.value)),style:{padding:"4px"},children:p.map(b=>a("option",{value:b.idx,children:b.label},b.idx))})]})]})]}),a("canvas",{ref:u,width:600,height:400,style:{border:"1px solid #eee",maxWidth:"100%",borderRadius:"4px",cursor:c?"pointer":l==="3d"||l==="scatter"?z.current?"grabbing":"grab":"default"},onWheel:m,onMouseDown:C,onMouseMove:T,onMouseUp:F,onMouseLeave:F,onMouseOut:E,onClick:G}),!s&&a("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:l==="3d"?"Drag to rotate 3D view":l==="scatter"?"Drag to Pan, Scroll to Zoom":"Wähle Achsen für die Visualisierung"})]})}const ue=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},Bt=e=>{const t=["winner","won","gift card","urgent","rolex","viagra","cash","prize","singles","marketing","buy","free","money","security alert","click","claim","fake","verification"],n=e.toLowerCase();let i=0;t.forEach(f=>{n.includes(f)&&(i+=1)}),i>10&&(i=10);const r=(e.match(/[A-Z]/g)||[]).length,s=(e.match(/http/g)||[]).length,h=e.split(/\s+/).length;return[i,r,s,h]},St={id:"spam_advanced",title:"Phase 3: Erweiterter Spam-Filter (4 Eingaben)",description:"Spam-Erkennung mit 4 Merkmalen: Spam-Worte, Großbuchstaben, Links, Gesamtworte.",Model:Re,GroundTruth:qt,CanvasComponent:Zt,defaultParams:{weights:[0,0,0,0],bias:0},groundTruthDefaults:[[1.5,.5,2,-.5],-5],getInput:e=>{const t=Math.floor(e*.3),n=ue(t)>.5,i=n?St.examples.spam:St.examples.ham,r=Math.floor(ue(t+99)*i.length),s=i[r],h=Bt(s);return h.text=s,h.groundTruth=n?1:0,h},examples:{spam:["WINNER! Won $1000 Gift Card! Claim at http://prize-giveaway.net","URGENT: Verify account at http://secure-bank-login.com/fraud","Cheap Rolex watches! 50% OFF at www.fake-watches.cn","Lose weight fast! Buy pills: http://diet-miracle.com","CONGRATS! Cash prize waiting: http://claim-money.org","HOT singles waiting! Chat now: http://local-dating.xyz","Refinance 1% APR. Apply: http://easy-loans.biz","Buy 1 get 1 FREE Viagra. http://meds-direct.com","Meet rich men. Signup: http://millionaire-match.com","SECURITY ALERT: Suspicious activity. Check http://account-security-check.com"],ham:["Meeting agenda for tomorrow's team sync","Hey, are we still on for lunch?","Invoice #12345 from AWS Services","Project deadline extended to Friday","Happy Birthday! Hope you have a great day.","Can you review this pull request?","Your Amazon order has shipped.","Fwd: Tickets for the concert","Question about the quarterly report","Let's catch up sometime next week."]},generateData:e=>{const t=[];St.examples.spam.forEach(n=>{const i=Bt(n),r=()=>(Math.random()-.5)*.1,s=i.map(h=>Math.max(0,h+r()));t.push({input:s,target:1,text:n})}),St.examples.ham.forEach(n=>{const r=Bt(n).map(s=>Math.max(0,s+(Math.random()-.5)*.1));t.push({input:r,target:0,text:n})});for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},trainingConfig:{params:[{name:"w1 (Spam-Worte)",min:1,max:4,step:.5},{name:"w2 (Großbuchst.)",min:0,max:2,step:.5},{name:"w3 (Links)",min:0,max:3,step:.5},{name:"w4 (Gesamtworte)",min:-2,max:2,step:.5},{name:"bias",min:-8,max:8,step:2}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + w₃x₃ + w₄x₄ + b)",inputLabels:["Spam-Worte","Großbuchst.","Links","Gesamtworte"],outputLabel:"Spam? (p)",biasLabel:"b"},isFinished:e=>e>=50};class cn{constructor(t=2,n=10){this.inputCount=t,this.hiddenCount=n;const i=Math.sqrt(6/(t+n));this.weights1=Array(n).fill(0).map(()=>Array.from({length:t},()=>Math.random()*2*i-i)),this.biases1=Array(n).fill(0);const r=Math.sqrt(6/(n+1));this.weights2=Array.from({length:n},()=>Math.random()*2*r-r),this.bias2=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=[];for(let s=0;s<this.hiddenCount;s++){let h=this.biases1[s];for(let f=0;f<this.inputCount;f++)h+=this.weights1[s][f]*t[f];n.push(this.sigmoid(h))}let i=this.bias2;for(let s=0;s<this.hiddenCount;s++)i+=this.weights2[s]*n[s];return this.sigmoid(i)}getActivations(t){const n=[];for(let s=0;s<this.hiddenCount;s++){let h=this.biases1[s];for(let f=0;f<this.inputCount;f++)h+=this.weights1[s][f]*t[f];n.push(this.sigmoid(h))}let i=this.bias2;for(let s=0;s<this.hiddenCount;s++)i+=this.weights2[s]*n[s];const r=this.sigmoid(i);return{hidden:n,output:[r]}}setParams(t){for(let i=0;i<this.hiddenCount;i++){const r=`b1_${i}`;t[r]!==void 0&&(this.biases1[i]=t[r]);for(let s=0;s<this.inputCount;s++){const h=`w1_${i}_${s}`;t[h]!==void 0&&(this.weights1[i][s]=t[h])}}const n="b2";t[n]!==void 0&&(this.bias2=t[n]);for(let i=0;i<this.hiddenCount;i++){const r=`w2_${i}`;t[r]!==void 0&&(this.weights2[i]=t[r])}}getTopology(){return{inputCount:this.inputCount,hiddenCounts:[this.hiddenCount],outputCount:1,weights1:this.weights1,biases1:this.biases1,weights2:this.weights2,bias2:this.bias2}}}const ze=[{label:"Gesamtworte",idx:0,max:400},{label:"Links",idx:1,max:10}],$e=()=>{const e=[],n=(i,r=.5)=>i+(Math.random()-.5)*r;for(let i=0;i<40;i++){let r,s,h;const f=Math.random();if(f<.1){const p=Math.max(0,10+Math.random()*40),u=Math.floor(Math.random()*2);r=[p,u],s=0,h="Security Alert: Login Code "+Math.floor(Math.random()*9999)}else if(f<.6){const p=50+Math.random()*200,l=Math.random()>.2?1+Math.floor(Math.random()*5):0;r=[p,l],s=l>0?1:0,h=l>0?"You won a prize! Click here.":"Just a normal short message."}else{const p=250+Math.random()*150,u=Math.floor(Math.random()*8);r=[p,u],s=0,h="Attached is the quarterly report found at..."}r[0]=Math.max(0,n(r[0],5)),r[1]=Math.max(0,n(r[1],.2)),e.push({input:r,target:s,text:h})}return e},pe={id:"spam_nonlinear",title:"Phase 4: Nicht-lineare Daten",description:"Spam-Erkennung mit nur 2 Merkmalen, aber komplexer Verteilung. Ein einfacher linearer Klassifikator (Perzeptron) wird hier scheitern.",Model:Re,GroundTruth:qt,CanvasComponent:Zt,defaultParams:{weights:[0,0],bias:0},getInput:e=>({input:[50,0],text:"Live Input"}),generateData:e=>$e(),trainingConfig:{params:[{name:"w1 (Worte)",min:-5,max:5,step:.5},{name:"w2 (Links)",min:-5,max:5,step:.5},{name:"bias",min:-10,max:10,step:1}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + b)",inputLabels:["Worte","Links"],outputLabel:"Spam?",biasLabel:"b"},featuresConfig:ze,isFinished:e=>!1},hn=()=>{const e=[];for(let t=0;t<10;t++){e.push({name:`b1_${t}`,min:-3,max:3,step:1});for(let n=0;n<2;n++)e.push({name:`w1_${t}_${n}`,min:-3,max:3,step:1})}e.push({name:"b2",min:-3,max:3,step:1});for(let t=0;t<10;t++)e.push({name:`w2_${t}`,min:-5,max:5,step:1});return e},me={id:"spam_hidden",title:"Phase 5: Deep Learning (Hidden Layer)",description:'Spam-Erkennung mit einem Hidden Layer (10 Neuronen). Das Deep Neural Network kann die nicht-lineare Verteilung ("Spam-Insel") erkennen.',Model:cn,GroundTruth:qt,CanvasComponent:Zt,defaultParams:{},getInput:e=>({input:[50,0],text:"Live Input"}),generateData:e=>$e(),trainingConfig:{params:hn()},networkViz:{formula:"Deep Network",inputLabels:["Worte","Links"],outputLabel:"Spam?",biasLabel:"b"},featuresConfig:ze,isFinished:e=>e>=50},ge={[he.id]:he,[fe.id]:fe,[St.id]:St,[pe.id]:pe,[me.id]:me};function dn(e){return ge[e]||ge.physics}function fn(){const[e,t]=ot(null),n=pt(null),i=pt(null),[r,s]=ot(0),[h,f]=ot(!1),[p,u]=ot([]),[l,d]=ot([]),[_,g]=ot(-1),[y,k]=ot(!1),[v,A]=ot("simulation"),[x,V]=ot("table"),[D,N]=ot("exhaustive"),[z,M]=ot("Bereit."),c=pt(0);bt(()=>{const R=new URLSearchParams(window.location.search).get("sim")||"physics";if(R==="gallery"){t({id:"gallery",type:"gallery"});return}const W=dn(R);if(!W){M("Fehler: Simulation nicht gefunden.");return}try{if(n.current=new W.GroundTruth(...W.groundTruthDefaults||[]),i.current=new W.Model,W.defaultParams&&(W.defaultParams.weight!==void 0&&i.current.setWeight(W.defaultParams.weight),W.defaultParams.weights!==void 0&&i.current.setWeights&&i.current.setWeights(W.defaultParams.weights),W.defaultParams.bias!==void 0&&i.current.setBias(W.defaultParams.bias)),t(W),n.current)try{const Z=W.generateData(n.current);u(Z)}catch(Z){console.error("Auto-generate data error:",Z)}}catch(Z){console.error("Initialization Error:",Z),M(`Init Fehler: ${Z.message}`)}},[]),bt(()=>{let o;const R=W=>{if(!h)return;c.current===0&&(c.current=W);const Z=(W-c.current)/1e3;c.current=W;const B=Math.min(Z,.1);s(q=>{const J=q+B*3;return e&&e.isFinished&&e.isFinished(J)&&(f(!1),M("Simulation beendet.")),J}),o=requestAnimationFrame(R)};return h&&(c.current=0,o=requestAnimationFrame(R)),()=>cancelAnimationFrame(o)},[h,e]);const L=async()=>{try{if(p.length===0||!e)return;k(!0),g(0),d([]),M("Suche optimales Gewicht und Bias (Live Visualisierung)..."),A("training");const o=new Oe(i.current),R=(Z,B)=>{if(d(q=>{const $=[...q,...Z];return g($.length-1),$}),(B&&B.message||B&&B.message)&&M(B.message),B&&B.bestParams){if(i.current.setParams)i.current.setParams(B.bestParams);else if(i.current.setWeights){const{weights:q,bias:$}=B.bestParams;i.current.setWeights(q),i.current.setBias($)}}else B&&B.bestWeight!==void 0&&(i.current.setWeight(B.bestWeight),i.current.setBias(B.bestBias))};let W;D==="random"?(M("Suche optimales Gewicht und Bias (Random Search)..."),W=await o.trainRandomAsync(p,e.trainingConfig.params,R)):e.trainingConfig.params?W=await o.trainAsync(p,e.trainingConfig.params,R):W=await o.trainAsync(p,e.trainingConfig.weightRange,e.trainingConfig.biasRange,R),M(`Training fertig! Min Error: ${W.minError.toFixed(5)}`),k(!1)}catch(o){console.error("Training Error:",o),k(!1),M(`Fehler beim Training: ${o.message}`)}},w=()=>{s(0),f(!0),M("Simulation läuft..."),A("simulation")},m=()=>{f(!1),s(0),u([]),d([]),g(-1);try{i.current&&e?.defaultParams&&(e.defaultParams.weight!==void 0&&i.current.setWeight(e.defaultParams.weight),e.defaultParams.weights!==void 0&&i.current.setWeights&&i.current.setWeights(e.defaultParams.weights),e.defaultParams.bias!==void 0&&i.current.setBias(e.defaultParams.bias))}catch(o){console.error("Reset Error:",o)}M("Reset durchgeführt.")};if(!e)return a("div",{children:"Lade Simulation..."});if(e.type==="gallery")return a("div",{className:"container",children:[a("header",{children:[a("h1",{children:"Neural Network Demonstrator"}),a("p",{children:"Architecture Gallery (Debug)"}),a("div",{className:"sim-selector",style:{fontSize:"0.8rem",marginTop:"5px"},children:a("a",{href:"?sim=physics",style:{marginRight:"10px"},children:"Back to App"})})]}),a("main",{children:a(Qe,{})})]});const C=e.CanvasComponent,T=e.networkViz||{},F=e.getInput?e.getInput(r):r,[E,X]=ot(null),G=o=>{X(R=>R===o?null:o)},K={position:"absolute",top:"10px",right:"10px",zIndex:10,background:"rgba(255, 255, 255, 0.9)",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"0px"},b="all 0.4s cubic-bezier(0.4, 0, 0.2, 1)";return a("div",{className:"container",children:[a("header",{children:[a("h1",{children:"Neural Network Demonstrator"}),a("p",{children:e.title}),a("div",{className:"sim-selector",style:{fontSize:"0.8rem",marginTop:"5px"},children:[a("a",{href:"?sim=physics",style:{marginRight:"10px",fontWeight:e.id==="physics"?"bold":"normal"},children:"Phase 1 (Physik)"}),a("a",{href:"?sim=spam",style:{marginRight:"10px",fontWeight:e.id==="spam"?"bold":"normal"},children:"Phase 2 (Spam)"}),a("a",{href:"?sim=spam_advanced",style:{marginRight:"10px",fontWeight:e.id==="spam_advanced"?"bold":"normal"},children:"Phase 3 (Spam Extended)"}),a("a",{href:"?sim=spam_nonlinear",style:{marginRight:"10px",fontWeight:e.id==="spam_nonlinear"?"bold":"normal"},children:"Phase 4 (Nonlinear)"}),a("a",{href:"?sim=spam_hidden",style:{fontWeight:e.id==="spam_hidden"?"bold":"normal"},children:"Phase 5 (Deep)"})]})]}),a("main",{children:[a("div",{className:"top-section",style:{display:"flex",gap:E?"0px":"20px",flexWrap:"nowrap",alignItems:"stretch",height:E?"calc(100vh - 200px)":"auto",minHeight:"500px",transition:b},children:[a("div",{className:"simulation-wrapper",style:{flex:E==="simulation"?"1 0 100%":E==="network"?"0 0 0%":"1 1 500px",opacity:E==="network"?0:1,overflow:"hidden",maxWidth:E==="network"?"0px":"100%",transition:b,position:"relative",display:"flex",flexDirection:"column"},children:[a("button",{onClick:()=>G("simulation"),style:K,title:E==="simulation"?"Originalgröße":"Maximieren",children:E==="simulation"?a(_t,{children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M4 14h6v6"}),a("path",{d:"M20 10h-6V4"}),a("path",{d:"M14 10l7-7"}),a("path",{d:"M3 21l7-7"})]})}):a(_t,{children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M15 3h6v6"}),a("path",{d:"M9 21H3v-6"}),a("path",{d:"M21 3l-7 7"}),a("path",{d:"M3 21l7-7"})]})})}),a("div",{className:"simulation-section",style:{height:"100%",display:"flex",flexDirection:"column"},children:[a("div",{className:"tabs",style:{paddingRight:"120px"},children:[a("button",{className:`tab-button ${v==="simulation"?"active":""}`,onClick:()=>A("simulation"),children:"Simulation"}),a("button",{className:`tab-button ${v==="data"?"active":""}`,onClick:()=>A("data"),children:"Daten"}),a("button",{className:`tab-button ${v==="training"?"active":""}`,onClick:()=>A("training"),children:"Training"})]}),a("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[" ",v==="simulation"&&a(_t,{children:[e.id==="spam"?a("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",border:"2px dashed #ddd",borderRadius:"8px",minHeight:"300px"},children:a("p",{style:{color:"#999"},children:'Daten-Visualisierung jetzt im "Daten" Tab'})}):(()=>{let o=0;try{i.current&&(o=i.current.predict(F))}catch(W){console.error("Predict Error",W)}const R={};return["spam_advanced","spam_hidden","spam_nonlinear"].includes(e.id)&&(R.allowedModes=["text"],R.hideControls=!0),e.featuresConfig&&(R.features=e.featuresConfig),a("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px"},children:a(C,{time:r,data:p,currentInput:F,currentPrediction:o,groundTruth:n.current,neuralNet:i.current,...R})})})(),a("div",{className:"stats",style:{marginTop:"auto",paddingTop:"10px"},children:[a("p",{children:e.description}),a("p",{style:{color:"#646cff",fontWeight:"bold"},children:["Status: ",z]})]})]}),v==="data"&&a("div",{className:"data-content",style:{flex:1,overflowY:"auto"},children:[(()=>{const o=a("div",{style:{display:"flex",justifyContent:"center"},children:a("div",{style:{background:"#eee",borderRadius:"4px",padding:"2px",display:"flex",gap:"2px"},children:[a("button",{onClick:()=>V("table"),style:{background:x==="table"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:x==="table"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:x==="table"?"bold":"normal",color:x==="table"?"#333":"#666"},children:"Tabelle"}),a("button",{onClick:()=>V("plot"),style:{background:x==="plot"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:x==="plot"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:x==="plot"?"bold":"normal",color:x==="plot"?"#333":"#666"},children:"Graph"})]})}),R=["spam_advanced","spam_hidden","spam_nonlinear"].includes(e.id);return a(_t,{children:[(!R||x==="table")&&a("div",{style:{marginBottom:"15px"},children:o}),(p.length>0||e.id!=="physics")&&x==="plot"&&a("div",{style:{marginBottom:"20px"},children:e.id==="physics"?a(Ze,{data:p,groundTruth:n.current,neuralNet:l.length>0?i.current:null}):(()=>{const W={};return R?(W.allowedModes=["scatter","3d","features"],W.showModel=l.length>0,W.additionalControls=o):(W.staticMode=!0,W.showGroundTruth=!0,W.showModel=l.length>0),e.featuresConfig&&(W.features=e.featuresConfig),a(C,{time:0,data:p,groundTruth:n.current,neuralNet:i.current,...W})})()})]})})(),x==="table"&&a(_t,{children:p.length>0?a("div",{style:{maxHeight:E?"calc(100vh - 350px)":"400px",overflowY:"auto"},children:a("table",{style:{width:"100%",textAlign:"left",borderCollapse:"collapse",fontSize:"0.9rem"},children:[a("thead",{children:a("tr",{style:{background:"#eee",borderBottom:"2px solid #ddd"},children:[Array.isArray(T.inputLabels)?T.inputLabels.map((o,R)=>a("th",{style:{padding:"8px"},children:o},R)):a("th",{style:{padding:"8px"},children:["Input (",T.inputLabel,")"]}),a("th",{style:{padding:"8px"},children:"Target"}),p.length>0&&p[0].text&&a("th",{style:{padding:"8px"},children:"E-Mail Text"})]})}),a("tbody",{children:p.map((o,R)=>{const W=["spam","spam_advanced"].includes(e.id);let Z="transparent",B=o.target,q={padding:"8px"};if(W){const $=o.target===1;Z=$?"#ffebee":"#e8f5e9",B=$?"SPAM":"HAM",q={...q,fontWeight:"bold",color:$?"#c0392b":"#27ae60"}}else B=typeof o.target=="number"?o.target.toFixed(2):o.target;return a("tr",{style:{background:Z,borderBottom:"1px solid #ddd"},children:[Array.isArray(o.input)?o.input.map(($,J)=>a("td",{style:{padding:"8px"},children:$.toFixed(0)},J)):a("td",{style:{padding:"8px"},children:o.input.toFixed(2)}),a("td",{style:q,children:B}),o.text&&a("td",{style:{padding:"8px",color:"#555",fontStyle:"italic",maxWidth:"300px"},children:o.text})]},R)})})]})}):a("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Noch keine Trainingsdaten generiert."})})]}),v==="training"&&a("div",{className:"training-content",style:{flex:1},children:l.length>0?a(Ke,{history:l,currentStepIndex:_,isTraining:y,paramsConfig:e.trainingConfig.params}):a("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Noch kein Training gestartet."})})]})]})]}),a("div",{className:"network-wrapper",style:{flex:E==="network"?"1 0 100%":E==="simulation"?"0 0 0%":`0 0 ${e.id==="spam_hidden"?"500px":"350px"}`,opacity:E==="simulation"?0:1,overflow:"hidden",maxWidth:E==="simulation"?"0px":"100%",transition:b,position:"relative",display:"flex",flexDirection:"column"},children:[a("button",{onClick:()=>G("network"),style:K,title:E==="network"?"Originalgröße":"Maximieren",children:E==="network"?a(_t,{children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M4 14h6v6"}),a("path",{d:"M20 10h-6V4"}),a("path",{d:"M14 10l7-7"}),a("path",{d:"M3 21l7-7"})]})}):a(_t,{children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a("path",{d:"M15 3h6v6"}),a("path",{d:"M9 21H3v-6"}),a("path",{d:"M21 3l-7 7"}),a("path",{d:"M3 21l7-7"})]})})}),a("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:a(Le,{input:F,weight:i.current?i.current.weights||i.current.weight:0,bias:i.current?i.current.bias:0,output:i.current?i.current.predict(F):0,model:i.current,formula:T.formula,inputLabel:T.inputLabels||T.inputLabel,outputLabel:T.outputLabel,biasLabel:T.biasLabel,decimals:e.id.includes("spam")?0:1})})]})]}),a(Je,{onTrain:L,onRun:w,onReset:m,isTraining:y,trainingStep:_,dataCount:p.length,trainerType:D,onTrainerTypeChange:N})]})]})}Ye(a(fn,{}),document.getElementById("app"));
