(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var jt,K,Ue,Lt,me,je,Ge,qe,oe,Qt,te,$t={},Ke=[],bn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function Pt(e,t){for(var n in t)e[n]=t[n];return e}function se(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ee(e,t,n){var i,r,o,l={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:l[o]=t[o];if(arguments.length>2&&(l.children=arguments.length>3?jt.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)l[o]===void 0&&(l[o]=e.defaultProps[o]);return Yt(e,l,i,r,null)}function Yt(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ue,__i:-1,__u:0};return r==null&&K.vnode!=null&&K.vnode(o),o}function xt(e){return e.children}function Ct(e,t){this.props=e,this.context=t}function zt(e,t){if(t==null)return e.__?zt(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?zt(e):null}function Ze(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ze(e)}}function xe(e){(!e.__d&&(e.__d=!0)&&Lt.push(e)&&!Bt.__r++||me!=K.debounceRendering)&&((me=K.debounceRendering)||je)(Bt)}function Bt(){for(var e,t,n,i,r,o,l,d=1;Lt.length;)Lt.length>d&&Lt.sort(Ge),e=Lt.shift(),d=Lt.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,o=[],l=[],t.__P&&((n=Pt({},i)).__v=i.__v+1,K.vnode&&K.vnode(n),ae(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,o,r??zt(i),!!(32&i.__u),l),n.__v=i.__v,n.__.__k[n.__i]=n,tn(o,n,l),i.__e=i.__=null,n.__e!=r&&Ze(n)));Bt.__r=0}function Je(e,t,n,i,r,o,l,d,p,h,c){var f,y,v,x,M,S,z,R=i&&i.__k||Ke,E=t.length;for(p=vn(n,t,R,p,E),f=0;f<E;f++)(v=n.__k[f])!=null&&(y=v.__i==-1?$t:R[v.__i]||$t,v.__i=f,S=ae(e,v,y,r,o,l,d,p,h,c),x=v.__e,v.ref&&y.ref!=v.ref&&(y.ref&&le(y.ref,null,v),c.push(v.ref,v.__c||x,v)),M==null&&x!=null&&(M=x),(z=!!(4&v.__u))||y.__k===v.__k?p=Qe(v,p,e,z):typeof v.type=="function"&&S!==void 0?p=S:x&&(p=x.nextSibling),v.__u&=-7);return n.__e=M,p}function vn(e,t,n,i,r){var o,l,d,p,h,c=n.length,f=c,y=0;for(e.__k=new Array(r),o=0;o<r;o++)(l=t[o])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[o]=Yt(null,l,null,null,null):Nt(l)?l=e.__k[o]=Yt(xt,{children:l},null,null,null):l.constructor==null&&l.__b>0?l=e.__k[o]=Yt(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[o]=l,p=o+y,l.__=e,l.__b=e.__b+1,d=null,(h=l.__i=wn(l,n,p,f))!=-1&&(f--,(d=n[h])&&(d.__u|=2)),d==null||d.__v==null?(h==-1&&(r>c?y--:r<c&&y++),typeof l.type!="function"&&(l.__u|=4)):h!=p&&(h==p-1?y--:h==p+1?y++:(h>p?y--:y++,l.__u|=4))):e.__k[o]=null;if(f)for(o=0;o<c;o++)(d=n[o])!=null&&(2&d.__u)==0&&(d.__e==i&&(i=zt(d)),nn(d,d));return i}function Qe(e,t,n,i){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Qe(r[o],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=zt(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ft(e,t){return t=t||[],e==null||typeof e=="boolean"||(Nt(e)?e.some(function(n){Ft(n,t)}):t.push(e)),t}function wn(e,t,n,i){var r,o,l,d=e.key,p=e.type,h=t[n],c=h!=null&&(2&h.__u)==0;if(h===null&&d==null||c&&d==h.key&&p==h.type)return n;if(i>(c?1:0)){for(r=n-1,o=n+1;r>=0||o<t.length;)if((h=t[l=r>=0?r--:o++])!=null&&(2&h.__u)==0&&d==h.key&&p==h.type)return l}return-1}function ye(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||bn.test(t)?n:n+"px"}function Vt(e,t,n,i,r){var o,l;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ye(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||ye(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(qe,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=oe,e.addEventListener(t,o?te:Qt,o)):e.removeEventListener(t,o?te:Qt,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function be(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=oe++;else if(t.t<n.u)return;return n(K.event?K.event(t):t)}}}function ae(e,t,n,i,r,o,l,d,p,h){var c,f,y,v,x,M,S,z,R,E,O,Z,$,q,C,u,w,_=t.type;if(t.constructor!=null)return null;128&n.__u&&(p=!!(32&n.__u),o=[d=t.__e=n.__e]),(c=K.__b)&&c(t);t:if(typeof _=="function")try{if(z=t.props,R="prototype"in _&&_.prototype.render,E=(c=_.contextType)&&i[c.__c],O=c?E?E.props.value:c.__:i,n.__c?S=(f=t.__c=n.__c).__=f.__E:(R?t.__c=f=new _(z,O):(t.__c=f=new Ct(z,O),f.constructor=_,f.render=Mn),E&&E.sub(f),f.state||(f.state={}),f.__n=i,y=f.__d=!0,f.__h=[],f._sb=[]),R&&f.__s==null&&(f.__s=f.state),R&&_.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Pt({},f.__s)),Pt(f.__s,_.getDerivedStateFromProps(z,f.__s))),v=f.props,x=f.state,f.__v=t,y)R&&_.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),R&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(R&&_.getDerivedStateFromProps==null&&z!==v&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(z,O),t.__v==n.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(z,f.__s,O)===!1){for(t.__v!=n.__v&&(f.props=z,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(g){g&&(g.__=t)}),Z=0;Z<f._sb.length;Z++)f.__h.push(f._sb[Z]);f._sb=[],f.__h.length&&l.push(f);break t}f.componentWillUpdate!=null&&f.componentWillUpdate(z,f.__s,O),R&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(v,x,M)})}if(f.context=O,f.props=z,f.__P=e,f.__e=!1,$=K.__r,q=0,R){for(f.state=f.__s,f.__d=!1,$&&$(t),c=f.render(f.props,f.state,f.context),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[]}else do f.__d=!1,$&&$(t),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++q<25);f.state=f.__s,f.getChildContext!=null&&(i=Pt(Pt({},i),f.getChildContext())),R&&!y&&f.getSnapshotBeforeUpdate!=null&&(M=f.getSnapshotBeforeUpdate(v,x)),u=c,c!=null&&c.type===xt&&c.key==null&&(u=en(c.props.children)),d=Je(e,Nt(u)?u:[u],t,n,i,r,o,l,d,p,h),f.base=t.__e,t.__u&=-161,f.__h.length&&l.push(f),S&&(f.__E=f.__=null)}catch(g){if(t.__v=null,p||o!=null)if(g.then){for(t.__u|=p?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;o[o.indexOf(d)]=null,t.__e=d}else{for(w=o.length;w--;)se(o[w]);ne(t)}else t.__e=n.__e,t.__k=n.__k,g.then||ne(t);K.__e(g,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):d=t.__e=kn(n.__e,t,n,i,r,o,l,p,h);return(c=K.diffed)&&c(t),128&t.__u?void 0:d}function ne(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ne)}function tn(e,t,n){for(var i=0;i<n.length;i++)le(n[i],n[++i],n[++i]);K.__c&&K.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){K.__e(o,r.__v)}})}function en(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Nt(e)?e.map(en):Pt({},e)}function kn(e,t,n,i,r,o,l,d,p){var h,c,f,y,v,x,M,S=n.props||$t,z=t.props,R=t.type;if(R=="svg"?r="http://www.w3.org/2000/svg":R=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(h=0;h<o.length;h++)if((v=o[h])&&"setAttribute"in v==!!R&&(R?v.localName==R:v.nodeType==3)){e=v,o[h]=null;break}}if(e==null){if(R==null)return document.createTextNode(z);e=document.createElementNS(r,R,z.is&&z),d&&(K.__m&&K.__m(t,o),d=!1),o=null}if(R==null)S===z||d&&e.data==z||(e.data=z);else{if(o=o&&jt.call(e.childNodes),!d&&o!=null)for(S={},h=0;h<e.attributes.length;h++)S[(v=e.attributes[h]).name]=v.value;for(h in S)if(v=S[h],h!="children"){if(h=="dangerouslySetInnerHTML")f=v;else if(!(h in z)){if(h=="value"&&"defaultValue"in z||h=="checked"&&"defaultChecked"in z)continue;Vt(e,h,null,v,r)}}for(h in z)v=z[h],h=="children"?y=v:h=="dangerouslySetInnerHTML"?c=v:h=="value"?x=v:h=="checked"?M=v:d&&typeof v!="function"||S[h]===v||Vt(e,h,v,S[h],r);if(c)d||f&&(c.__html==f.__html||c.__html==e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(f&&(e.innerHTML=""),Je(t.type=="template"?e.content:e,Nt(y)?y:[y],t,n,i,R=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,l,o?o[0]:n.__k&&zt(n,0),d,p),o!=null)for(h=o.length;h--;)se(o[h]);d||(h="value",R=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[h]||R=="progress"&&!x||R=="option"&&x!=S[h])&&Vt(e,h,x,S[h],r),h="checked",M!=null&&M!=e[h]&&Vt(e,h,M,S[h],r))}return e}function le(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){K.__e(r,n)}}function nn(e,t,n){var i,r;if(K.unmount&&K.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||le(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){K.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&nn(i[r],t,n||typeof e.type!="function");n||se(e.__e),e.__c=e.__=e.__e=void 0}function Mn(e,t,n){return this.constructor(e,n)}function Sn(e,t,n){var i,r,o,l;t==document&&(t=document.documentElement),K.__&&K.__(e,t),r=(i=!1)?null:t.__k,o=[],l=[],ae(t,e=t.__k=ee(xt,null,[e]),r||$t,$t,t.namespaceURI,r?null:t.firstChild?jt.call(t.childNodes):null,o,r?r.__e:t.firstChild,i,l),tn(o,e,l)}jt=Ke.slice,K={__e:function(e,t,n,i){for(var r,o,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),l=r.__d),l)return r.__E=r}catch(d){e=d}throw e}},Ue=0,Ct.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pt({},this.state),typeof e=="function"&&(e=e(Pt({},n),this.props)),e&&Pt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),xe(this))},Ct.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xe(this))},Ct.prototype.render=xt,Lt=[],je=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ge=function(e,t){return e.__v.__b-t.__v.__b},Bt.__r=0,qe=/(PointerCapture)$|Capture$/i,oe=0,Qt=be(!1),te=be(!0);var Tn=0;function s(e,t,n,i,r,o){t||(t={});var l,d,p=t;if("ref"in p)for(d in p={},t)d=="ref"?l=t[d]:p[d]=t[d];var h={type:e,props:p,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Tn,__i:-1,__u:0,__source:r,__self:o};if(typeof e=="function"&&(l=e.defaultProps))for(d in l)p[d]===void 0&&(p[d]=l[d]);return K.vnode&&K.vnode(h),h}var Dt,ut,qt,ve,Xt=0,rn=[],pt=K,we=pt.__b,ke=pt.__r,Me=pt.diffed,Se=pt.__c,Te=pt.unmount,Pe=pt.__;function ce(e,t){pt.__h&&pt.__h(ut,e,Xt||t),Xt=0;var n=ut.__H||(ut.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function rt(e){return Xt=1,Pn(sn,e)}function Pn(e,t,n){var i=ce(Dt++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):sn(void 0,t),function(d){var p=i.__N?i.__N[0]:i.__[0],h=i.t(p,d);p!==h&&(i.__N=[h,i.__[1]],i.__c.setState({}))}],i.__c=ut,!ut.__f)){var r=function(d,p,h){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(y){return!!y.__c});if(c.every(function(y){return!y.__N}))return!o||o.call(this,d,p,h);var f=i.__c.props!==d;return c.forEach(function(y){if(y.__N){var v=y.__[0];y.__=y.__N,y.__N=void 0,v!==y.__[0]&&(f=!0)}}),o&&o.call(this,d,p,h)||f};ut.__f=!0;var o=ut.shouldComponentUpdate,l=ut.componentWillUpdate;ut.componentWillUpdate=function(d,p,h){if(this.__e){var c=o;o=void 0,r(d,p,h),o=c}l&&l.call(this,d,p,h)},ut.shouldComponentUpdate=r}return i.__N||i.__}function Tt(e,t){var n=ce(Dt++,3);!pt.__s&&on(n.__H,t)&&(n.__=e,n.u=t,ut.__H.__h.push(n))}function bt(e){return Xt=5,Cn(function(){return{current:e}},[])}function Cn(e,t){var n=ce(Dt++,7);return on(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function An(){for(var e;e=rn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ht),e.__H.__h.forEach(ie),e.__H.__h=[]}catch(t){e.__H.__h=[],pt.__e(t,e.__v)}}pt.__b=function(e){ut=null,we&&we(e)},pt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Pe&&Pe(e,t)},pt.__r=function(e){ke&&ke(e),Dt=0;var t=(ut=e.__c).__H;t&&(qt===ut?(t.__h=[],ut.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Ht),t.__h.forEach(ie),t.__h=[],Dt=0)),qt=ut},pt.diffed=function(e){Me&&Me(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(rn.push(t)!==1&&ve===pt.requestAnimationFrame||((ve=pt.requestAnimationFrame)||Ln)(An)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),qt=ut=null},pt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ht),n.__h=n.__h.filter(function(i){return!i.__||ie(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],pt.__e(i,n.__v)}}),Se&&Se(e,t)},pt.unmount=function(e){Te&&Te(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Ht(i)}catch(r){t=r}}),n.__H=void 0,t&&pt.__e(t,n.__v))};var Ce=typeof requestAnimationFrame=="function";function Ln(e){var t,n=function(){clearTimeout(i),Ce&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Ce&&(t=requestAnimationFrame(n))}function Ht(e){var t=ut,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ut=t}function ie(e){var t=ut;e.__c=e.__(),ut=t}function on(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function sn(e,t){return typeof t=="function"?t(e):t}function Wn(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}class Rn{constructor(t){this.model=t}async trainAsync(t,n,i){if(!Array.isArray(n)){const v=arguments[1],x=arguments[2],M=arguments[3];let S=v.min,z=x.min,R=1/0,E=[];const O=20;let Z=0;for(let $=v.min;$<=v.max;$+=v.step)for(let q=x.min;q<=x.max;q+=x.step){const C=parseFloat($.toFixed(2)),u=parseFloat(q.toFixed(2));this.model.setWeight(C),this.model.setBias(u);let w=0,_=0;for(const D of t){const F=this.model.predict(D.input),k=D.target-F;w+=k*k,_+=Math.abs(k)}const g=w/t.length,W=_/t.length;let U=0;for(const D of t)(this.model.predict(D.input)>=.5?1:0)===D.target&&U++;const T=U/t.length;g<R&&(R=g,S=C,z=u);const Y={weight:C,bias:u,error:g,mae:W,accuracy:T};E.push(Y),Z++,Z%O===0&&(M&&M(E,{bestWeight:S,bestBias:z,minError:R}),E=[],await new Promise(D=>setTimeout(D,0)))}return E.length>0&&M&&M(E,{bestWeight:S,bestBias:z,minError:R}),{bestWeight:S,bestBias:z,minError:R}}let o=1/0,l={},d=0;const p=50;let h=[];const c=v=>{const x=[];if(v.step<=0)return[v.min];for(let M=v.min;M<=v.max+1e-4;M+=v.step)x.push(parseFloat(M.toFixed(2)));return x},f=n.map(c),y=async(v,x)=>{if(v===n.length){const S=[];let z=0;x.forEach((w,_)=>{n[_].name.toLowerCase().includes("bias")?z=w:S.push(w)});let R={};this.model.setParams?(x.forEach((w,_)=>{R[n[_].name]=w}),this.model.setParams(R),z===void 0&&(z=0)):(this.model.setWeights?this.model.setWeights(S):this.model.setWeight&&this.model.setWeight(S[0]),this.model.setBias(z),R={weights:[...S],bias:z});let E=0,O=0;for(const w of t){const _=this.model.predict(w.input),g=w.target-_;E+=g*g,O+=Math.abs(g)}const Z=E/t.length,$=O/t.length;let q=0;for(const w of t)(this.model.predict(w.input)>=.5?1:0)===w.target&&q++;const C=q/t.length;Z<o&&(o=Z,l=R);const u={params:[...x],error:Z,mae:$,accuracy:C};h.push(u),d++,d%p===0&&(i&&i(h,{bestParams:l,minError:o}),h=[],await new Promise(w=>setTimeout(w,0)));return}const M=f[v];for(const S of M)x[v]=S,await y(v+1,x)};return await y(0,new Array(n.length)),h.length>0&&i&&i(h,{bestParams:l,minError:o}),{bestParams:l,minError:o}}async trainRandomAsync(t,n,i,r={}){const{patience:o=5e3,seed:l,maxSteps:d=1e4,initialRadius:p=.8,phase1Ratio:h=.8}=r,c=d,f=p,y=.999,v=h;let x=1/0,M={},S=l;S==null?(S=Math.floor(Math.random()*2147483647),console.log(`[AdaptiveRandom] Generated Seed: ${S}`)):console.log(`[AdaptiveRandom] Using Seed: ${S}`);const z=Wn(S);let R=n.map(_=>({min:_.min,max:_.max,span:_.max-_.min})),E=R.map(_=>_.min+z()*_.span);const O=_=>{const g=[];let W=0;_.forEach((k,b)=>{n[b].name.toLowerCase().includes("bias")?W=k:g.push(k)});let U={};this.model.setParams?(_.forEach((k,b)=>{U[n[b].name]=k}),this.model.setParams(U)):(this.model.setWeights?this.model.setWeights(g):this.model.setWeight&&this.model.setWeight(g[0]),this.model.setBias(W),U={weights:g,bias:W});let T=0,Y=0;for(const k of t){const b=this.model.predict(k.input),m=k.target-b;T+=m*m,Y+=Math.abs(m)}let D=0;for(const k of t)(this.model.predict(k.input)>=.5?1:0)===k.target&&D++;const F=D/t.length;return{mse:T/t.length,mae:Y/t.length,accuracy:F,decodedParams:U,weights:g,bias:W}};let Z=O(E);x=Z.mse,M=Z.decodedParams?{...Z.decodedParams,_array:[...E]}:{weights:Z.weights,bias:Z.bias,_array:[...E]},i&&i([{params:[...E],error:x,mae:Z.mae,accuracy:Z.accuracy}],{bestParams:M,minError:x}),await new Promise(_=>setTimeout(_,0));let $=[];const q=10;let C=x,u=[...E],w=0;for(let _=0;_<c;_++){const g=_<c*v;let W;if(g){const b=_/(c*v);W=f*(1-b*.5)}else W=f*.5*Math.pow(y,_-c*v);let U=!1;const T=[...u];let Y=!1;for(;!Y;)T.forEach((b,m)=>{if(z()<.4)return;Y=!0;const a=R[m];let I=!1;if(g){const gt=a.span*.3,Q=M._array&&Math.abs(b-M._array[m])<1e-9;Q&&b<a.min+gt&&(a.min-=a.span*.4,a.span=a.max-a.min,I=!0),Q&&b>a.max-gt&&(a.max+=a.span*.4,a.span=a.max-a.min,I=!0),I&&(U=!0)}let H=a.span*W;I&&(H=Math.max(H,a.span*.25));const et=H;let ot=b+(z()-.5)*2*et;ot<a.min&&(ot=a.min),ot>a.max&&(ot=a.max),T[m]=ot});const D=O(T),F=D.mse-C;let k=!1;if(F<0&&(k=!0),k&&(u=T,C=D.mse),D.mse<x?(x=D.mse,M=D.decodedParams?{...D.decodedParams,_array:[...T]}:{weights:D.weights,bias:D.bias,_array:[...T]},w=0):w++,w>=o&&!g)break;if($.push({params:[...T],error:D.mse,mae:D.mae,accuracy:D.accuracy}),$.length>=q){let b;U&&(b="Grenzen dynamisch erweitert..."),i&&i($,{bestParams:M,minError:x,message:b}),$=[],await new Promise(m=>setTimeout(m,0))}}return $.length>0&&i&&i($,{bestParams:M,minError:x}),{bestParams:M,minError:x}}}class zn{constructor(t=30,n=50){this.velocity=t,this.initialPosition=n}getPosition(t){return this.velocity*t+this.initialPosition}}class $n{constructor(){this.weight=0,this.bias=0}predict(t){return this.weight*t+this.bias}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function Dn({time:e,groundTruth:t,neuralNet:n,maxDistance:i=300}){const r=bt(null);Tt(()=>{const l=r.current;if(!l)return;const d=l.getContext("2d"),p=l.width,h=l.height,c=50,f=p-2*c;d.clearRect(0,0,p,h);const y=t.getPosition(e),v=n.predict(e),x=c+y%i/i*f,M=c+v%i/i*f;d.fillStyle="#f0f0f0",d.fillRect(0,0,p,h/2),d.fillStyle="#e0e0e0",d.fillRect(0,h/2,p,h/2),d.beginPath(),d.strokeStyle="#fff",d.setLineDash([20,20]),d.moveTo(0,h/4),d.lineTo(p,h/4),d.moveTo(0,h*3/4),d.lineTo(p,h*3/4),d.stroke(),d.beginPath(),d.strokeStyle="#ccc",d.setLineDash([]),d.moveTo(c,0),d.lineTo(c,h),d.moveTo(p-c,0),d.lineTo(p-c,h),d.stroke(),o(d,x,h/4,"#2ecc71","Ground Truth"),o(d,M,h*3/4,"#e74c3c","Neural Net"),d.fillStyle="#333",d.font="14px monospace",d.fillText(`Zeit: ${e.toFixed(1)}s`,10,20),d.fillText(`Pos GT: ${y.toFixed(1)}m`,10,40),d.fillText(`Pos NN: ${v.toFixed(1)}m`,10,h/2+40)},[e,t,n,i]);function o(l,d,p,h,c){l.save(),l.translate(d,p),l.fillStyle=h,l.fillRect(-20,-10,40,20),l.fillStyle="#000",l.fillRect(-15,-15,10,5),l.fillRect(5,-15,10,5),l.fillRect(-15,10,10,5),l.fillRect(5,10,10,5),l.fillStyle="#000",l.font="10px sans-serif",l.textAlign="center",l.fillText(c,0,-20),l.restore()}return s("div",{style:{border:"2px solid #333",borderRadius:"8px",overflow:"hidden"},children:s("canvas",{ref:r,width:800,height:300,style:{width:"100%",display:"block"}})})}const Ae={id:"linear_regression",title:"Phase 1: Linear Regression",description:"A simple neuron learns the relationship between time and position. This corresponds to a linear regression.",Model:$n,GroundTruth:zn,CanvasComponent:Dn,defaultParams:{weight:0,bias:0},groundTruthDefaults:[30,50],getInput:e=>e,generateData:e=>Array.from({length:20},(n,i)=>i*.5).map(n=>({input:n,target:e.getPosition(n)})),trainingConfig:{maxSteps:2e3,params:[{name:"weight",min:0,max:60,step:1},{name:"bias",min:0,max:100,step:2}]},networkViz:{formula:"pos = w * t + b",inputLabel:"Zeit (t)",outputLabel:"Pos (m)",biasLabel:"b"}};class Nn{constructor(t=.5,n=-5){this.weight=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){const n=this.sigmoid(this.weight*t+this.bias);return Math.random()<n?1:0}getProbability(t){return this.sigmoid(this.weight*t+this.bias)}}class En{constructor(){this.weight=0,this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=this.weight*t+this.bias;return this.sigmoid(n)}setWeight(t){this.weight=t}setBias(t){this.bias=t}}function Ot(e,t,n=10){if(e===t)return[e];const i=Le(t-e,!1),r=Le(i/(n-1),!0),o=Math.floor(e/r)*r,l=Math.ceil(t/r)*r,d=[],p=r/1e3;for(let h=o;h<l+r/2;h+=r)h>=e-p&&h<=t+p&&d.push(Number(h.toPrecision(12)));return d}function Le(e,t){const n=Math.floor(Math.log10(e)),i=e/Math.pow(10,n);let r;return t?i<1.5?r=1:i<3?r=2:i<7?r=5:r=10:i<=1?r=1:i<=2?r=2:i<=5?r=5:r=10,r*Math.pow(10,n)}function Vn({time:e,groundTruth:t,neuralNet:n,data:i,staticMode:r=!1,showModel:o=!0,showGroundTruth:l=!0,showProbabilities:d=!1}){const p=bt(null),[h,c]=rt({k:1,x:0,y:0}),[f,y]=rt(!1),v=bt({x:0,y:0}),[x,M]=rt(null),S=bt([]),z=C=>{C.preventDefault();const w=-C.deltaY*.001,_=h.k;let g=_*(1+w);g=Math.max(.5,Math.min(g,10));const W=p.current.getBoundingClientRect(),U=p.current.width/W.width,T=p.current.height/W.height,Y=(C.clientX-W.left)*U,D=(C.clientY-W.top)*T,F=40,k=(Y-F-h.x)/_,b=(D-(300-F)-h.y)/_,m=Y-F-k*g,a=D-(300-F)-b*g;c({k:g,x:m,y:a})},R=C=>{y(!0),v.current={x:C.clientX,y:C.clientY}},E=C=>{const u=p.current;if(!u)return;const w=u.getBoundingClientRect(),_=u.width/w.width,g=u.height/w.height;if(f){const W=(C.clientX-v.current.x)*_,U=(C.clientY-v.current.y)*g;v.current={x:C.clientX,y:C.clientY},c(T=>({...T,x:T.x+W,y:T.y+U})),M(null)}else{const W=(C.clientX-w.left)*_,U=(C.clientY-w.top)*g;let T=null,Y=15;const D=S.current;for(let F=D.length-1;F>=0;F--){const k=D[F],b=Math.sqrt(Math.pow(k.x-W,2)+Math.pow(k.y-U,2));b<Y&&(Y=b,T=k.info)}M(T)}},O=()=>y(!1),Z=()=>{y(!1),M(null)},$=bt(0),q=()=>{const C=Date.now();C-$.current<300&&M(null),$.current=C};return Tt(()=>{const C=p.current;if(!C)return;const u=C.getContext("2d"),w=C.width,_=C.height;u.clearRect(0,0,w,_),S.current=[];const g=40,W=w-2*g,U=_-2*g,T=0,Y=20,D=1,F=V=>g+V/Y*W*h.k+h.x,k=V=>_-g-V/D*U*h.k+h.y,b=V=>(V-g-h.x)/(W*h.k)*Y,m=V=>-((V-(_-g)-h.y)/(U*h.k))*D,a=b(g),I=b(w-g),H=m(_-g),et=m(g),ot=Ot(a,I,10),gt=Ot(H,et,5);if(u.beginPath(),u.strokeStyle="#eee",u.lineWidth=1,u.fillStyle="#333",u.textAlign="center",u.textBaseline="top",u.font="10px sans-serif",ot.forEach(V=>{const L=F(V);L<g||L>w-g||(u.moveTo(L,g),u.lineTo(L,_-g),u.fillText(Number(V.toFixed(2)),L,_-g+5))}),u.textAlign="right",u.textBaseline="middle",gt.forEach(V=>{const L=k(V);L<g||L>_-g||(u.moveTo(g,L),u.lineTo(w-g,L),u.fillText(Number(V.toFixed(2)),g-5,L))}),u.stroke(),u.beginPath(),u.strokeStyle="#333",u.lineWidth=1,u.rect(g,g,W,U),u.stroke(),u.fillStyle="#333",u.textAlign="center",u.textBaseline="alphabetic",u.fillText("Number of 'Spam' Words",w/2,_-10),u.save(),u.translate(15,_/2),u.rotate(-Math.PI/2),u.textAlign="center",u.fillText("Spam Probability",0,0),u.restore(),u.save(),u.beginPath(),u.rect(g,g,W,U),u.clip(),o&&n&&((V,L,J=[])=>{u.beginPath(),u.strokeStyle=L,u.setLineDash(J),u.lineWidth=2;const A=Math.max(T,a),P=Math.min(Y,I);if(P<A)return;const N=(P-A)/100,j=Math.max(N,.05);let X=!1;for(let nt=A;nt<=P+j;nt+=j){const _t=Math.min(Math.max(nt,T),Y);let ct=0;typeof V.getProbability=="function"?ct=V.getProbability(_t):typeof V.predict=="function"&&(ct=V.predict(_t));const dt=F(_t),lt=k(ct);X?u.lineTo(dt,lt):(u.moveTo(dt,lt),X=!0)}u.stroke(),u.setLineDash([])})(n,"#e74c3c"),r&&i)i.forEach(V=>{if(V.input<a-5||V.input>I+5)return;const L=0,J=0,A=F(V.input),P=k(V.target);S.current.push({x:A,y:P,info:{x:A,y:P,input:V.input,target:V.target,type:"Ground Truth"}});let N=null;if(n&&o)try{N=n.predict(V.input)>.5?"#e74c3c":"#2ecc71"}catch{}if(d&&n&&typeof n.predict=="function")try{const j=n.predict(V.input),X=k(j);o&&(u.beginPath(),u.moveTo(A,P),u.lineTo(A,X),u.setLineDash([2,4]),u.strokeStyle="rgba(0,0,0,0.15)",u.lineWidth=1,u.stroke(),u.setLineDash([]));let nt=null;n&&o&&(nt=n.predict(V.input)>.5?"#e74c3c":"#2ecc71"),nt&&(u.beginPath(),u.arc(A,X,6,0,Math.PI*2),u.strokeStyle=nt,u.lineWidth=2,u.stroke()),S.current.push({x:A,y:X,info:{x:A,y:X,input:V.input,target:V.target,prediction:j,type:"Prediction"}})}catch{}else N&&(u.beginPath(),u.arc(A+L,P+J,8,0,Math.PI*2),u.strokeStyle=N,u.lineWidth=2,u.stroke());u.beginPath(),u.arc(A+L,P+J,5,0,Math.PI*2),u.fillStyle=V.target===1?"#e74c3c":"#2ecc71",u.fill(),u.strokeStyle="#fff",u.lineWidth=1,u.stroke()});else if(!r){const L=Math.floor(e*2),J=50,A=N=>{const j=Math.sin(N*123.456)*1e4;return j-Math.floor(j)},P=Math.min(L,J);for(let N=0;N<P;N++){const j=A(N+1),X=Math.floor(j*21),nt=t?t.getProbability(X):0,_t=A(N+999)<nt?1:0;if(X<a-5||X>I+5)continue;const ct=F(X),dt=k(_t);let lt=null;if(n&&o)try{lt=n.predict(X)>.5?"#e74c3c":"#2ecc71"}catch{}if(d&&n&&typeof n.predict=="function")try{const ht=n.predict(X),B=k(ht);o&&(u.beginPath(),u.moveTo(ct,dt),u.lineTo(ct,B),u.setLineDash([2,4]),u.strokeStyle="rgba(0,0,0,0.35)",u.lineWidth=1,u.stroke(),u.setLineDash([]));let mt=null;n&&o&&(mt=n.predict(X)>.5?"#e74c3c":"#2ecc71"),mt&&(u.beginPath(),u.arc(ct,B,6,0,Math.PI*2),u.strokeStyle=mt,u.lineWidth=2,u.stroke())}catch{}else lt&&(u.beginPath(),u.arc(finalX,finalY,8,0,Math.PI*2),u.strokeStyle=lt,u.lineWidth=2,u.stroke());u.beginPath(),u.arc(finalX,finalY,5,0,Math.PI*2),u.fillStyle=_t?"#e74c3c":"#2ecc71",u.fill(),u.strokeStyle="#fff",u.lineWidth=1,u.stroke()}if(P>0&&P<=J){const N=P-1,j=A(N+1),X=Math.floor(j*21),nt=t.getProbability(X),_t=A(N+999)<nt?1:0,ct=0,dt=0,lt=F(X)+ct,ht=k(_t)+dt;lt>g&&lt<w-g&&ht>g&&ht<_-g&&(u.beginPath(),u.arc(lt,ht,8,0,Math.PI*2),u.strokeStyle="#333",u.stroke(),u.fillStyle="#333",u.font="10px sans-serif",u.fillText(`${X}`,lt,ht-12))}}if(u.restore(),x){u.save(),u.fillStyle="rgba(0,0,0,0.8)",u.strokeStyle="#fff";const V=x.target===1?"SPAM":"HAM",L=`Words: ${x.input}`,J=x.type?`(${x.type})`:"",A=120,P=x.type?55:40;let N=x.x+10,j=x.y-10;N+A>w&&(N=x.x-A-10),j+P>_&&(j=x.y-P-10),j<0&&(j=x.y+10),u.beginPath(),u.roundRect(N,j,A,P,4),u.fill(),u.lineWidth=1,u.stroke(),u.textBaseline="top",u.textAlign="left",u.font="bold 11px sans-serif",u.fillStyle=x.target===1?"#e74c3c":"#2ecc71",u.fillText(`${V} ${J}`,N+8,j+6),u.fillStyle="#ddd",u.font="10px sans-serif",u.fillText(L,N+8,j+20),x.prediction!==void 0&&u.fillText(`Pred: ${x.prediction.toFixed(2)}`,N+8,j+32),u.restore()}},[e,t,n,i,r,o,l,d,h,x]),s("div",{className:"canvas-container",children:s("canvas",{ref:p,width:600,height:300,style:{width:"100%",border:"1px solid #ccc",background:"#fff",cursor:x?"pointer":f?"grabbing":"grab"},onWheel:z,onMouseDown:R,onMouseMove:E,onMouseUp:O,onMouseLeave:Z,onClick:q})})}const In=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},We={id:"logistic_regression",title:"Phase 2: Logistic Regression",description:'Classification of emails as "Spam" or "Not Spam" based on word count. This is a logistic regression.',Model:En,GroundTruth:Nn,CanvasComponent:Vn,defaultParams:{weight:0,bias:0},groundTruthDefaults:[.5,-5],getInput:e=>{const t=Math.floor(e);return Math.floor(In(t)*20)},generateData:e=>{const t=[];for(let n=0;n<50;n++){const i=Math.floor(Math.random()*21),r=e.classify(i);t.push({input:i,target:r})}return t.sort((n,i)=>n.input-i.input)},trainingConfig:{maxSteps:3e3,params:[{name:"weight",min:0,max:2,step:.1},{name:"bias",min:-10,max:5,step:.5}]},networkViz:{formula:"p = σ(w * x + b)",inputLabel:"Wörter (x)",outputLabel:"Spam (p)",biasLabel:"b"},isFinished:e=>e>=25};class ue{constructor(t=[.5,.2,.8,-.1],n=-3){this.weights=t,this.bias=n}sigmoid(t){return 1/(1+Math.exp(-t))}classify(t){let n=this.bias;for(let r=0;r<this.weights.length;r++)n+=this.weights[r]*t[r];const i=this.sigmoid(n);return Math.random()<i?1:0}getProbability(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}}class an{constructor(t=4){this.weights=new Array(t).fill(0),this.bias=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){let n=this.bias;for(let i=0;i<this.weights.length;i++)n+=this.weights[i]*t[i];return this.sigmoid(n)}setWeights(t){this.weights=[...t]}setBias(t){this.bias=t}setWeightAt(t,n){t>=0&&t<this.weights.length&&(this.weights[t]=n)}}const Yn=[{label:"Spam Words",idx:0,max:15},{label:"Capitals",idx:1,max:25},{label:"Links",idx:2,max:8},{label:"Total Words",idx:3,max:100}];function de({data:e,currentInput:t,currentPrediction:n,neuralNet:i,allowedModes:r=["features","scatter","3d","text"],hideControls:o=!1,showModel:l=!0,additionalControls:d=null,features:p=Yn}){const h=bt(null),[c,f]=rt(r[0]);Tt(()=>{r.includes(c)||f(r[0])},[r]);const[y,v]=rt(0),[x,M]=rt(p.length===2?1:3),[S,z]=rt(2),[R,E]=rt(!1),[O,Z]=rt({x:-.5,y:.5}),[$,q]=rt({k:1,x:0,y:0}),C=bt(!1),u=bt({x:0,y:0}),[w,_]=rt(null),g=bt([]),W=m=>{if(c!=="scatter")return;m.preventDefault();const I=-m.deltaY*.001,H=$.k;let et=H*(1+I);et=Math.max(.5,Math.min(et,50));const ot=h.current;if(!ot)return;const gt=ot.getBoundingClientRect(),Q=ot.width/gt.width,V=ot.height/gt.height,L=(m.clientX-gt.left)*Q,J=(m.clientY-gt.top)*V,A=50,P=ot.height-A,N=(L-A-$.x)/H,j=(P+$.y-J)/H,X=L-A-N*et,nt=J-P+j*et;q({k:et,x:X,y:nt})},U=m=>{c!=="3d"&&c!=="scatter"||(C.current=!0,u.current={x:m.clientX,y:m.clientY})},T=m=>{const a=h.current;if(!a)return;const I=a.getBoundingClientRect(),H=a.width/I.width,et=a.height/I.height;if(C.current){const A=(m.clientX-u.current.x)*H,P=(m.clientY-u.current.y)*et;u.current={x:m.clientX,y:m.clientY},c==="3d"?Z(N=>({x:N.x+P*.01,y:N.y+A*.01})):c==="scatter"&&q(N=>({...N,x:N.x+A,y:N.y+P}));return}const ot=(m.clientX-I.left)*H,gt=(m.clientY-I.top)*et;let Q=null,L=15;const J=g.current;for(let A=J.length-1;A>=0;A--){const P=J[A],N=Math.sqrt((P.x-ot)**2+(P.y-gt)**2);N<L&&(L=N,Q=P.info)}_(Q)},Y=()=>{C.current=!1},D=()=>{_(null),C.current=!1},F=bt(0),k=()=>{const m=Date.now();m-F.current<300&&_(null),F.current=m};Tt(()=>{const m=h.current;if(!m)return;const a=m.getContext("2d"),I=m.width,H=m.height;a.clearRect(0,0,I,H),a.fillStyle="#fff",a.fillRect(0,0,I,H),g.current=[];const et=Q=>{if(!e||e.length===0)return p[Q].max;const V=Math.max(...e.map(L=>L.input[Q]));return V>0?V:p[Q].max},ot=Q=>Q===2?"#3498db":Q===1?"#e74c3c":"#2ecc71",gt=Q=>Q===3?"CLASS 3":Q===1?"SPAM":"HAM";if(c==="3d"){const Q=et(y),V=et(x),L=et(S),J=I/2,A=H/2,P=150,N=(B,mt,wt)=>{let St=B*Math.cos(O.y)-wt*Math.sin(O.y),G=B*Math.sin(O.y)+wt*Math.cos(O.y),tt=mt*Math.cos(O.x)-G*Math.sin(O.x),at=mt*Math.sin(O.x)+G*Math.cos(O.x);const it=400/(400-at);return{x:J+St*it,y:A+tt*it,z:at}},X=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]].map(B=>N(B[0]*P,B[1]*P,B[2]*P)),nt="#e29301ff",_t="#2980b9",ct="#c00798ff",dt=(B,mt)=>{a.beginPath(),a.strokeStyle=mt,a.lineWidth=1,B.forEach(([wt,St])=>{a.moveTo(X[wt].x,X[wt].y),a.lineTo(X[St].x,X[St].y)}),a.stroke()};dt([[0,1],[3,2],[4,5],[7,6]],nt),dt([[0,3],[1,2],[4,7],[5,6]],_t),dt([[0,4],[1,5],[2,6],[3,7]],ct),a.font="bold 11px sans-serif",a.fillStyle=nt,a.fillText("X: "+p[y].label,X[1].x,X[1].y),a.fillStyle=_t,a.fillText("Y: "+p[x].label,X[3].x,X[3].y),a.fillStyle=ct,a.fillText("Z: "+p[S].label,X[4].x,X[4].y);const lt=[],ht=(B,mt)=>B/mt*2-1;if(l&&i&&i.weights){const B=i.weights[y]||0,mt=i.weights[x]||0,wt=i.weights[S]||0,St=i.bias||0;if(Math.abs(wt)>.001){a.strokeStyle="rgba(142, 68, 173, 0.3)",a.lineWidth=1;const G=(it,st)=>{const yt=(it+1)/2*Q,ft=(st+1)/2*V,kt=(-B*yt-mt*ft-St)/wt;return ht(kt,L)},tt=(it,st)=>{if(Math.abs(it.z)<=3&&Math.abs(st.z)<=3){const yt=N(it.x*P,-it.y*P,it.z*P),ft=N(st.x*P,-st.y*P,st.z*P);a.beginPath(),a.moveTo(yt.x,yt.y),a.lineTo(ft.x,ft.y),a.stroke()}},at=6;for(let it=0;it<=at;it++){const st=-1+it/at*2,yt=G(-1,st),ft=G(1,st);tt({x:-1,y:st,z:yt},{x:1,y:st,z:ft})}for(let it=0;it<=at;it++){const st=-1+it/at*2,yt=G(st,-1),ft=G(st,1);tt({x:st,y:-1,z:yt},{x:st,y:1,z:ft})}}}e&&e.forEach(B=>{const mt=ht(B.input[y],Q),wt=-ht(B.input[x],V),St=ht(B.input[S],L),G=N(mt*P,wt*P,St*P);let tt=null;if(i&&l)try{tt=i.predict(B.input)>.5?"#e74c3c":"#2ecc71"}catch{}lt.push({...G,color:ot(B.target),radius:3,haloColor:tt,pt:B})}),lt.sort((B,mt)=>B.z-mt.z),lt.forEach(B=>{B.z<3&&g.current.push({x:B.x,y:B.y,info:{x:B.x,y:B.y,text:B.pt.text,target:B.pt.target,isSpam:B.pt.target===1,features:{xLabel:p[y].label,xVal:B.pt.input[y],yLabel:p[x].label,yVal:B.pt.input[x],zLabel:p[S].label,zVal:B.pt.input[S]}}}),B.haloColor&&(a.beginPath(),a.arc(B.x,B.y,B.radius+2,0,Math.PI*2),a.strokeStyle=B.haloColor,a.lineWidth=1.5,a.stroke()),a.beginPath(),a.arc(B.x,B.y,B.radius,0,Math.PI*2),a.fillStyle=B.color,a.fill()})}if(c==="scatter"){const Q=et(y),V=et(x),L=50,J=I-2*L,A=H-2*L,P=H-L,N="#c0392b",j="#2980b9",X=G=>L+G/Q*J*$.k+$.x,nt=G=>P-G/V*A*$.k+$.y;a.save(),a.beginPath(),a.rect(L,L,J,A),a.clip(),a.restore();const _t=G=>(G-L-$.x)/(J*$.k)*Q,ct=G=>(P+$.y-G)/(A*$.k)*V,dt=_t(L),lt=_t(L+J),ht=ct(P),B=ct(L),mt=Ot(Math.min(dt,lt),Math.max(dt,lt),8),wt=Ot(Math.min(ht,B),Math.max(ht,B),6);if(a.lineWidth=1,a.strokeStyle="#eee",a.fillStyle="#666",a.font="10px sans-serif",a.textAlign="center",a.textBaseline="top",mt.forEach(G=>{const tt=X(G);tt<L||tt>L+J||(a.beginPath(),a.moveTo(tt,L),a.lineTo(tt,P),a.stroke(),a.fillText(Number(G.toFixed(2)),tt,P+5))}),a.textAlign="right",a.textBaseline="middle",wt.forEach(G=>{const tt=nt(G);tt<L||tt>P||(a.beginPath(),a.moveTo(L,tt),a.lineTo(L+J,tt),a.stroke(),a.fillText(Number(G.toFixed(2)),L-5,tt))}),a.strokeStyle="#ccc",a.lineWidth=2,a.strokeRect(L,L,J,A),a.textAlign="center",a.font="bold 12px sans-serif",a.fillStyle=N,a.fillText(`${p[y].label}`,L+J/2,P+30),a.save(),a.translate(15,P-A/2),a.rotate(-Math.PI/2),a.fillStyle=j,a.fillText(`${p[x].label}`,0,0),a.restore(),a.save(),a.beginPath(),a.rect(L,L,J,A),a.clip(),R&&i&&p.length===2){const tt=Math.floor(dt/.5)*.5,at=Math.ceil(lt/.5)*.5,it=Math.floor(ht/.5)*.5,st=Math.ceil(B/.5)*.5;if((at-tt)/.5*((st-it)/.5)<5e4)for(let ft=tt;ft<=at;ft+=.5)for(let kt=it;kt<=st;kt+=.5)try{const Mt=[0,0];y<2&&(Mt[y]=ft),x<2&&(Mt[x]=kt);const vt=i.predict(Mt),At=X(ft),Et=nt(kt),ge=X(ft+.5),_e=nt(kt+.5),fn=Math.abs(ge-At),pn=Math.abs(Et-_e),gn=Math.min(At,ge),_n=Math.min(Et,_e),mn=Math.round(46*(1-vt)+231*vt),xn=Math.round(204*(1-vt)+76*vt),yn=Math.round(113*(1-vt)+60*vt);a.fillStyle=`rgba(${mn}, ${xn}, ${yn}, 0.2)`,a.fillRect(gn,_n,fn+.5,pn+.5)}catch{}}const St=(G,tt,at,it,st)=>{const yt=X(G[y]),ft=nt(G[x]);st&&(a.beginPath(),a.arc(yt,ft,at+3,0,2*Math.PI),a.strokeStyle=st,a.lineWidth=2,a.stroke()),a.beginPath(),a.arc(yt,ft,at,0,2*Math.PI),a.fillStyle=tt,a.fill(),it&&(a.strokeStyle=it,a.lineWidth=2,a.stroke())};if(e&&e.forEach(G=>{const tt=X(G.input[y]),at=nt(G.input[x]);if(tt<L||tt>L+J||at<L||at>P)return;g.current.push({x:tt,y:at,info:{x:tt,y:at,text:G.text,target:G.target,isSpam:G.target===1,features:{xLabel:p[y].label,xVal:G.input[y],yLabel:p[x].label,yVal:G.input[x]}}});let it=null;if(i&&l)try{it=i.predict(G.input)>.5?"#e74c3c":"#2ecc71"}catch{}St(G.input,ot(G.target),5,"#fff",it)}),l&&i){let G=i.weights;const tt=i.bias||0;if(G){const at=G[y]||0,it=G[x]||0,st=tt;a.beginPath(),a.strokeStyle="rgba(142, 68, 173, 0.8)",a.lineWidth=2,a.setLineDash([10,5]);const yt=dt-(lt-dt),ft=lt+(lt-dt),kt=(Mt,vt)=>({x:X(Mt),y:nt(vt)});if(Math.abs(it)>.001){const Mt=Et=>(-at*Et-st)/it,vt=kt(yt,Mt(yt)),At=kt(ft,Mt(ft));a.moveTo(vt.x,vt.y),a.lineTo(At.x,At.y)}else if(Math.abs(at)>.001){const Mt=-st/at,vt=kt(Mt,ht-100),At=kt(Mt,B+100);a.moveTo(vt.x,vt.y),a.lineTo(At.x,At.y)}a.stroke(),a.setLineDash([])}}t&&St(t,"#3498db",8,"#2980b9"),a.restore(),a.fillStyle="#666",a.textAlign="right",a.font="11px sans-serif",a.fillText("Red=Spam, Green=OK",I-10,20)}if(c==="text"){if(a.textAlign="center",a.textBaseline="middle",!t||!t.text){a.fillStyle="#999",a.font="20px sans-serif",a.fillText("No text available",I/2,H/2);return}const Q=n>.5,V=Q?"#feeff0":"#effaf0";a.fillStyle=V,a.fillRect(0,0,I,H);const L=t.text;a.fillStyle="#333",a.font="24px serif";const J=L.split(" ");let A="";const P=35,N=I/2;let j=H/3;const X=I-100;for(let ct=0;ct<J.length;ct++){const dt=A+J[ct]+" ";a.measureText(dt).width>X&&ct>0?(a.fillText(A,N,j),A=J[ct]+" ",j+=P):A=dt}a.fillText(A,N,j),j+=60;const nt=t.groundTruth===1;a.font="bold 16px sans-serif",a.fillStyle="#555",a.fillText(`Truth: ${nt?"SPAM":"HAM"}`,N,j),j+=30;const _t=(n*100).toFixed(1);a.font="bold 20px sans-serif",a.fillStyle=Q?"#c0392b":"#27ae60",a.fillText(`Prediction: ${Q?"SPAM":"HAM"} (${_t}%)`,N,j);return}if(c==="features"){const V=(I-90)/2,L=(H-90)/2;[{x:30,y:30,...p[0]},{x:30+V+30,y:30,...p[1]},{x:30,y:30+L+30,...p[2]},{x:30+V+30,y:30+L+30,...p[3]}].forEach(A=>{if(a.strokeStyle="#ccc",a.strokeRect(A.x,A.y,V,L),a.fillStyle="#333",a.font="12px Arial",a.textAlign="center",a.fillText(A.label,A.x+V/2,A.y-5),e&&e.forEach(P=>{const N=P.input[A.idx],j=A.x+N/A.max*V,X=A.y+L-P.target*(L-20)-10;g.current.push({x:j,y:X,info:{x:j,y:X,text:P.text,target:P.target,isSpam:P.target===1,features:{valLabel:A.label,val:N}}});let nt=null;if(i&&l)try{nt=i.predict(P.input)>.5?"#e74c3c":"#2ecc71"}catch{}nt&&(a.beginPath(),a.arc(j,X,4.5,0,2*Math.PI),a.strokeStyle=nt,a.lineWidth=1,a.stroke()),a.beginPath(),a.arc(j,X,3,0,2*Math.PI),a.fillStyle=ot(P.target),a.globalAlpha=.6,a.fill(),a.globalAlpha=1}),t){const P=t[A.idx],N=A.x+P/A.max*V;a.beginPath(),a.moveTo(N,A.y),a.lineTo(N,A.y+L),a.strokeStyle="#3498db",a.setLineDash([5,5]),a.stroke(),a.setLineDash([])}})}if(w&&(c==="features"||c==="scatter"||c==="3d")){a.save(),a.fillStyle="rgba(0,0,0,0.85)",a.strokeStyle="#fff";const Q=w.text||"No Text",V=gt(w.target!==void 0?w.target:w.isSpam?1:0),L=a.measureText(Q),J=Math.max(L.width,140)+20;let A=70;w.features&&(w.features.zLabel?A=90:w.features.yLabel?A=85:A=60);let P=w.x+15,N=w.y-15;P+J>I&&(P=w.x-J-10),N+A>H&&(N=w.y-A-10),N<0&&(N=w.y+20),a.beginPath(),a.roundRect(P,N,J,A,5),a.fill(),a.lineWidth=1,a.stroke(),a.textBaseline="top",a.textAlign="left",a.font="bold 12px sans-serif",a.fillStyle=ot(w.target!==void 0?w.target:w.isSpam?1:0),a.fillText(V,P+10,N+10),a.fillStyle="#ddd",a.font="italic 11px sans-serif",a.fillText(Q,P+10,N+28),w.features&&(a.fillStyle="#fff",a.font="11px monospace",w.features.xLabel?(a.fillText(`${w.features.xLabel}: ${w.features.xVal}`,P+10,N+46),a.fillText(`${w.features.yLabel}: ${w.features.yVal}`,P+10,N+60),w.features.zLabel&&a.fillText(`${w.features.zLabel}: ${w.features.zVal}`,P+10,N+74)):w.features.valLabel&&a.fillText(`${w.features.valLabel}: ${w.features.val}`,P+10,N+46)),a.restore()}},[e,t,n,i,c,y,x,S,O,l,$,R]);const b={features:"Alle Features",scatter:"2D Plot","3d":"3D Plot",text:"Text Mode"};return s("div",{style:{textAlign:"center"},children:[!o&&s("div",{style:{marginBottom:"10px",display:"flex",gap:"5px",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",fontSize:"0.9rem"},children:[s("div",{children:d}),s("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[s("select",{value:c,onChange:m=>f(m.target.value),style:{padding:"4px"},children:r.map(m=>s("option",{value:m,children:b[m]},m))}),(c==="scatter"||c==="3d")&&s(xt,{children:[s("span",{children:"X:"}),s("select",{value:y,onChange:m=>v(parseInt(m.target.value)),style:{padding:"4px"},children:p.map(m=>s("option",{value:m.idx,children:m.label},m.idx))}),s("span",{children:"Y:"}),s("select",{value:x,onChange:m=>M(parseInt(m.target.value)),style:{padding:"4px"},children:p.map(m=>s("option",{value:m.idx,children:m.label},m.idx))})]}),c==="scatter"&&p.length===2&&s("label",{style:{display:"flex",alignItems:"center",gap:"3px",marginLeft:"5px",fontSize:"0.8rem",cursor:"pointer",background:"#f5f5f5",padding:"2px 5px",borderRadius:"3px",border:"1px solid #ddd"},children:[s("input",{type:"checkbox",checked:R,onChange:m=>E(m.target.checked)}),"Show Grid"]}),c==="3d"&&s(xt,{children:[s("span",{children:"Z:"}),s("select",{value:S,onChange:m=>z(parseInt(m.target.value)),style:{padding:"4px"},children:p.map(m=>s("option",{value:m.idx,children:m.label},m.idx))})]})]})]}),s("canvas",{ref:h,width:600,height:400,style:{border:"1px solid #eee",maxWidth:"100%",borderRadius:"4px",cursor:w?"pointer":c==="3d"||c==="scatter"?C.current?"grabbing":"grab":"default"},onWheel:W,onMouseDown:U,onMouseMove:T,onMouseUp:Y,onMouseLeave:Y,onMouseOut:D,onClick:k}),!o&&s("div",{class:"control-text",style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:c==="3d"?"Drag to rotate 3D view":c==="scatter"?"Drag to Pan, Scroll to Zoom":"Wähle Achsen für die Visualisierung"})]})}const Re=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},Kt=e=>{const t=["winner","won","gift card","urgent","rolex","viagra","cash","prize","singles","marketing","buy","free","money","security alert","click","claim","fake","verification"],n=e.toLowerCase();let i=0;t.forEach(d=>{n.includes(d)&&(i+=1)}),i>10&&(i=10);const r=(e.match(/[A-Z]/g)||[]).length/10,o=(e.match(/http/g)||[]).length,l=e.split(/\s+/).length/50;return[i,r,o,l]},Rt={id:"multiple_inputs",title:"Phase 3: Multiple Inputs",description:"Advanced spam detection with two linear features (words and links). The network learns a separation line.",Model:an,GroundTruth:ue,CanvasComponent:de,defaultParams:{weights:[0,0,0,0],bias:0},groundTruthDefaults:[[1.5,.5,2,-.5],-5],getInput:e=>{const t=Math.floor(e*.3),n=Re(t)>.5,i=n?Rt.examples.spam:Rt.examples.ham,r=Math.floor(Re(t+99)*i.length),o=i[r],l=Kt(o);return l.text=o,l.groundTruth=n?1:0,l},examples:{spam:["WINNER! Won $1000 Gift Card! Claim at http://prize-giveaway.net","URGENT: Verify account at http://secure-bank-login.com/fraud","Cheap Rolex watches! 50% OFF at www.fake-watches.cn","Lose weight fast! Buy pills: http://diet-miracle.com","CONGRATS! Cash prize waiting: http://claim-money.org","HOT singles waiting! Chat now: http://local-dating.xyz","Refinance 1% APR. Apply: http://easy-loans.biz","Buy 1 get 1 FREE Viagra. http://meds-direct.com","Meet rich men. Signup: http://millionaire-match.com","SECURITY ALERT: Suspicious activity. Check http://account-security-check.com"],ham:["Meeting agenda for tomorrow's team sync","Hey, are we still on for lunch?","Invoice #12345 from AWS Services","Project deadline extended to Friday","Happy Birthday! Hope you have a great day.","Can you review this pull request?","Your Amazon order has shipped.","Fwd: Tickets for the concert","Question about the quarterly report","Let's catch up sometime next week."]},generateData:e=>{const t=[];Rt.examples.spam.forEach(n=>{const i=Kt(n),r=()=>(Math.random()-.5)*.1,o=i.map(l=>Math.max(0,l+r()));t.push({input:o,target:1,text:n})}),Rt.examples.ham.forEach(n=>{const r=Kt(n).map(o=>Math.max(0,o+(Math.random()-.5)*.1));t.push({input:r,target:0,text:n})});for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},trainingConfig:{maxSteps:3e3,params:[{name:"w1 (Spam Words)",min:1,max:4,step:.5},{name:"w2 (Capitals)",min:0,max:2,step:.5},{name:"w3 (Links)",min:0,max:3,step:.5},{name:"w4 (Total Words)",min:-2,max:2,step:.5},{name:"bias",min:-8,max:8,step:2}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + w₃x₃ + w₄x₄ + b)",inputLabels:["Spam Words","Caps (/10)","Links","Words (/50)"],outputLabel:"Spam (p)",biasLabel:"b"},isFinished:e=>e>=50};class Hn{constructor(t=2,n=10){this.inputCount=t,this.hiddenCount=n;const i=Math.sqrt(6/(t+n));this.weights1=Array(n).fill(0).map(()=>Array.from({length:t},()=>Math.random()*2*i-i)),this.biases1=Array(n).fill(0);const r=Math.sqrt(6/(n+1));this.weights2=Array.from({length:n},()=>Math.random()*2*r-r),this.bias2=0}sigmoid(t){return 1/(1+Math.exp(-t))}predict(t){const n=[];for(let o=0;o<this.hiddenCount;o++){let l=this.biases1[o];for(let d=0;d<this.inputCount;d++)l+=this.weights1[o][d]*t[d];n.push(this.sigmoid(l))}let i=this.bias2;for(let o=0;o<this.hiddenCount;o++)i+=this.weights2[o]*n[o];return this.sigmoid(i)}getActivations(t){const n=[];for(let o=0;o<this.hiddenCount;o++){let l=this.biases1[o];for(let d=0;d<this.inputCount;d++)l+=this.weights1[o][d]*t[d];n.push(this.sigmoid(l))}let i=this.bias2;for(let o=0;o<this.hiddenCount;o++)i+=this.weights2[o]*n[o];const r=this.sigmoid(i);return{hidden:n,output:[r]}}setParams(t){for(let i=0;i<this.hiddenCount;i++){const r=`b1_${i}`;t[r]!==void 0&&(this.biases1[i]=t[r]);for(let o=0;o<this.inputCount;o++){const l=`w1_${i}_${o}`;t[l]!==void 0&&(this.weights1[i][o]=t[l])}}const n="b2";t[n]!==void 0&&(this.bias2=t[n]);for(let i=0;i<this.hiddenCount;i++){const r=`w2_${i}`;t[r]!==void 0&&(this.weights2[i]=t[r])}}getTopology(){return{inputCount:this.inputCount,hiddenCounts:[this.hiddenCount],outputCount:1,weights1:this.weights1,biases1:this.biases1,weights2:this.weights2,bias2:this.bias2}}}const ln=[{label:"Total Words",idx:0,max:400},{label:"Links",idx:1,max:10}],Ut=[{input:[367,5],target:0,text:"Attached is the quarterly report found at..."},{input:[365,2],target:0,text:"Attached is the quarterly report found at..."},{input:[364,6],target:0,text:"Attached is the quarterly report found at..."},{input:[327,7],target:0,text:"Attached is the quarterly report found at..."},{input:[302,5],target:0,text:"Attached is the quarterly report found at..."},{input:[314,3],target:0,text:"Attached is the quarterly report found at..."},{input:[345,4],target:0,text:"Attached is the quarterly report found at..."},{input:[265,5],target:0,text:"Attached is the quarterly report found at..."},{input:[287,4],target:0,text:"Attached is the quarterly report found at..."},{input:[311,1],target:0,text:"Attached is the quarterly report found at..."},{input:[268,2],target:0,text:"Attached is the quarterly report found at..."},{input:[283,0],target:0,text:"Attached is the quarterly report found at..."},{input:[261,3],target:0,text:"Attached is the quarterly report found at..."},{input:[197,0],target:0,text:"Just a normal short message."},{input:[150,0],target:0,text:"Just a normal short message."},{input:[124,0],target:0,text:"Just a normal short message."},{input:[65,1],target:0,text:"Just a normal short message."},{input:[85,0],target:0,text:"Just a normal short message."},{input:[58,0],target:0,text:"Just a normal short message."},{input:[45,0],target:0,text:"Security Alert: Login Code 2542"},{input:[36,0],target:0,text:"Security Alert: Login Code 5607"},{input:[38,1],target:0,text:"Security Alert: Login Code 909"},{input:[24,1],target:0,text:"Security Alert: Login Code 8385"},{input:[17,1],target:0,text:"Security Alert: Login Code 2083"},{input:[215,1],target:1,text:"You won a prize! Click here."},{input:[230,3],target:1,text:"You won a prize! Click here."},{input:[234,5],target:1,text:"You won a prize! Click here."},{input:[221,2],target:1,text:"You won a prize! Click here."},{input:[215,4],target:1,text:"You won a prize! Click here."},{input:[153,3],target:1,text:"You won a prize! Click here."},{input:[152,1],target:1,text:"You won a prize! Click here."},{input:[137,2],target:1,text:"You won a prize! Click here."},{input:[124,4],target:1,text:"You won a prize! Click here."},{input:[120,2],target:1,text:"You won a prize! Click here."},{input:[92,3],target:1,text:"You won a prize! Click here."},{input:[93,5],target:1,text:"You won a prize! Click here."},{input:[86,5],target:1,text:"You won a prize! Click here."},{input:[84,3],target:1,text:"You won a prize! Click here."},{input:[53,4],target:1,text:"You won a prize! Click here."},{input:[55,3],target:1,text:"You won a prize! Click here."}],re=()=>(console.log("Using prepared data with length "+Ut.length),Ut),ze={id:"single_layer_nonlinear",title:"Phase 4: Single Layer Nonlinear Data",description:"Spam detection with only 2 features but complex distribution. A simple linear classifier (perceptron) will fail here.",Model:an,GroundTruth:ue,CanvasComponent:de,defaultParams:{weights:[0,0],bias:0},getInput:e=>{const t=Math.floor(e*.5)%Ut.length,n=Ut[t],i=[...n.input];return i.text=n.text,i.groundTruth=n.target,i},generateData:e=>re(),trainingConfig:{maxSteps:4e3,params:[{name:"w1 (Words)",min:-5,max:5,step:.5},{name:"w2 (Links)",min:-5,max:5,step:.5},{name:"bias",min:-10,max:10,step:1}]},networkViz:{formula:"p = σ(w₁x₁ + w₂x₂ + b)",inputLabels:["Spam Words","Links"],outputLabel:"Spam (p)",biasLabel:"b"},featuresConfig:ln,isFinished:e=>!1},Bn=()=>{const e=[];for(let t=0;t<10;t++){e.push({name:`b1_${t}`,min:-30,max:30,step:1});for(let n=0;n<2;n++)e.push({name:`w1_${t}_${n}`,min:-30,max:30,step:1})}e.push({name:"b2",min:-3,max:3,step:1});for(let t=0;t<10;t++)e.push({name:`w2_${t}`,min:-50,max:50,step:1});return e},$e={id:"double_layer_nonlinear",title:"Phase 5: Double Layer Nonlinear Data",description:'Spam detection with a Hidden Layer (10 neurons). The Deep Neural Network can detect the nonlinear distribution ("Spam Island").',Model:Hn,GroundTruth:ue,CanvasComponent:de,defaultParams:{},getInput:e=>{const t=re(),n=Math.floor(e*.5)%t.length,i=t[n],r=[...i.input];return r.text=i.text,r.groundTruth=i.target,r},generateData:e=>re(),trainingConfig:{seed:1319434789,maxSteps:1e4,params:Bn()},networkViz:{formula:"p = σ(W₂ · σ(W₁ · x + b₁) + b₂)",inputLabels:[`Spam
Words`,"Links"],outputLabel:"Spam (p)",biasLabel:"b"},featuresConfig:ln,isFinished:e=>e>=50},De={[Ae.id]:Ae,[We.id]:We,[Rt.id]:Rt,[ze.id]:ze,[$e.id]:$e};function Fn(e){return De[e]||De.linear_regression}function he(e){const[t,n]=rt(null),i=bt(null),r=bt(null),[o,l]=rt(0),[d,p]=rt(!1),[h,c]=rt([]),[f,y]=rt([]),[v,x]=rt(-1),[M,S]=rt(!1),[z,R]=rt("simulation"),[E,O]=rt("table"),[Z,$]=rt("random"),[q,C]=rt("Ready."),u=bt(0);Tt(()=>{if(!e)return;if(e==="gallery"){n({id:"gallery",type:"gallery"});return}const T=Fn(e);if(!T){C("Error: Simulation not found.");return}try{if(i.current=new T.GroundTruth(...T.groundTruthDefaults||[]),r.current=new T.Model,T.defaultParams&&(T.defaultParams.weight!==void 0&&r.current.setWeight(T.defaultParams.weight),T.defaultParams.weights!==void 0&&r.current.setWeights&&r.current.setWeights(T.defaultParams.weights),T.defaultParams.bias!==void 0&&r.current.setBias(T.defaultParams.bias)),n(T),i.current)try{const Y=T.generateData(i.current);c(Y)}catch(Y){console.error("Auto-generate data error:",Y)}}catch(Y){console.error("Initialization Error:",Y),C(`Init Error: ${Y.message}`)}},[e]),Tt(()=>{let T;const Y=D=>{if(!d)return;u.current===0&&(u.current=D);const F=(D-u.current)/1e3;u.current=D;const k=Math.min(F,.1);l(b=>{const a=b+k*3;return t&&t.isFinished&&t.isFinished(a)&&(p(!1),C("Simulation finished.")),a}),T=requestAnimationFrame(Y)};return d&&(u.current=0,T=requestAnimationFrame(Y)),()=>cancelAnimationFrame(T)},[d,t]);const w=()=>{l(0),p(!0),C("Simulation running..."),R("simulation")},_=()=>{p(!1),C("Simulation paused.")},g=()=>{d?_():w()},W=async()=>{try{if(h.length===0||!t)return;S(!0),x(0),y([]),C("Searching for optimal weight and bias (Live Visualization)..."),R("training");const T=new t.Model,Y=new Rn(T),D=(k,b)=>{if(y(m=>{const a=[...m,...k];return x(a.length-1),a}),b&&b.message&&C(b.message),b&&b.bestParams)if(r.current.setParams)r.current.setParams(b.bestParams);else if(r.current.setWeights){const{weights:m,bias:a}=b.bestParams;r.current.setWeights(m),r.current.setBias(a)}else r.current.setWeight&&b.bestParams&&b.bestParams.weights&&b.bestParams.weights.length>=1&&(r.current.setWeight(b.bestParams.weights[0]),r.current.setBias(b.bestParams.bias));else b&&b.bestWeight!==void 0&&(r.current.setWeight(b.bestWeight),r.current.setBias(b.bestBias))};let F;if(Z==="random"){C("Searching for optimal weight and bias (Random Search)...");const k={seed:t.trainingConfig.seed,maxSteps:t.trainingConfig.maxSteps,initialRadius:t.trainingConfig.initialRadius,phase1Ratio:t.trainingConfig.phase1Ratio};F=await Y.trainRandomAsync(h,t.trainingConfig.params,D,k)}else t.trainingConfig.params?F=await Y.trainAsync(h,t.trainingConfig.params,D):F=await Y.trainAsync(h,t.trainingConfig.weightRange,t.trainingConfig.biasRange,D);C(`Training finished! Min Error: ${F.minError.toFixed(5)}`),S(!1)}catch(T){console.error("Training Error:",T),S(!1),C(`Training Error: ${T.message}`)}},U=t&&t.getInput?t.getInput(o):void 0;return{simConfig:t,groundTruth:i,neuralNet:r,time:o,currentInput:U,isRunning:d,trainingData:h,trainingHistory:f,trainingStepIndex:v,isTraining:M,activeTab:z,dataViewMode:E,trainerType:Z,statusMsg:q,handleTrain:W,handleRun:g,handleStop:_,toggleRun:g,setTrainerType:$,setActiveTab:R,setDataViewMode:O}}function Xn({history:e,currentStepIndex:t,isTraining:n,paramsConfig:i}){const r=bt(null),[o,l]=rt(0),d=6;Tt(()=>{l(0)},[i]),Tt(()=>{const h=r.current;if(!h||!e||e.length===0)return;const c=h.getContext("2d"),f=h.width,y=h.height;c.clearRect(0,0,f,y),c.fillStyle="#fff",c.fillRect(0,0,f,y);const v=Math.max(...e.map($=>$.error)),M=!n&&e.length>0?e.length-1:t!==null&&t>=0?Math.min(t,e.length-1):-1;let S=-1,z=1/0;for(let $=0;$<=M;$++)e[$].error<z&&(z=e[$].error,S=$);let R=[];if(i){const $=1+i.length,q=o*d,C=Math.min(q+d,$),u=3,w=2,_=f/u,g=y/w;for(let W=q;W<C;W++){const U=W-q,T=U%u,Y=Math.floor(U/u),D=T*_,F=Y*g;if(W===0){const k=Math.max(10,e.length-1);R.push({type:"accuracy_step",xLabel:"Training Step",xMin:0,xMax:k,yMode:"accuracy",getValue:(b,m)=>m,getYValue:b=>b.accuracy||0,offsetX:D,offsetY:F,w:_,h:g,showYAxis:!0})}else if(W===1){const k=Math.max(10,e.length-1);R.push({type:"error_step",xLabel:"Training Step",xMin:0,xMax:k,yMode:"error_log",getValue:(b,m)=>m,getYValue:b=>b.error,offsetX:D,offsetY:F,w:_,h:g,showYAxis:!0})}else{const k=W-2,b=i[k],m=e.map(H=>H.params[k]),a=Math.min(...m),I=Math.max(...m);R.push({type:"param_error",xLabel:b.name,xMin:a,xMax:I,yMode:"error_log",getValue:H=>H.params[k],getYValue:H=>H.error,offsetX:D,offsetY:F,w:_,h:g})}}}else{const $=f/2,q=y/2,C=e.map(_=>_.weight),u=e.map(_=>_.bias),w=Math.max(10,e.length-1);R=[{type:"accuracy_step",xLabel:"Accuracy",xMin:0,xMax:w,yMode:"accuracy",getValue:(_,g)=>g,getYValue:_=>_.accuracy||0,offsetX:0,offsetY:0,w:$,h:q,showYAxis:!0},{type:"error_step",xLabel:"Step",xMin:0,xMax:w,yMode:"error_log",getValue:(_,g)=>g,getYValue:_=>_.error,offsetX:$,offsetY:0,w:$,h:q,showYAxis:!0},{xLabel:"Weight",xMin:Math.min(...C),xMax:Math.max(...C),yMode:"error_log",getValue:_=>_.weight,getYValue:_=>_.error,offsetX:0,offsetY:q,w:$,h:q},{xLabel:"Bias",xMin:Math.min(...u),xMax:Math.max(...u),yMode:"error_log",getValue:_=>_.bias,getYValue:_=>_.error,offsetX:$,offsetY:q,w:$,h:q}]}const E=50;R.forEach($=>{const{xLabel:q,xMin:C,xMax:u,getValue:w,getYValue:_,offsetX:g,offsetY:W,w:U,h:T,yMode:Y,showYAxis:D}=$,F=m=>g+E+(m-C)/(u-C||1)*(U-2*E);let k;if(Y==="accuracy")k=m=>W+T-E-m*(T-2*E);else{const a=v||1;k=I=>{const H=(I-0)/(a-0);return W+T-E-H*(T-2*E)}}c.strokeStyle="#eee",c.lineWidth=2,c.strokeRect(g,W,U,T),c.beginPath(),c.strokeStyle="#333",c.lineWidth=2,c.moveTo(g+E,W+E),c.lineTo(g+E,W+T-E),c.lineTo(g+U-E,W+T-E),c.stroke(),c.fillStyle="#333",c.font="22px sans-serif",c.textAlign="center";let b=q;if(b.length>20&&(b=b.substring(0,18)+"..."),c.fillText(b,g+U/2,W+T-15),g===0||D)if(c.save(),c.translate(g+15,W+T/2),c.rotate(-Math.PI/2),Y==="accuracy")c.fillText("Accuracy",0,0),c.restore(),c.textAlign="right",c.fillStyle="#666",c.font="18px sans-serif",[0,.25,.5,.75,1].forEach(m=>{const a=k(m);c.fillText(m.toFixed(2),g+E-8,a+6),c.beginPath(),c.lineWidth=1,c.strokeStyle="#f0f0f0",c.moveTo(g+E,a),c.lineTo(g+U-E,a),c.stroke()});else{c.fillText("Error",0,0),c.restore(),c.textAlign="right",c.fillStyle="#666",c.font="18px sans-serif";const m=5;for(let a=0;a<=m;a++){const I=a/m*v,H=k(I);c.fillText(I.toFixed(2),g+E-8,H+6),a>0&&(c.beginPath(),c.lineWidth=1,c.strokeStyle="#f0f0f0",c.moveTo(g+E,H),c.lineTo(g+U-E,H),c.stroke())}}c.fillStyle="#666",c.font="18px sans-serif",c.textAlign="center",c.fillText(C.toFixed(1),g+E,W+T-E+25),c.fillText(u.toFixed(1),g+U-E,W+T-E+25),c.fillStyle=Y==="accuracy"?"rgba(155, 89, 182, 0.4)":"rgba(52, 152, 219, 0.4)";for(let m=0;m<=M;m++){const a=w(e[m],m),I=_(e[m]),H=F(a),et=k(I);c.fillRect(H,et,4,4)}if(S>=0){const m=w(e[S],S),a=_(e[S]),I=F(m),H=k(a);c.beginPath(),c.fillStyle="#2ecc71",c.strokeStyle="#27ae60",c.lineWidth=2,c.arc(I,H,10,0,Math.PI*2),c.fill(),c.stroke()}if(n&&t!==null&&t>=0&&t<=M){const m=w(e[t],t),a=_(e[t]),I=F(m),H=k(a);c.beginPath(),c.fillStyle="#e74c3c",c.strokeStyle="#c0392b",c.lineWidth=2,c.arc(I,H,8,0,Math.PI*2),c.fill(),c.stroke()}});const O=f-150,Z=20;c.fillStyle="rgba(255,255,255,0.9)",c.fillRect(O,Z,140,70),c.strokeStyle="#ccc",c.lineWidth=1,c.strokeRect(O,Z,140,70),c.textAlign="left",c.font="16px sans-serif",c.beginPath(),c.fillStyle="#e74c3c",c.arc(O+15,Z+20,6,0,Math.PI*2),c.fill(),c.fillStyle="#333",c.fillText("Current Scan",O+30,Z+25),c.beginPath(),c.fillStyle="#2ecc71",c.arc(O+15,Z+50,6,0,Math.PI*2),c.fill(),c.fillStyle="#333",c.fillText("Best So Far",O+30,Z+55),!n&&S>=0&&(c.fillStyle="#333",c.font="bold 18px sans-serif",c.textAlign="right",c.fillText(`Min Error: ${z.toFixed(5)}`,f-20,y-20))},[e,t,n,i,o]);const p=i?Math.ceil((i.length+1)/d):1;return s("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff"},children:[s("canvas",{ref:r,width:1600,height:800,style:{width:"100%",height:"auto"}}),p>1&&s("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px",gap:"10px"},children:[s("button",{onClick:()=>l(h=>Math.max(0,h-1)),disabled:o===0,children:"Previous"}),s("span",{style:{alignSelf:"center"},children:["Page ",o+1," of ",p]}),s("button",{onClick:()=>l(h=>Math.min(p-1,h+1)),disabled:o===p-1,children:"Next"})]})]})}function On(e,t){for(var n in t)e[n]=t[n];return e}function Ne(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Ee(e,t){this.props=e,this.context=t}(Ee.prototype=new Ct).isPureReactComponent=!0,Ee.prototype.shouldComponentUpdate=function(e,t){return Ne(this.props,e)||Ne(this.state,t)};var Ve=K.__b;K.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ve&&Ve(e)};var Un=K.__e;K.__e=function(e,t,n,i){if(e.then){for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}Un(e,t,n,i)};var Ie=K.unmount;function cn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=On({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return cn(i,t,n)})),e}function un(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return un(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Zt(){this.__u=0,this.o=null,this.__b=null}function dn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function It(){this.i=null,this.l=null}K.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Ie&&Ie(e)},(Zt.prototype=new Ct).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=dn(i.__v),o=!1,l=function(){o||(o=!0,n.__R=null,r?r(d):d())};n.__R=l;var d=function(){if(!--i.__u){if(i.state.__a){var p=i.state.__a;i.__v.__k[0]=un(p,p.__c.__P,p.__c.__O)}var h;for(i.setState({__a:i.__b=null});h=i.o.pop();)h.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(l,l)},Zt.prototype.componentWillUnmount=function(){this.o=[]},Zt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=cn(this.__b,n,i.__O=i.__P)}this.__b=null}var r=t.__a&&ee(xt,null,e.fallback);return r&&(r.__u&=-33),[ee(xt,null,t.__a?null:e.children),r]};var Ye=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(It.prototype=new Ct).__a=function(e){var t=this,n=dn(t.__v),i=t.l.get(e);return i[0]++,function(r){var o=function(){t.props.revealOrder?(i.push(r),Ye(t,e,i)):r()};n?n(o):o()}},It.prototype.render=function(e){this.i=null,this.l=new Map;var t=Ft(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},It.prototype.componentDidUpdate=It.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Ye(e,n,t)})};var jn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Gn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Kn=/[A-Z0-9]/g,Zn=typeof document<"u",Jn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};Ct.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Ct.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var He=K.event;function Qn(){}function ti(){return this.cancelBubble}function ei(){return this.defaultPrevented}K.event=function(e){return He&&(e=He(e)),e.persist=Qn,e.isPropagationStopped=ti,e.isDefaultPrevented=ei,e.nativeEvent=e};var ni={enumerable:!1,configurable:!0,get:function(){return this.class}},Be=K.vnode;K.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,i=t.type,r={},o=i.indexOf("-")===-1;for(var l in n){var d=n[l];if(!(l==="value"&&"defaultValue"in n&&d==null||Zn&&l==="children"&&i==="noscript"||l==="class"||l==="className")){var p=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&d===!0?d="":p==="translate"&&d==="no"?d=!1:p[0]==="o"&&p[1]==="n"?p==="ondoubleclick"?l="ondblclick":p!=="onchange"||i!=="input"&&i!=="textarea"||Jn(n.type)?p==="onfocus"?l="onfocusin":p==="onblur"?l="onfocusout":qn.test(l)&&(l=p):p=l="oninput":o&&Gn.test(l)?l=l.replace(Kn,"-$&").toLowerCase():d===null&&(d=void 0),p==="oninput"&&r[l=p]&&(l="oninputCapture"),r[l]=d}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Ft(n.children).forEach(function(h){h.props.selected=r.value.indexOf(h.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=Ft(n.children).forEach(function(h){h.props.selected=r.multiple?r.defaultValue.indexOf(h.props.value)!=-1:r.defaultValue==h.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",ni)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=jn,Be&&Be(e)};var Fe=K.__r;K.__r=function(e){Fe&&Fe(e),e.__c};var Xe=K.diffed;K.diffed=function(e){Xe&&Xe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function ii({model:e,inputs:t,inputLabels:n,output:i,outputLabel:r,formula:o}){if(!e||!e.getTopology)return null;const l=e.getTopology(),{inputCount:d,hiddenCounts:p,outputCount:h,weights1:c,biases1:f,weights2:y}=l,v=l.biases2||(l.bias2!==void 0?[l.bias2]:null);let x={hidden:[],output:[]};e.getActivations&&(x=e.getActivations(t));const[M,S]=rt(null),[z,R]=rt(!1),E=400,O=400,Z=O/2,$=E/2,q=300,C=300,u=$-q/2,w=$+q/2,_=[{count:d,x:u,labels:n,values:t},{count:p[0],x:$,values:x.hidden},{count:h,x:w,labels:[r],values:x.output}];Math.max(..._.map(k=>k.count));const g=(k,b)=>{const m=_[k].count;let a=Math.min(50,C/m);const I=(m-1)*a;return Z-I/2+b*a},W=(k,b)=>{M&&M.layer===k&&M.index===b?S(null):S({layer:k,index:b})},U=(k,b,m,a)=>M?M.layer===k&&M.index===b||M.layer===m&&M.index===a:!1,T=(k,b)=>M&&M.layer===k&&M.index===b;if(z)return s("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center",height:"400px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s("div",{style:{flex:"0 0 auto",marginBottom:"10px"},children:s("h3",{style:{margin:"0",fontSize:"1rem",color:"#555"},children:"Network Parameters"})}),s("div",{style:{flex:"1 1 auto",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start"},children:s("div",{style:{display:"flex",gap:"20px",alignItems:"flex-start",justifyContent:"center",flexWrap:"wrap",paddingBottom:"10px"},children:[s("div",{style:{textAlign:"center"},children:[s("h4",{style:{fontSize:"0.9rem",marginBottom:"5px"},children:"Layer 1 Weights"}),s(ri,{data:c}),s("h4",{style:{fontSize:"0.9rem",marginBottom:"5px",marginTop:"10px"},children:"Layer 1 Biases"}),s(Jt,{data:f})]}),s("div",{style:{textAlign:"center"},children:[s("h4",{style:{fontSize:"0.9rem",marginBottom:"5px"},children:"Layer 2 Weights (to Output)"}),s(Jt,{data:Array.isArray(y[0])?y.flat():y,isVertical:!0}),v&&s(xt,{children:[s("h4",{style:{fontSize:"0.9rem",marginBottom:"5px",marginTop:"10px"},children:"Layer 2 Bias"}),s(Jt,{data:Array.isArray(v)?v:[v]})]})]})]})}),s("div",{style:{flex:"0 0 auto",marginTop:"10px",cursor:"pointer",fontStyle:"italic",color:"#777",padding:"5px"},onClick:()=>R(!1),children:"Back to Network"})]});const Y=[{fill:"#e3f2fd",stroke:"#2196f3",highlight:"#1976d2"},{fill:"#f3e5f5",stroke:"#9c27b0",highlight:"#7b1fa2"},{fill:"#e8f5e9",stroke:"#4caf50",highlight:"#388e3c"}],D="#bdbdbd",F="#ff9800";return s("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center"},children:[s("h3",{style:{marginBottom:"10px",fontSize:"1rem",color:"#555"},children:"Neural Network Activity"}),s("svg",{width:E,height:O,style:{overflow:"visible"},children:[s("rect",{x:u,y:Z-C/2,width:q,height:C,rx:"15",fill:"none",stroke:"#333",strokeWidth:"2"}),c.map((k,b)=>k.map((m,a)=>{const I=U(0,a,1,b),H=M&&!I,et=I?F:D,ot=I?3:1.5,gt=H?.2:1;return s("line",{x1:_[0].x,y1:g(0,a),x2:_[1].x,y2:g(1,b),stroke:et,strokeWidth:ot,strokeOpacity:gt,style:{transition:"all 0.3s ease"}},`L0-${a}-${b}`)})),y.map((k,b)=>{const m=U(1,b,2,0),a=M&&!m,I=m?F:D,H=m?3:1.5,et=a?.2:1;return s("line",{x1:_[1].x,y1:g(1,b),x2:_[2].x,y2:g(2,0),stroke:I,strokeWidth:H,strokeOpacity:et,style:{transition:"all 0.3s ease"}},`L1-${b}-0`)}),_.map((k,b)=>s("g",{children:Array.from({length:k.count}).map((m,a)=>{const I=k.x,H=g(b,a),et=k.values&&k.values[a]!==void 0?k.values[a]:0,ot=T(b,a),gt=Y[b]||Y[0];return s("g",{onClick:()=>W(b,a),style:{cursor:"pointer"},children:[s("circle",{cx:I,cy:H,r:12,fill:ot?gt.highlight:gt.fill,stroke:gt.stroke,strokeWidth:ot?"3":"2",style:{transition:"all 0.3s ease"}}),k.labels&&s("text",{x:b===0?I-18:I+18,y:H,textAnchor:b===0?"end":"start",style:{textAnchor:b===0?"end":"start",pointerEvents:"none"},dominantBaseline:"middle",fontSize:"14",fontWeight:"600",fill:"#444",children:(k.labels[a]||"").toString().split(`
`).map((Q,V,L)=>s("tspan",{x:b===0?I-18:I+18,dy:V===0?`${(L.length-1)*-.6}em`:"1.2em",children:Q},V))}),s("title",{children:et.toFixed(3)})]},`n-${b}-${a}`)})},`layer-${b}`)),o&&s("foreignObject",{className:"formula",x:$-200,y:O-25,width:400,height:20,children:s("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"18px",fontStyle:"italic",color:"#777",cursor:"pointer",userSelect:"none"},onClick:()=>R(!0),title:"Click to view matrices",children:o})})]})]})}function ri({data:e}){return e?s("div",{style:{display:"grid",gridTemplateColumns:`repeat(${e[0].length}, 1fr)`,gap:"2px",border:"1px solid #999",padding:"2px",background:"#eee"},children:e.map((t,n)=>t.map((i,r)=>s("div",{style:{padding:"2px 4px",background:"#fff",fontSize:"10px",textAlign:"center"},children:i.toFixed(2)},`${n} -${r} `)))}):null}function Jt({data:e,isVertical:t=!1}){if(!e)return null;const n=Array.isArray(e)?e:[e];return s("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"2px",border:"1px solid #999",padding:"2px",background:"#eee"},children:n.map((i,r)=>s("div",{style:{padding:"2px 4px",background:"#fff",fontSize:"10px",textAlign:"center"},children:i.toFixed(2)},r))})}function hn({input:e,weight:t,bias:n,output:i,formula:r="y = w * x + b",inputLabel:o="Input",outputLabel:l="Output",biasLabel:d="b",decimals:p=1,model:h=null}){if(h&&h.getTopology){let D=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(D=e.input);const F=Array.isArray(D)?D:[D],k=Array.isArray(o)?o:[o];return s(ii,{model:h,inputs:F,inputLabels:k,output:i,outputLabel:l,formula:r})}let c=e;e&&!Array.isArray(e)&&typeof e=="object"&&e.input&&Array.isArray(e.input)&&(c=e.input);const f=Array.isArray(c)?c:[c],y=Array.isArray(t)?t:[t],v=Array.isArray(o)?o:[o],x=Number(n)||0,M=Number(i)||0,S=f.length,z=24,R=90,E=260,O=60,Z=60,$=Math.max(1,S-1)*R,q=Math.max(150,$+O+Z),C=q+60,u=600,w=u/2+10,_=w-E/2,g=w+E/2,W=q/2+20,U=W-$/2,T=g-50,Y=T-60;return s("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"10px",background:"#fff",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s("div",{className:"model-title",style:{marginBottom:"10px"},children:"Model Architecture"}),s("svg",{width:u,height:C,style:{overflow:"visible"},children:[s("defs",{children:s("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"27",refY:"3.5",orient:"auto",children:s("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#333"})})}),s("rect",{x:_,y:20,width:E,height:q,rx:"15",fill:"none",stroke:"#333",strokeWidth:"2"}),(()=>{const D=W-50;return s(xt,{children:[f.map((F,k)=>{const b=S>1?U+k*R:W,m=Number(y[k])||0,a=v[k]||`x${k+1}`,I=Number(F)||0;return s("g",{children:[s("line",{x1:_,y1:b,x2:Y,y2:W,stroke:"#999",strokeWidth:"1"}),s("g",{transform:`translate(${(_+Y)/2+(1-(S-1)/2)*5}, ${(b+W)/2})`,children:[s("rect",{x:"-24",y:"-8",width:"50",height:"18",fill:"#fff",rx:"4",stroke:"#e0e0e0"}),s("text",{x:"0",y:"4",textAnchor:"middle",fill:"#e74c3c",fontSize:"10",fontWeight:"bold",children:m.toFixed(1)})]}),s("circle",{cx:_,cy:b,r:z,fill:"#fff",stroke:"#333",strokeWidth:"2"}),s("text",{x:_-30,y:b+2,textAnchor:"end",style:{textAnchor:"end"},dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",fill:"#333",children:a.toString().split(`
`).map((H,et,ot)=>s("tspan",{x:_-30,dy:et===0?`${(ot.length-1)*-.6}em`:"1.2em",children:H},et))}),s("text",{x:_-13,y:b+5,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fill:"#333",children:I.toFixed(p)})]},k)}),s("line",{x1:Y,y1:W,x2:T,y2:W,stroke:"#333",strokeWidth:"2"}),s("g",{transform:`translate(${T}, ${W})`,children:[s("rect",{x:"-18",y:"-18",width:"36",height:"36",rx:"6",fill:"#fff",stroke:"#333",strokeWidth:"2"}),s("path",{d:"M -10 8 C -4 8, -4 -8, 10 -8",stroke:"#333",strokeWidth:"2",fill:"none"})]}),s("line",{x1:T+18,y1:W,x2:g-z,y2:W,stroke:"#333",strokeWidth:"2"}),s("path",{d:`M ${T-20} ${D} Q ${T-20} ${W} ${Y+10} ${W}`,fill:"none",stroke:"#f39c12",strokeWidth:"1",markerEnd:"url(#arrowhead)"}),s("circle",{cx:T-20,cy:D,r:12,fill:"#f1c40f",stroke:"#f39c12"}),s("text",{x:T-23,y:D+5,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fontWeight:"bold",fill:"#fff",children:"b"}),s("text",{x:T-5,y:D+5,textAnchor:"start",dominantBaseline:"middle",fontSize:"12",fill:"#f39c12",fontWeight:"bold",children:x.toFixed(2)})]})})(),s("circle",{cx:g,cy:W,r:z,fill:"#fff",stroke:"#333",strokeWidth:"2"}),s("text",{x:g-14,y:W+4,textAnchor:"middle",dominantBaseline:"middle",fontWeight:"bold",fontSize:"12",children:M.toFixed(2)}),s("text",{x:g+40,y:W+4,textAnchor:"start",dominantBaseline:"middle",fontWeight:"bold",fontSize:"14",fill:"#333",children:l.toString().split(`
`).map((D,F,k)=>s("tspan",{x:g+40,dy:F===0?`${(k.length-1)*-.6}em`:"1.2em",children:D},F))}),s("foreignObject",{className:"formula",x:w-200,y:C-25,width:400,height:20,children:s("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"18px",fontStyle:"italic",color:"#777"},children:r})})]})]})}function oi({onTrain:e,onRun:t,isTraining:n,trainingStep:i,dataCount:r,trainerType:o,onTrainerTypeChange:l,isRunning:d,simulationEnabled:p=!0}){return s("div",{role:"region","aria-label":"Controls",style:{padding:"20px",background:"#eee",borderRadius:"8px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[s("span",{"aria-live":"polite",children:["Data Points: ",r]}),s("div",{style:{borderLeft:"1px solid #ccc",paddingLeft:"10px",marginLeft:"10px",display:"flex",gap:"5px",alignItems:"center"},children:[s("select",{value:o,onChange:h=>l(h.target.value),disabled:n,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},children:[s("option",{value:"exhaustive",children:"Grid Search "}),s("option",{value:"random",children:"Adaptive Random "})]}),s("button",{onClick:e,disabled:n||r===0,"aria-busy":n,children:n?"Searching...":"2. Train"})]}),p&&s("button",{onClick:t,disabled:n,style:d?{background:"#f39c12",color:"white"}:{},children:["3. Simulation ",d?"Stop":"Start"]})]})}function Wt({viewMode:e,onChange:t}){return s("div",{style:{display:"flex"},children:s("div",{style:{background:"#eee",borderRadius:"4px",padding:"2px",display:"flex",gap:"2px"},children:[s("button",{onClick:()=>t("table"),style:{background:e==="table"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:e==="table"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:e==="table"?"bold":"normal",color:e==="table"?"#333":"#666"},children:"Table"}),s("button",{onClick:()=>t("plot"),style:{background:e==="plot"?"#fff":"transparent",border:"none",borderRadius:"3px",padding:"5px 15px",cursor:"pointer",boxShadow:e==="plot"?"0 1px 2px rgba(0,0,0,0.1)":"none",fontWeight:e==="plot"?"bold":"normal",color:e==="plot"?"#333":"#666"},children:"Graph"})]})})}function Gt({data:e,vizProps:t,simConfig:n,maximizedPanel:i}){return!e||e.length===0?s("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No training data generated yet."}):s("div",{style:{maxHeight:i?"calc(100vh - 350px)":"400px",overflowY:"auto"},children:s("table",{style:{width:"100%",textAlign:"left",borderCollapse:"collapse",fontSize:"0.9rem"},children:[s("thead",{children:s("tr",{style:{background:"#eee",borderBottom:"2px solid #ddd"},children:[Array.isArray(t.inputLabels)?t.inputLabels.map((r,o)=>s("th",{style:{padding:"8px"},children:r},o)):s("th",{style:{padding:"8px"},children:["Input (",t.inputLabel,")"]}),s("th",{style:{padding:"8px"},children:"Target"}),e.length>0&&e[0].text&&s("th",{style:{padding:"8px"},children:"Email Text"})]})}),s("tbody",{children:e.map((r,o)=>{const l=["spam","spam_advanced","spam_hidden","spam_nonlinear"].includes(n.id);let d="transparent",p=r.target,h={padding:"8px"};if(l){const c=r.target===1;d=c?"#ffebee":"#e8f5e9",p=c?"SPAM":"HAM",h={...h,fontWeight:"bold",color:c?"#c0392b":"#27ae60"}}else p=typeof r.target=="number"?r.target.toFixed(2):r.target;return s("tr",{style:{background:d,borderBottom:"1px solid #ddd"},children:[Array.isArray(r.input)?r.input.map((c,f)=>s("td",{style:{padding:"8px"},children:c.toFixed(0)},f)):s("td",{style:{padding:"8px"},children:r.input.toFixed(2)}),s("td",{style:h,children:p}),r.text&&s("td",{style:{padding:"8px",color:"#555",fontStyle:"italic",maxWidth:"300px"},children:r.text})]},o)})})]})})}function fe({hookState:e,renderSimulationView:t,renderDataView:n,networkVizProps:i={},simulationEnabled:r=!0,customDataHandling:o=!1}){const{simConfig:l,activeTab:d,setActiveTab:p,trainingHistory:h,trainingStepIndex:c,isTraining:f,dataViewMode:y,setDataViewMode:v,trainingData:x,groundTruth:M,neuralNet:S,time:z,statusMsg:R,handleTrain:E,handleRun:O,isRunning:Z,trainerType:$,setTrainerType:q,currentInput:C}=e,[u,w]=rt(null),_=Y=>{w(D=>D===Y?null:Y)},g={position:"absolute",top:"10px",right:"10px",zIndex:10,background:"rgba(255, 255, 255, 0.9)",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"0px"},W="all 0.4s cubic-bezier(0.4, 0, 0.2, 1)";Tt(()=>{!r&&d==="simulation"&&p("data")},[r,d,p]);const U=C!==void 0?C:l.getInput?l.getInput(z):z,T=l.networkViz||{};return s("div",{className:"nn-demonstrator layout-container",style:{display:"flex",flexDirection:"column",height:"100%"},children:[s("div",{className:"top-section",style:{display:"flex",gap:u?"0px":"20px",flexWrap:"nowrap",alignItems:"stretch",height:u?"calc(100vh - 200px)":"auto",minHeight:"500px",transition:W,marginBottom:"20px"},children:[s("div",{className:"simulation-wrapper",style:{flex:u==="simulation"?"1 0 100%":u==="network"?"0 0 0%":"1 1 500px",opacity:u==="network"?0:1,overflow:"hidden",maxWidth:u==="network"?"0px":"100%",transition:W,position:"relative",display:"flex",flexDirection:"column"},children:[s("button",{onClick:()=>_("simulation"),style:g,title:u==="simulation"?"Original Size":"Maximize",children:u==="simulation"?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s("path",{d:"M4 14h6v6"}),s("path",{d:"M20 10h-6V4"}),s("path",{d:"M14 10l7-7"}),s("path",{d:"M3 21l7-7"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s("path",{d:"M15 3h6v6"}),s("path",{d:"M9 21H3v-6"}),s("path",{d:"M21 3l-7 7"}),s("path",{d:"M3 21l7-7"})]})}),s("div",{className:"simulation-section",style:{height:"100%",display:"flex",flexDirection:"column"},children:[s("div",{className:"tabs",style:{paddingRight:"120px"},children:[r&&s("button",{className:`tab-button ${d==="simulation"?"active":""}`,onClick:()=>p("simulation"),children:"Simulation"}),s("button",{className:`tab-button ${d==="data"?"active":""}`,onClick:()=>p("data"),children:"Data"}),s("button",{className:`tab-button ${d==="training"?"active":""}`,onClick:()=>p("training"),children:"Training"})]}),s("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[d==="simulation"&&s(xt,{children:[t(),s("div",{className:"stats",style:{marginTop:"auto",paddingTop:"10px"},children:[s("p",{children:l.description}),s("p",{style:{color:"#646cff",fontWeight:"bold"},children:["Status: ",R]})]})]}),d==="data"&&s("div",{className:"data-content",style:{flex:1,overflowY:"auto"},children:o?n?n():s("p",{children:"No data view available."}):s(xt,{children:[!["gallery"].includes(l.id)&&s("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:s(Wt,{viewMode:y,onChange:v})}),s("div",{style:{marginTop:"15px"},children:[y==="plot"&&s("div",{style:{marginBottom:"20px"},children:n?n():s("p",{children:"No graph available."})}),y==="table"&&s(Gt,{data:x,vizProps:T,simConfig:l,maximizedPanel:u})]})]})}),d==="training"&&s("div",{className:"training-content",style:{flex:1},children:h.length>0?s(Xn,{history:h,currentStepIndex:c,isTraining:f,paramsConfig:l.trainingConfig.params}):s("p",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No training started yet."})})]})]})]}),s("div",{className:"network-wrapper",style:{flex:u==="network"?"1 0 100%":u==="simulation"?"0 0 0%":`0 0 ${l.id==="spam_hidden","500px"}`,opacity:u==="simulation"?0:1,overflow:"hidden",maxWidth:u==="simulation"?"0px":"100%",transition:W,position:"relative",display:"flex",flexDirection:"column"},children:[s("button",{onClick:()=>_("network"),style:g,title:u==="network"?"Original Size":"Maximize",children:u==="network"?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s("path",{d:"M4 14h6v6"}),s("path",{d:"M20 10h-6V4"}),s("path",{d:"M14 10l7-7"}),s("path",{d:"M3 21l7-7"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s("path",{d:"M15 3h6v6"}),s("path",{d:"M9 21H3v-6"}),s("path",{d:"M21 3l-7 7"}),s("path",{d:"M3 21l7-7"})]})}),s("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s(hn,{input:U,weight:S.current?S.current.weights||S.current.weight:0,bias:S.current?S.current.bias:0,output:S.current?S.current.predict(U):0,model:S.current,formula:T.formula,inputLabel:T.inputLabels||T.inputLabel,outputLabel:T.outputLabel,biasLabel:T.biasLabel,decimals:l.id.includes("spam")?0:1})})]})]}),s(oi,{onTrain:E,onRun:O,isTraining:f,trainingStep:c,dataCount:x.length,trainerType:$,onTrainerTypeChange:q,simConfig:l,isRunning:Z,simulationEnabled:r})]})}function si({data:e,groundTruth:t,neuralNet:n}){const i=bt(null);return Tt(()=>{const r=i.current;if(!r)return;const o=r.getContext("2d"),l=r.width,d=r.height;if(o.clearRect(0,0,l,d),!e||e.length===0){o.fillStyle="#999",o.textAlign="center",o.fillText("No data available",l/2,d/2);return}const p=40,h=l-2*p,c=d-2*p,f=Math.max(...e.map(M=>M.input))||10,y=Math.max(...e.map(M=>M.target))||100,v=M=>p+M/f*h,x=M=>d-p-M/y*c;if(o.beginPath(),o.strokeStyle="#333",o.moveTo(p,p),o.lineTo(p,d-p),o.lineTo(l-p,d-p),o.stroke(),o.fillStyle="#333",o.textAlign="center",o.fillText("Time (t)",l/2,d-10),o.save(),o.translate(15,d/2),o.rotate(-Math.PI/2),o.fillText("Position (s)",0,0),o.restore(),e.forEach(M=>{const S=v(M.input),z=x(M.target);o.beginPath(),o.arc(S,z,3,0,Math.PI*2),o.fillStyle="#2ecc71",o.fill()}),n){o.beginPath(),o.strokeStyle="#e74c3c",o.lineWidth=2;for(let M=0;M<=f;M+=.1){const S=n.predict(M),z=v(M),R=x(S);M===0?o.moveTo(z,R):o.lineTo(z,R)}o.stroke()}},[e,t,n]),s("div",{style:{border:"1px solid #ccc",margin:"10px 0",borderRadius:"4px"},children:s("canvas",{ref:i,width:600,height:300,style:{width:"100%",display:"block"}})})}function ai(){const e=he("linear_regression"),{simConfig:t,trainingData:n,groundTruth:i,trainingHistory:r,neuralNet:o,time:l,currentInput:d}=e;if(!t)return s("div",{className:"loading",children:"Loading Simulation..."});const p=t.CanvasComponent;return s(fe,{hookState:e,renderSimulationView:()=>{let f=0;try{if(o.current){const y=d!==void 0?d:l;f=o.current.predict(y)}}catch(y){console.error("Predict Error",y)}return s("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px"},children:s(p,{time:l,data:n,currentInput:d!==void 0?d:l,currentPrediction:f,groundTruth:i.current,neuralNet:o.current})})},renderDataView:()=>{const{dataViewMode:f,setDataViewMode:y}=e;return s("div",{style:{flex:1,display:"flex",flexDirection:"column",width:"100%"},children:f==="table"?s(xt,{children:[s("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:s(Wt,{viewMode:f,onChange:y})}),s(Gt,{data:n,vizProps:t.networkViz||{},simConfig:t})]}):s(xt,{children:[s("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:s(Wt,{viewMode:f,onChange:y})}),s(si,{data:n,groundTruth:i.current,neuralNet:r.length>0?o.current:null})]})})},customDataHandling:!0})}function li(){const e=he("logistic_regression"),{simConfig:t,trainingData:n,groundTruth:i,trainingHistory:r,neuralNet:o}=e;if(!t)return s("div",{className:"loading",children:"Loading Simulation..."});const l=t.CanvasComponent;return s(fe,{hookState:e,renderSimulationView:()=>s("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",border:"2px dashed #ddd",borderRadius:"8px",minHeight:"300px"},children:s("p",{style:{color:"#999"},children:'Data visualization is now in the "Data" tab'})}),renderDataView:()=>{const{dataViewMode:h,setDataViewMode:c}=e,f={staticMode:!0,showGroundTruth:!0,showModel:r.length>0};return t.featuresConfig&&(f.features=t.featuresConfig),s("div",{style:{padding:"10px 0",display:"flex",flexDirection:"column",width:"100%"},children:h==="table"?s(xt,{children:[s("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:s(Wt,{viewMode:h,onChange:c})}),s(Gt,{data:n,vizProps:t.networkViz||{},simConfig:t})]}):s(xt,{children:[s("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:s(Wt,{viewMode:h,onChange:c})}),s(l,{time:0,data:n,groundTruth:i.current,neuralNet:o.current,showProbabilities:!0,...f})]})})},simulationEnabled:!1,customDataHandling:!0})}function pe({simId:e}){const t=he(e),{simConfig:n,trainingData:i,groundTruth:r,trainingHistory:o,neuralNet:l,time:d,currentInput:p,dataViewMode:h,setDataViewMode:c}=t;if(!n)return s("div",{className:"loading",children:"Loading Simulation..."});const f=n.CanvasComponent,y=s(Wt,{viewMode:h,onChange:c});return s(fe,{hookState:t,renderSimulationView:()=>{let M=0;try{l.current&&p&&(M=l.current.predict(p))}catch(z){console.error("Predict Error",z)}const S={allowedModes:["text"],hideControls:!0,features:n.featuresConfig};return s("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px"},children:s(f,{time:d,data:i,currentInput:p,currentPrediction:M,groundTruth:r.current,neuralNet:l.current,...S})})},renderDataView:()=>{const M={allowedModes:["scatter","3d","features"],showModel:o.length>0,additionalControls:y,features:n.featuresConfig};return s("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:"300px",width:"100%"},children:h==="table"?s(xt,{children:[s("div",{style:{marginBottom:"15px"},children:s(Wt,{viewMode:h,onChange:c})}),s(Gt,{data:i,vizProps:n.networkViz||{},simConfig:n})]}):s(f,{time:0,data:i,groundTruth:r.current,neuralNet:l.current,...M})})},customDataHandling:!0})}function ci(){return s(pe,{simId:"multiple_inputs"})}function ui(){return s(pe,{simId:"single_layer_nonlinear"})}function di(){return s(pe,{simId:"double_layer_nonlinear"})}function hi(){const[e,t]=rt(0),n=[{name:"Simple Perceptron",input:.5,weight:.8,bias:.2,output:.6,inputLabel:"Input",formula:"y = w * x + b"},{name:"Spam Filter (2 Inputs)",input:[1,0],weight:[.5,-.2],bias:.1,output:.8,inputLabel:["Spam Word","Suspicious Link"],formula:"y = w1*x1 + w2*x2 + b"},{name:"Complex Model (5 Inputs)",input:[1,.5,-1,0,.2],weight:[.1,.2,.3,.4,.5],bias:-.5,output:.1,inputLabel:["F1","F2","F3","F4","F5"],formula:"y = Σ(wi*xi) + b"},{name:"Many Inputs (8 Inputs)",input:[1,0,1,0,1,0,1,0],weight:[.1,-.1,.1,-.1,.1,-.1,.1,-.1],bias:0,output:.5,inputLabel:["I1","I2","I3","I4","I5","I6","I7","I8"],formula:"y = ... "}],i=n[e];return s("div",{style:{padding:"20px"},children:[s("h2",{children:"Architecture Gallery"}),s("div",{style:{marginBottom:"20px"},children:[s("button",{onClick:()=>t((e-1+n.length)%n.length),children:"Previous"}),s("span",{style:{margin:"0 10px"},children:[i.name," (",e+1,"/",n.length,")"]}),s("button",{onClick:()=>t((e+1)%n.length),children:"Next"})]}),s("div",{style:{width:"400px",border:"1px dashed #ccc",padding:"10px"},children:s(hn,{input:i.input,weight:i.weight,bias:i.bias,output:i.output,formula:i.formula,inputLabel:i.inputLabel})})]})}const Oe=[{id:"linear_regression",label:"Phase 1 (Linear)"},{id:"logistic_regression",label:"Phase 2 (Logistic)"},{id:"multiple_inputs",label:"Phase 3 (Multi)"},{id:"single_layer_nonlinear",label:"Phase 4 (Nonlinear 1)"},{id:"double_layer_nonlinear",label:"Phase 5 (Nonlinear 2)"}];function fi(){const[e,t]=rt(null);return Tt(()=>{const r=new URLSearchParams(window.location.search).get("sim")||"linear_regression";t(r)},[]),e?e==="gallery"?s("div",{className:"container",children:[s("header",{children:[s("h1",{children:"Neural Network Demonstrator"}),s("p",{children:"Architecture Gallery (Debug)"}),s("div",{className:"sim-selector",style:{fontSize:"0.8rem",marginTop:"5px"},children:s("a",{href:"?sim=linear_regression",style:{marginRight:"10px"},children:"Back to App"})})]}),s("main",{children:s(hi,{})})]}):s("div",{className:"container",children:[s("header",{children:[s("h1",{children:"Neural Network Demonstrator"}),s("p",{children:(i=>{switch(i){case"linear_regression":return"Phase 1: Linear Regression";case"logistic_regression":return"Phase 2: Logistic Regression";case"multiple_inputs":return"Phase 3: Multiple Inputs";case"single_layer_nonlinear":return"Phase 4: Single Layer Nonlinear Data";case"double_layer_nonlinear":return"Phase 5: Double Layer Nonlinear Data";default:return"Neural Network Demonstrator"}})(e)}),s("nav",{className:"sim-selector","aria-label":"Phase Navigation",style:{fontSize:"0.8rem",marginTop:"5px"},children:Oe.map((i,r)=>s("a",{href:`?sim=${i.id}`,"aria-current":e===i.id?"page":void 0,style:{marginRight:r===Oe.length-1?0:"10px",fontWeight:e===i.id?"bold":"normal",textDecoration:e===i.id?"none":"underline",color:e===i.id?"inherit":void 0},children:i.label},i.id))})]}),s("main",{style:{height:"100%"},children:[e==="linear_regression"&&s(ai,{}),e==="logistic_regression"&&s(li,{}),e==="multiple_inputs"&&s(ci,{}),e==="single_layer_nonlinear"&&s(ui,{}),e==="double_layer_nonlinear"&&s(di,{})]})]}):s("div",{children:"Loading App..."})}Sn(s(fi,{}),document.getElementById("app"));
